RCVDMP - Generalized recovery file dump module                                  
----------------------------------------------                                  
DMRCVDMP is the source book of the generalized recovery dump module.            
This module is based on the generalised file load/dump module DMLDMOD,          
but is specifically tailored to process recovery files. Its primary             
function is to read a system recovery file on disk, dump it to tape,            
check for errors and send mails, and to output SMF records with record          
counts that can be used for file balancing. The input file can also be          
a recovery file dump tape.                                                      
                                                                                
There are many options that can be exercised by input of parameter cards        
in SYSIN. A full list of all these options is detailed below. Some of           
these parameter cards are required depending on the function.                   
                                                                                
Input File                                                                      
----------                                                                      
The default is a DDS system recovery file.The system must be named with         
a SYS=XXXX card, and a DSPACE=X card must also be specified to identify         
the environment. Dynamic allocation will be invoked if no DD card is            
input. For example, if SYS=ACC1 is specified and there is no DD card            
for ACCRCV1, then we will allocate ACC.ACCRCV1 if DSPACE=A is input.            
                                                                                
If the DSPACE=X card specifies a production environment (A,P,or R) then         
the input of a FLASH=X card will allow a flash copy of the recovery file        
to be processed. DSPACE=A with SYS=ACC1 and FLASH=1 as input cards will         
cause the dynamic allocation of file FL1.ACCRCV1.                               
                                                                                
It is possible to specify several SYS=XXXX cards if the input is disk.          
This will dump all of the recovery files specified to the output tape.          
                                                                                
If a recovery file dump tape is the required input then we must have an         
INPUT=TAPE card and provide a //TAPEIN DD card.                                 
                                                                                
Output files                                                                    
------------                                                                    
The default option is to output a recovery file tape with the DDNAME of         
RCVTAPE. This is defined with RECFM=VB,LRECL=8200,BLKSIZE=27648. The            
default can also be made specific by inputing a RCVTAPE=Y card. If no           
dump tape is required then you can input RCVTAPE=N. This can also be            
achieved by defining a //RCVTAPE DD DUMMY JCL statement as usual.               
                                                                                
If an extra copy of the tape is required input a RCVCOPY=Y card and             
a DD card for RCVCOPY.                                                          
                                                                                
If a extra tape that contains only records that have been changed by DDS        
terminals, input a RCVCDDS=Y card and provide a DD card for RCVCDDS.            
                                                                                
If an extra tape that contains invalid records is required then input a         
RCVCBAD=Y card and provide a DD card for RCVCBAD.                               
                                                                                
If a bad record is encountered then an attempt will be made to make it          
look like a good record and it will be written to RCVTAPE. A bad record         
is one that is too short or too long. If RECCHECK=Y is specified then           
the record will be analysed to see if its element structure matches the         
record length, and if not it is repaired to make it look valid. All bad         
records will be written in their original form to RCVCBAD output tape if        
RCVCBAD=Y is input.                                                             
                                                                                
There is also an option to monitor the activity on the recovery file of         
each dumped system and to update an ACTVUSR file. This sequential file          
has a record for each DDS system. If ACTV=Y is specified the activity           
is collated and the ACTVUSR file is updated. The file contains the date         
and time of the last update for each system, and the count of the number        
of updative entries in the recovery file for each of the active userids.        
                                                                                
Dynamic allocation of RCVTAPE output tape                                       
-----------------------------------------                                       
If the DD card for RCVTAPE has a DSN parameter DSN=DDSDDN then the DSN          
will be dynamically allocated with the following format. XXX is the             
3-chr system name, DDD is the dataspace name, and YY is the 1 or 2-chr          
system letter or number.                                                        
                                                                                
XXXTAPE.DDD.XXXYY.XXXRCV.COPY(+1)                                               
                                                                                
For the production ACC1 system recovery dump this would be                      
                                                                                
ACCTAPE.PRD.ACC1.ACCRCV.COPY(+1)                                                
                                                                                
SMF records                                                                     
-----------                                                                     
The recovery dump builds SMF records and processes them as defined by           
the SMF=X param.These records match the SMF records output by the               
system load/dump program DMLDMOD. They contain record counts for each           
record added and any money amounts created by the specific system               
dependent modules. There are options to also print SMF records on               
SYSPRINT (see input parameter definitions below). A later section               
gives a detailed description of the SMF file balancing records.                 
                                                                                
Warning and error messages                                                      
--------------------------                                                      
The recovery file dump program is coded to always try to complete the           
dump of a recovery file. Certain conditions are treated as warnings and         
more severe conditions as errors. Warnings and errors are printed on            
SYSPRINT and the condition code is set. If email is activated then              
messages are also sent via SMTP to the recipient list.                          
                                                                                
The following are all classified as warnings which sets COND=0008.              
                                                                                
RCVFILE LEN ERR - Record found outside min or max for thay system.              
DA FILE BAD REC - Record found with invalid element structure.                  
                                                                                
The following are all classified as errors which sets COND=0012.                
                                                                                
SKIPPED UNKNOWN - Unknown record found. Not written to tape.                    
RCVFILE DSK ERR - Disk error reading recovery file. Bad track skipped.          
SKIPPED BIG >8K - Record bigger than 8000 bytes found                           
                                                                                
Required input parameter cards                                                  
------------------------------                                                  
For a recovery file disk input 2 cards (3 in US) are required:                  
DSPACE=X                                                                        
SYS=XXXX                                                                        
ERASE=N/Y - Required only in US. Optional in UK and defaults to N.              
                                                                                
For an input recovery dump tape only one card is needed:                        
INPUT=TAPE                                                                      
                                                                                
Definition of all input parameter cards                                         
---------------------------------------                                         
Below are the definitions of all available parameter cards. They are            
listed in alphabetical order. They all have a default if omitted. The           
main default is INPUT=DISK and this requires that the system be named           
with a SYS=card. Multiple SYS=cards can be present in one run which             
will cause each of those systems to be dumped to one output tape.               
                                                                                
ACTV=X - Default ACTV=N                                                         
-----------------------                                                         
To specify userid activity and the action for ACTVUSR disk. There are           
two special options that are stand alone and are used to initialize             
or print the ACTVUSR disk file. If either of these special options are          
specified then all other param cards will be ignored.                           
                                                                                
ACTV=INIT  Initialize a ACTVUSR file. This clears all existing data.            
ACTV=PRINT Print all entries with the date/time of last activity.               
ACTV=N     No activity                                                          
ACTV=Y     Update ACTVUSR if any activity on system.                            
ACTV=P     Update ACTVUSR if any activity and print on SYSPRINT.                
ACTV=T     Tabulate activity and print on SYSPRINT. Dont update.                
                                                                                
CHECK=N/Y - Default CHECK=N                                                     
---------------------------                                                     
Same as RECCHECK=X param. CHECK=Y cause each recovery file record to            
be examined for structural validity of its elements.                            
                                                                                
COUNT=N/Y - Default COUNT=N                                                     
---------------------------                                                     
If the recovery dump program is specific to a system and the XXLDDCNT           
module is included, then COUNT=Y will count and print the logical               
directory records with the same routine as used by system load/dump             
routine V(LDCOUNT).                                                             
                                                                                
DATE=XX... - Default is today's date                                            
------------------------------------                                            
To set the date to a value other than todays date extracted from z/OS.          
                                                                                
DDSIO=XX...                                                                     
-----------                                                                     
To change the default DATAMGR module from DDSIO. This is usually the            
the first param card.                                                           
                                                                                
DELETES=N/Y - Default DELETES=N                                                 
-------------------------------                                                 
To specify that deleted records will be written to the output specify           
DELETES=Y or DELETE=Y. A deleted record is defined to be a record with          
an X'FF' set in the high order byte of the System Input Number (SIN).           
This happens when an online transaction fails and the recovery file             
records are used to back out the failing transaction. Offline recovery          
job's header and trailer records are also flagged as deleted records.           
                                                                                
DSPACE=X                                                                        
--------                                                                        
To define the environment. The DSPACE character is not validated. This          
is usually the first or second param card, and is required if the input         
is disk. The production systems are A (or P) and R (Rep system in USA).         
This is a required parameter if INPUT=DISK.                                     
                                                                                
EID=XX..,XX..,XX..                                                              
------------------                                                              
List of email addresses separated by commas.                                    
                                                                                
EMAIL=N/Y - Default EMAIL=N                                                     
---------------------------                                                     
To activate sending of emails set EMAIL=Y. Also required is a list of           
addresses specified by EID=card. Emails are sent when certain error             
conditions are encountered where expert knowledge may be required to            
investigate the error.                                                          
                                                                                
ERASE=N/Y                                                                       
---------                                                                       
If the input is a single system recovery file, ERASE=Y will erase the           
recovery file if it is dumped to RCVTAPE without any errors. This is            
a required parameter in USA. Default is ERASE=N in the UK.                      
                                                                                
FLASH=X - Default is FLASH=N                                                    
----------------------------                                                    
If the input is a single system recovery file then setting FLASH=X              
will cause the dynamic allocation of a FLX version of the file.                 
Setting FLASH=Y is the same as setting FLASH=S which is the default             
flash HLQ. If two sets of flash copies are used for pre and post                
production, then FLASH=1 and FLASH=2 are the conventions.                       
                                                                                
FORCE=N/Y - Default FORCE=N                                                     
---------------------------                                                     
This can be used to force overrides if FORCE=Y is specified. This must          
be used with extreme caution especially if the system is global.                
                                                                                
GLOBAL=X....                                                                    
------------                                                                    
Only valid for disk input when there is a single system defined by a            
SYS=XXXX param. GLOBAL=Y is valid for any system and will cause the             
system to be treated as global. GLOBAL=N,DATE is required to turn off           
global system status where DATE is a valid date expression which will           
be validated and must match todays date. This convention ensures that           
a special run turning off the global attribute of a system is only              
valid for that day. Leaving the card in and running on a different              
date will cause an error.                                                       
                                                                                
HEADERS=N/Y/F - Default HEADERS=N                                               
---------------------------------                                               
Offline jobs that write to the recovery file have a header record that          
contains the job name and JES job number. They are flagged as deleted           
records. If an offline job writes the recovery records to an MVS data           
set the header record contains the DSN of the data set. If HEADERS=F            
is input the MVSFILE will by dynamically allocated and the records will         
be read and written to RCVTAPE. To delete header records use HEADERS=N.         
Use HEADERS=Y to keep header recs. If this parameter is not specified           
it takes the same value as DELETES parameter.                                   
m                                                                               
INPUT=DISK/TAPE - Default INPUT=DISK                                            
------------------------------------                                            
Set INPUT=TAPE if a recovery file tape is input.                                
                                                                                
MAXRECS=NN...                                                                   
-------------                                                                   
Set MAXRECS to an integer to limit the number of records read on input.         
This is only useful for testing and should never be used in production.         
                                                                                
PARM=XXXX....                                                                   
-------------                                                                   
This parm will move 60 bytes XXXX.... exactly as input to the external          
PARMCARD that can be referenced by any of the included system dependent         
routines. This can also be specified as PARAM=XXXX.....                         
V(PARMCARD) is defined as an 80 byte field initialized to spaces.               
                                                                                
POINTERS=N/Y - Default POINTERS=N                                               
---------------------------------                                               
Set POINTERS=Y or POINTER=Y to write pointer copies and changes to the          
output tape. Pointers are special records in the recovery file which            
are used when a record gets larger and has to be moved to the end of            
the file. Pointer copies/changes show how the file record was changed           
to be moved from its original location.                                         
                                                                                
RCVCBAD=N/Y - Default RCVCBAD=N                                                 
-------------------------------                                                 
RCVCBAD=Y will cause an extra recovery file tape to be output                   
containing only records which are too short or too long, or have an             
invalid stucture when validated with RECCHECK=Y. These records are              
written to a tape with DD name RCVCBAD and are written unchanged unless         
the length is greater than 8000 bytes when it is truncated. The                 
repaired version of the record is written to RCVTAPE as normal.                 
                                                                                
RCVCDDS=N/Y - Default RCVCDDS=N                                                 
-------------------------------                                                 
RCVCDDS=Y will cause an extra recovery file tape to be opened and               
only records changed or added by DDS terminals will be output.                  
The DD name of this output file is RCVCDDS.                                     
                                                                                
RCVCOPY=N/Y - Default RCVCOPY=N                                                 
-------------------------------                                                 
RCVCOPY=Y will cause an extra copy of every eligible recovery file              
record to be writen to an output file with DD name RCVCOPY. RCVCOPY             
should be identical to RCVTAPE.                                                 
                                                                                
RCVTAPE=Y/N - Default RCVTAPE=Y                                                 
-------------------------------                                                 
The default is to cause the output of the recovery tape with the                
DD name RCVTAPE. To inhibit the production of the tape set RCVTAPE=N.           
An older sytax of TAPE=NO is also equivalent to RCVTAPE=N.                      
                                                                                
RECCHECK=N/Y - Default RECCHECK=N                                               
---------------------------------                                               
Set RECCHECK=Y to examine records in the recovery file for structural           
integrity. All records are checked for minimum and maximum length. If           
a record contains elements then RECCHECK=Y will follow the elements and         
check if the sum of their lengths matches the record length.                    
                                                                                
SMF=X - Default SMF=N                                                           
---------------------                                                           
The recovery dump program can build SMF records that contain details of         
added record counts and money totals. Options as follows:                       
                                                                                
SMF=N Do not output SMF records.                                                
SMF=Y Output SMF records to z/OS log.                                           
SMF=P Output SMF records to z/OS log and print them on SYSPRINT.                
SMF=T Do not output SMF records but print them on SYSPRINT.                     
                                                                                
SYS=XXXY or SYS=XXXYY                                                           
---------------------                                                           
This is a required parameter if the input is disk.The format is a               
3-chr system name followed by 1 or 2-chr system letter/number. It is            
also possible to use a 1-chr system name with the syntax S=XY. For              
example SYS=ACC1 and S=A1 are both valid. There are some systems with           
2-chr system names e.g. SYS=ACCIT or S=AIT are both valid. There can be         
multiple SYS=cards in any run allowing multiple system disk recovery            
files to be dumped to the same output tape in one run.                          
                                                                                
TAPE=NO                                                                         
-------                                                                         
This is an older syntax which is the same a RCVTAPE=N to inhibit the            
production of an output recovery file with DD name of RCVTAPE. It is            
included as some of the old recovery dumps use this convention.                 
                                                                                
TODAY=YES                                                                       
---------                                                                       
This will filter out records where the date is not equal to todays date.        
Note that todays date can be set with a DATE=card.                              
                                                                                
UPDID=XX                                                                        
--------                                                                        
For non-global systems this param will set the first two characters of          
the DATAMGR system enqueue name to XX. This should be used with extreme         
caution as it inhibits the system enqueue that occurs when a system is          
in updative mode. This will allow an erase of a recovery file even if           
is in use in an active system.                                                  
                                                                                
WRITE=Y/N - Default WRITE=Y                                                     
---------------------------                                                     
Setting WRITE=N will set the external LDWRITE to N and will inhibit             
updates to the input disk recovery file. This negates the use of the            
ERASE=Y param.                                                                  
                                                                                
SMF File balancing record                                                       
-------------------------                                                       
The definition of the file balancing record is in the book DDSMFFBAL.           
A sample of this is included in this section. Below is the print out            
of an SMF record output with SMF=T for the control system. This print           
out has the full record in hex with important text fields shown to the          
left on the line where they occur.                                              
                                                                                
Every SMF record has a standard IBM 24-byte header. These fields are            
defined by the data names begining with SMFI below. The IBM header is           
followed by a standard DDS 40-byte header whose fields are defined              
by the data names begining with SMFD below. Following the DDS header            
is the record type specific data. The fields for the file balancing             
record are defined by the data names starting with SMBF.                        
                                                                                
This example only shows record count type SMF records. There are an             
equivalent set of records where the counts are replaced by money. The           
money file balancing SMF records are only output by the specific                
recovery dumps if the system specific code extracts and returns money           
values.                                                                         
                                                                                
SMF CNTS TST   00B60000D2F80052499D0111305FE2E8F140404040400001                 
               0020002000400076D9C3D9C9C4C4D9C4E2E3C5D740404040                 
RCVDADDS       4040404040404040D1D6C2F0F3F8F9F8D9C3E5C4C1C4C4E2                 
CTRCVR         C3E3D9C3E5D9404000000000C1C30000000A000000000004                 
CON   GEN      00000000C3D6D5404040C7C5D5404040C3D6D54BC3E3D9C3                 
CON.CTRCVR     E5D9404000AEAF00000000000000000000000002330C0000                 
               00000001165C000000000001165C000000000000000C0000                 
               00000000000C000000000000000C                                     
                                                                                
SMFIHDR  DS    0XL24               IBM RECORD HEADER WITH SUBTYPES              
SMFILEN  DS    XL2                 LENGTH INCLUDING THIS FIELD                  
SMFISEG  DS    XL2                 SEGMENT DESCRIPTOR (SET TO ZERO)             
SMFIFLG  DS    XL1                 FLAGS 80=SUBSYSTEM,40=SUBTYPE FORMAT         
SMFIRTY  DS    AL1                 RECORD TYPE                                  
SMFITME  DS    XL4                 TIME IN 1/100 SEC                            
SMFIDTE  DS    PL4                 DATE P'0CYYMMMF'                             
SMFISID  DS    CL4                 SYSTEM ID                                    
SMFISSI  DS    CL4                 SUBSYSTEM ID                                 
SMFISTY  DS    XL2                 SUBTYPE                                      
                                                                                
SMFDHDRO DS    XL2    0020        <OFFSET TO DDS HEADER                         
SMFDHDRL DS    XL2    0020        <LENGTH OF DDS HEADER                         
SMFDATAO DS    XL2    0040        <OFFSET TO DDS DATA 1 AREA                    
SMFDATAL DS    XL2    0076        <LENGTH OF DDS DATA 1 AREA                    
                                                                                
SMFDHDR  DS    0CL32               DDS HEADER                                   
SMFDJOB  DS    CL8                 JOB NAME                                     
SMFDSTEP DS    CL16                STEP/PROC NAME                               
SMFDJES  DS    CL8                 JES NAME                                     
                                                                                
SMFBREC  DS    0CL116              FILE BALANCING RECORD                        
SMFBSRCE DS    CL4    RCVD        <SOURCE NAME                          00003   
SMFBUSER DS    CL4    ADDS        <SOURCE USER DATA                     00004   
SMFBTXT  DS    CL8    CTRCVR      <SOURCE TEXT AREA                     00013   
SMFBDATE DS    PL4                 SOURCE DATE JULIAN P'0CDDDYYF'       00014   
SMFBDSPC DS    CL1    A           <DSPACE                               00015   
SMFBTYPE DS    CL1    C           <TYPE C=COUNTS,M=MONEY                00016   
SMFBVER  DS    XL1                 VERSION                              00017   
         DS    XL1                 N/D                                  00018   
SMFBSENX DS    XL1                 RESERVED FOR SE NUMBER EXTENSION     00019   
SMFBSENO DS    XL1    0A          <SE NUMBER                            00020   
SMFBUID  DS    XL2                 USER ID NUMBER                       00021   
SMFBAGY  DS    XL1                 AGY/CPY CODE BINARY                  00022   
SMFBAGYA DS    CL2                 AGY/CPY CODE ALPHA                   00023   
SMFBMODE DS    XL1                 MODE FLAGS FROM DMLDMOD              00024   
         DS    CL4                 N/D                                  00025   
SMFBTXT1 DS    CL12   CON   GEN   <TEXT FIELD 1                         00026   
SMFBTXT2 DS    CL12   CON.CTRCVR  <TEXT FIELD 2                         00030   
SMFBFNOS DS    6XL1   00AEAF000000<FILE NUMBERS - TAPE/DIR/1/2/3/4      00031   
SMFBWARN DS    XL4                 NUMBER OF WARNINGS - ZERO ALL OK     00032   
*                                                                       00033   
SMFBCNT1 DS    PL8    00002330    <COUNTER FOR TAPE                     00036   
SMFBCNT2 DS    PL8    00001165    <COUNTER FOR DIRECTORY                00037   
SMFBCNT3 DS    PL8    00001165    <COUNTER FOR FILE 1                   00038   
SMFBCNT4 DS    PL8                 COUNTER FOR FILE 2                   00039   
SMFBCNT5 DS    PL8                 COUNTER FOR FILE 3                   00040   
SMFBCNT6 DS    PL8                 COUNTER FOR FILE 4                   00041   
                                                                                
Sample output from DDRD                                                         
-----------------------                                                         
Below is the output from the generic recovery dump program DDRD. DDRD           
can be used to dump any DDS system recovery file. It contains no extra          
system specific code that is included in the individyal XXRD recovery           
file dumps.                                                                     
                                                                                
This example is for the control system recovery file. Only the required         
params have been input. What is missing from this extract from SYSPRINT         
output to the right are the counters for DDS chgs/adds plus the                 
counters for passive cpys/chgs/adds which are only available for the            
system specific recovery file dump programs.                                    
                                                                                
DSPACE=A                                                                        
SYS=CON                                                                         
ERASE=N                                                                         
                                                                                
DATE 11/11/11      TIME 11.11     RECOVERY FILE DUMP - CON.CTRCVR               
                                  -------------------------------               
ACTION MESSAGES                                                                 
---------------                                                                 
OPN R/O CTRCVR   FN=CTRCVR   DSN=CON.CTRCVR    SYS=CON   SENUM=0A               
OPN OUT RCVTAPE              DSN=RCRI.RCVTAPE                                   
                                                                                
CTRCVR            ALL CPYS  ALL CHGS  ALL ADDS  ALL TOTS  DDS CPYS ...          
-------          --------- --------- --------- --------- --------- ...          
CTFILE           000000986 000000986 000000246 000002218 000000099 ...          
GENDIR           000000609 000000609 000001191 000002409 000000010 ...          
GENFIL           000018487 000018487 000001186 000038160 000000010 ...          
                                                                                
CTRCVR  TRACKS   SZ=002700 US=000214 AV=002486 AVAL%=092 CON.CTRCVR             
                                                                                
INPUT            REC COUNT                                                      
------------     ---------                                                      
RECORDS READ     000042794                                                      
FLAGGED DELETED  000000005                                                      
SKIPPED DELETED  000000005                                                      
FLAGGED POINTER  000000002                                                      
SKIPPED POINTER  000000002                                                      
                                                                                
OUTPUT           REC COUNT                                                      
-------          ---------                                                      
RCVTAPE          000042787                                                      
                                                                                
CTRCVR  NOT ERASED (ERASE=N) CON.CTRCVR                                         
                                                                                
Sample output from DDRD with errors                                             
-----------------------------------                                             
Below is the output from the generic recovery dump program DDRD for             
the spot system. Three errors have been found. A record with length             
greater that 8000 bytes; a SPTFIL record with a length greater than the         
defined maximum for SPTFIL; and a SPTFIL record who's length does not           
equal the sum of its elements. There is more output to the right on the         
actual SYSPRINT output. The invalid records have been written to the            
output file RCVCBAD as RCVCBAD=Y was specified. An email has been sent          
with a line for each error type because EMAIL=Y and an EID=list was             
specified.                                                                      
                                                                                
DSPACE=A                                                                        
CHECK=Y                                                                         
EID=RCRI                                                                        
EMAIL=Y                                                                         
RCVTAPE=Y                                                                       
RCVCBAD=Y                                                                       
ERASE=N                                                                         
SYS=SPT1                                                                        
                                                                                
DATE 11/11/11      TIME 11.11     RECOVERY FILE DUMP - TST.RECV1                
                                  ------------------------------                
ACTION MESSAGES                                                                 
---------------                                                                 
OPN R/O RECV1    FN=RECV1    DSN=TST.RECV1     SYS=SPT1  SENUM=02               
OPN OUT RCVTAPE              DSN=RCRI.RCVTAPE                                   
OPN OUT RCVCBAD                                                                 
                                                                                
INVALID RCV >8K  HDR=21030000000000000190311F08D910020200.. LEN=08452           
RCVCBAD WRITTEN  REC=F1804CFF014A204A02C800010003B1100000..                     
                                                                                
INVALID RCV LEN  HDR=21030000000000000190311F08D910020200.. LEN=06148           
RCVCBAD WRITTEN  REC=F1804CFF014A204A02C800010003B1100000..                     
                                                                                
WARNING BAD LEN  HDR=2102FFC400000BCE4042154C08D910060201.. LEN=00231           
                 KEY=01000000000000000000000001                                 
SPTFIL 08D91006  CTL=0080000000000000000000                                     
                 01EEC1C1C1C1C1C1C1C1C1C14040404040404040404040404040           
                     404040404040404040404040404040404040404040404040           
                     400000000000000000000000000000000000000000000000           
                     000000000000000000000000000000000000000000000000           
                     000000000000000000000000000000000000000000000000           
                                                                                
RECV1             ALL CPYS  ALL CHGS  ALL ADDS  ALL TOTS  DDS CPYS              
-------          --------- --------- --------- --------- ---------              
SPTFIL           000000572 000000573 000000254 000001399 000000572              
SPTDIR           ......... ......... 000001327 000001327 .........              
SPTREQ           ......... ......... 000000068 000000068 .........              
XSPDIR           000000001 000000001 000000002 000000004 .........              
XSPFIL           ......... 000000002 ......... 000000002 .........              
                                                                                
RECV1   TRACKS   SZ=011250 US=000017 AV=011233 AVAL%=099 TST.RECV1              
                                                                                
INPUT            REC COUNT                                                      
------------     ---------                                                      
RECORDS READ     000002892                                                      
FLAGGED DELETED  000000002                                                      
SKIPPED DELETED  000000002                                                      
FLAGGED POINTER  000000090                                                      
SKIPPED POINTER  000000090                                                      
SKIPPED BIG >8K  000000001 **ERROR**                                            
RCVFILE LEN ERR  000000001 *WARNING*                                            
DA FILE BAD REC  000000001 *WARNING*                                            
                                                                                
EMAIL SENT TO:   RCRI                                                           
EMAIL SUBJECT:   JOB=RCRID   .RCVDMP   RCVD SYS=A/SPT1 /                        
EMAIL MESSAGE:   **ERROR** RECV1    SKIPPED BIG >8K  0000001 TST.RECV1          
EMAIL MESSAGE:   *WARNING* RECV1    RCVFILE LEN ERR  0000001 TST.RECV1          
EMAIL MESSAGE:   *WARNING* RECV1    DA FILE BAD REC  0000001 TST.RECV1          
                                                                                
OUTPUT           REC COUNT                                                      
-------          ---------                                                      
RCVTAPE          000002800                                                      
RCVCBAD          000000003                                                      
                                                                                
RECV1   NOT ERASED (ERASE=N) TST.RECV1                                          
                                                                                
Sample output from GERD                                                         
-----------------------                                                         
Below is the output from the specific recovery dump program GERD for            
the control system. Several extra optional parameters have been input.          
More information is available as GERD has control system specific code          
linked in to analyse records by record type e.g. COUNT=Y. In this case          
we have asked for any header records with MVS data sets to be read and          
output to the RCVTAPE by setting HEADERS=F.                                     
                                                                                
DDSIO=DDSIO                                                                     
DSPACE=A                                                                        
CHECK=Y                                                                         
COUNT=Y                                                                         
EID=RCRIDDLO                                                                    
EMAIL=Y                                                                         
HEADERS=F                                                                       
RCVTAPE=Y                                                                       
RCVCOPY=Y                                                                       
RCVCDDS=Y                                                                       
RCVCBAD=Y                                                                       
SMF=N                                                                           
SYS=CON                                                                         
                                                                                
DATE 11/11/11      TIME 11.11     RECOVERY FILE DUMP - CON.CTRCVR               
                                  -------------------------------               
ACTION MESSAGES                                                                 
---------------                                                                 
OPN R/O CTRCVR   FN=CTRCVR   DSN=CON.CTRCVR    SYS=CON   SENUM=0A               
OPN OUT RCVTAPE              DSN=RCRI.RCVTAPE                                   
OPN OUT RCVCOPY                                                                 
OPN OUT RCVCDDS                                                                 
OPN OUT RCVCBAD                                                                 
OPN INP MVSFILE  1111@0349   DSN=DDS.RECOVERY.RCRITEST.JOB29734                 
                                                                                
CTRCVR            ALL CPYS  ALL CHGS  ALL ADDS  ALL TOTS  DDS CPYS ...          
-------          --------- --------- --------- --------- --------- ...          
CTFILE           000001011 000001011 000000337 000002359 000000103 ...          
GENDIR           000000711 000000711 000001221 000002643 000000010 ...          
GENFIL           000019313 000019313 000001216 000039842 000000010 ..           
                                                                                
CTRCVR  TRACKS   SZ=002700 US=000224 AV=002476 AVAL%=091 CON.CTRCVR             
                                                                                
INPUT            REC COUNT                                                      
------------     ---------                                                      
RECORDS READ     000044851                                                      
FLAGGED DELETED  000000005                                                      
SKIPPED DELETED  000000005                                                      
FLAGGED HDR DSN  000000001                                                      
FLAGGED POINTER  000000002                                                      
SKIPPED POINTER  000000002                                                      
CTFILE DELETES   000000005                                                      
GENDIR DELETES   000000596                                                      
GENFIL DELETES   000000596                                                      
                                                                                
SYSTEM NAME      RECORD TYPE                 ACTIVE   DELETED     TOTAL         
-----------      -----------                -------   -------   -------         
                 ESS ID RECORD              0000002   .......   0000002         
                 CURRENCY RECORDS           0000060   .......   0000060         
                 EXCHANGE RECORDS           0001917   0000596   0002513         
                 NARRATIVE RECORDS          0000052   .......   0000052         
                 DATA DICT. (NEW-STYLE)     0000011   .......   0000011         
                 EQUATE NAME (PASSIVE)      0000005   .......   0000005         
                 ** FILE TOTALS **          0002047   0000596   0002643         
                                                                                
OUTPUT           REC COUNT                                                      
-------          ---------                                                      
RCVTAPE          000044844                                                      
RCVCOPY          000044844                                                      
RCVCDDS          000000286                                                      
                                                                                
CTRCVR  NOT ERASED (ERASE=N) CON.CTRCVR                                         
                                                                                
Sample output from ACRD                                                         
-----------------------                                                         
Below is the output from the specific recovery dump program ACRD for            
the account system. In this example we have specified DELETE=Y and              
POINTER=Y to cause these type of records to be included. We have also           
set RCVTAPE=N to inhibit the creation of the RCVTAPE output file. This          
example shows the use of the ACTVUSR file with the ACTV=P option. The           
job must have a DD statement for the file ACTVUSR which must have been          
created by a special ACTV=INIT stand alone command. Shown on SYSPRINT           
is the confirmation that the activity file has been updated for ACC1            
and the time it happened. There were 32 active userids and the counts           
for each userid number are shown.                                               
                                                                                
DSPACE=A                                                                        
ACTV=P                                                                          
DELETE=Y                                                                        
POINTER=Y                                                                       
RCVTAPE=N                                                                       
SYS=ACC1                                                                        
                                                                                
DATE 11/11/11      TIME 11.11     RECOVERY FILE DUMP = ACC.ACCRCV1              
                                  --------------------------------              
ACTION MESSAGES                                                                 
---------------                                                                 
OPN R/O ACCRCV1  FN=ACCRCV1  DSN=ACC.ACCRCV1   SYS=ACC1  SENUM=06               
                                                                                
ACCRCV1           ALL CPYS  ALL CHGS  ALL ADDS  ALL TOTS  DDS CPYS ...          
-------          --------- --------- --------- --------- --------- ...          
ACCREQ           ......... ......... 000000005 000000005 ......... ...          
ACCDIR           000001027 000001027 000003135 000005189 ......... ...          
ACCMST           000002401 000002401 000001377 000006179 000000001 ...          
                                                                                
ACCRCV1 TRACKS   SZ=002475 US=000058 AV=002417 AVAL%=097 ACC.ACCRCV1            
                                                                                
INPUT            REC COUNT                                                      
------------     ---------                                                      
RECORDS READ     000011386                                                      
FLAGGED POINTER  000000013                                                      
ACCDIR DELETES   000000291                                                      
ACCDIR RESTORES  000000115                                                      
ACCMST DELETES   000000089                                                      
ACCMST RESTORES  000000017                                                      
                                                                                
ACTIVITY  042148 UPDATED                                                        
----------------                                                                
SE#006 ACTV=0032 10859=000001 05066=000050 05433=001313 11300=000051            
                 03883=000001 14251=000004 07963=000033 14162=000002            
                 12225=001306 03575=000009 08710=000229 09388=000096            
                 14108=000003 15600=000021 14945=000001 10368=000009            
                 08451=000003 04737=000491 03574=000044 14215=000001            
                 15749=000002 14164=000002 11334=000002 04386=000479            
                 08603=000017 03002=000049                                      
                                                                                
OUTPUT           REC COUNT                                                      
-------          ---------                                                      
                                                                                
ACCRCV1 NOT ERASED (ERASE=N) ACC.ACCRCV1                                        
