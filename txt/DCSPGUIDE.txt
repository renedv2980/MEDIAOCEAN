         TITLE 'MEDIA SUMMARY MODULES'                                          
                                                                                
RELONAME       PAN-NAME       DESCRIPTION                   PARAMETERS          
_-------       --------       -----------                   ----------          
                                                                                
                                                                                
MEDACTBK       SPMEDACTBK     BUILD A LIST OF BOOKS TO                          
                              BE USED BY THE DEMO LOOKUPS                       
                                ( sta, client, qstart-end must be set )         
                                                                                
MEDCLEAR       SPMEDCLEAR     REINITIALISES DEFINITION      1=A(REPT DEF. TABLE)
                              TABLES TO MAKE THEM ACTIVE                        
                                                                                
MEDDATE        SPMEDDATE      BUILD A LIST OF DATES TO BE   1=A(WORKC)          
                              USED BY EXTRACT ROUTINES                          
                                                                                
MEDDEMTB       SPMEDDEMTB     128 7-BYTE DEMO EXPANSIONS                        
                                                                                
MEDEDIT        SPMEDEDIT      FORMATS A REPORT LINE FROM    1=A(WORKC)          
                              TABLES                                            
                              AFTER MEDEDIT PARAMETER 1 HAS                     
                              FIRST BYTE=PRINT CONTROL                          
                              BYTES 1-3=A(14BYTE DEMO-LIST)                     
                                                                                
MEDEQUIV       SPMEDEQUIV     WORKS OUT EQUIVALENCY FACTOR  1=A(WORKC)          
                              AND DAYPART GROUP FOR BUY                         
                              OR GOAL RECORDS                                   
                                                                                
MEDGETBY       SPMEDGETBY     EXTRACT BUY DATA FROM BUY     1=A(WORKC)          
                              RECORD                        2=0=NO DEMOS.       
                                                              1=ESTIMATED       
                                                              2=ESTIMATED ADJ.  
                                                              3=RERATED         
                                                              4=RERATED ADJ.    
                                                              5=ADJUST ESTIMATED
                                                                TO NEW MONTH    
                                                              6=AFFID           
                                                              7=AFFID ADJ.      
                                                                                
MEDGETGL       SPMEDGETGL     AS ABOVE FOR GOALS                                
                                                                                
MEDGETLK       SPMEDGETLK     AS ABOVE FOR LOCKIN                               
                                                                                
<PA>                                                                            
RELONAME       PAN-NAME       DESCRIPTION                   PARAMETERS          
_-------       --------       -----------                   ----------          
                                                                                
MEDMKTWT       SPMEDMKTWT     WEIGHTS ALL RATING POINTS IN  1=A(WORKC)          
                              EXTRACTED BLOCK BY SUPPLIED                       
                              FACTOR                                            
                                                                                
MEDPRDRD       SPMEDPRDRD     BUILDS A LIST OF PRODUCT      1=A(WORKC)          
                              /ESTIMATE INFO AS FOLLOWS-                        
                              BYTE  0  PRODUCT CODE (1)                         
                              BYTE  1  PRODUCT ALPHA (3)                        
                              BYTE  4  PRODUCT NAME (20)                        
                              BYTE 25  ALLOCATION CLASS (1)                     
                              BYTE 26  ALLOCATION TARGETS (2)                   
                              BYTE 28  STATUS (1)                               
                              BYTE 29  20 DEMO NUMBERS (3 BYTES PER ENTRY)      
                              BYTE 89  20 DEMO WEIGHTS (1 BYTE PER ENTRY)       
                                                                                
MEDPSL         SPMEDPSL       BUILDS A LIST OF PRODUCT/     1=A(WORKC)          
                              SPOTLENGTH COMBINATIONS       2=A(PRD/SL LIST)    
                              FOR A BUY.                                        
                                                                                
MEDPOST        SPMEDPOST      POST DATA FROM EXTRACTS       1=A(WORKC)          
                              INTO BUFFALO RECORDS.                             
                                                                                
MEDSEED        SPMEDSEED      COMPLETE DISPLACEMENTS IN     1=A(WORKC)          
                              MEDIA SUMMARY TABLES            IF FIRST BYTE=G,  
                                                              ONLY NEED GOALS.  
                                                                                
MEDSTARS       SPMEDSTARS     ADDS A STAR TO EACH FIELD IN  1=A(PRINT LINE)     
                              A PRINT LINE (NO */+ ENDING)                      
                                                                                
<PA>                                                                            
         TITLE 'MEXT'                                                           
                                                                                
THE MEXT  MACRO GENERATES THE 8-BYTE ENTRY IN A MEDIA SUMMARY                   
EXTRACT TABLE.  THE LENGTH AND DISPLACEMENT OF DATA TO BE RETRIEVED             
IS COMPUTED AND BECOMES THE FIRST 4 BYTES OF AN ENTRY.                          
                                                                                
(TAG)    MEXT  DATATYPE(,DATE PARAMETER)                                        
                                                                                
                                                                                
                                                                                
VALID DATATYPE      GENERATE       OPTIONAL DATE                                
_-------------      --DATA---        PARAMETER                                  
                                                                                
CLIENT                 CL3                                                      
PRDGRP                 CL4                                                      
MKTGRP                 CL5                                                      
PRODUCT                CL3                                                      
BRAND                  XL1                                                      
ESTIMATE               XL1                                                      
MARKET                 XL2                                                      
STATION                XL3                                                      
DAYPART-GROUP          XL1,CL3                                                  
DAYPART                XL1,CL3                                                  
SPOT-LENGTH            XL1                                                      
PRIMARY                XL1                                                      
PURPOSE                CL1                                                      
PROGTYPE               CL1                                                      
AFFILIATION            CL1                                                      
REP                    XL2                                                      
WEEK(1-53)             XL4                                                      
                                                                                
CLIENT-NAME            CL20                                                     
PRODUCT-NAME           CL24                                                     
MARKET-NAME            CL24                                                     
MKTGRP-NAME            CL24                                                     
DEMO-NAME              CL7                                                      
                                                                                
ZERO                   F'0'                                                     
X'HHHH...'             HEX STRING                                               
C'CCCC...'             CHARACTER STRING                                         
                                                                                
GOAL-$                 F                YES                                     
GOAL-$EQV              F                YES                                     
GOAL-DEM1              F                YES                                     
GOAL-DEM1EQV           F                YES                                     
GOAL-DEM2              F                YES                                     
GOAL-DEM2EQV           F                YES                                     
                                                                                
LOCKIN-$               F                YES                                     
LOCKIN-$EQV            F                YES                                     
LOCKIN-SPOTS           F                YES                                     
LOCKIN-DEM1            F                YES                                     
LOCKIN-DEM1EQV         F                YES                                     
LOCKIN-DEM2            F                YES                                     
LOCKIN-DEM2EQV         F                YES                                     
                                                                                
BUY-$                  F                YES                                     
BUY-$EQV               F                YES                                     
BUY-SPOTS              F                YES                                     
BUY-PRIME              F                YES                                     
BUY-PRIMEEQV           F                YES                                     
BUY-DEM1               F                YES                                     
BUY-DEM1EQV            F                YES                                     
BUY-DEM2               F                YES                                     
BUY-DEM2EQV            F                YES                                     
  ...                                                                           
BUY-DEM14              F                YES                                     
BUY-DEM14EQV           F                YES                                     
                                                                                
                                                                                
                                                                                
VALID DATE PARAMETERS                                                           
                                                                                
WEEK1 THRU WEEK56                                                               
MONTH1 THRU MONTH12                                                             
QUARTER1 THRU QUARTER4                                                          
PERIOD (ONLY NEEDED FOR REPORT WHICH HAS MONTHS/WEEKS AS WELL)                  
                                                                                
                                                                                
                                                                                
         MEXT  SPOT-LENGTH              EXAMPLES                                
               MEXT GOAL-$,MONTH1                                               
<PA>                                                                            
         TITLE 'MEDIT'                                                          
                                                                                
THE MEDIT MACRO GENERATES THE 8-BYTE ENTRY IN A MEDIA SUMMARY PRINT             
DEFINITION TABLE.  AN EDIT ROUTINE NUMBER, DISPLACEMENT INTO PRINT              
LINE AND A LIST OF COLUMNS ARE GENERATED.                                       
                                                                                
                                                                                
                                                                                
(TAG)    MEDIT ROUTINE-NAME,PRINT-COLUMN(,KEY,1,2,3..)                          
                                        (,COL,1,2,3..)                          
                                                                                
                                                                                
                                                                                
ROUTINE-NAME   ROUTINE   EXPANSION                                              
_-----------   NUMBER    ---------                                              
                                                                                
BRAND          01        BB(B) - BRAND NAME (PRIMARY DEMO)                      
MARKET         02        NNNN - MARKET NAME (WEIGHTING)                         
DAYPART        03        DAY-30 OR -60 OR DAY OR -TOT OR *TOTAL*                
NUMBER         04        9(10) WILL NOT OVERWRITE                               
NUMBER3        05        3 NUMBERS 9(8)                                         
NUMBER14       06        14 NUMBERS 9(6)                                        
MONTHLY        07        GOAL/PTS GOAL/$ PTS $  PCT/PTS PCT/$                   
                         INPUT=GOALPNTS/GOAL$/POINTS/$                          
                         OUTPUT=7/8/7/8/5/5=40                                  
CPM            08        POINTS DOLLARS  CPP (LENGTH 24)                        
                         (IMPS)          CPM                                    
                         OUTPUT=7/9/8=24                                        
AVERAGE        09        SPOT  POINTS/SPOT (LENGTH 11)                          
PERCENT        10        NNNN OR HIGH                                           
IMPS           11        IMPS  CPM  OR POINTS CPP (LENGTH 15)                   
                         INPUT=$/DEM2                                           
                         OUTPUT=7/8=15                                          
IMPS3          12        AS ABOVE THREE TIMES                                   
                         INPUT=$/DEM2/DEM3/DEM4                                 
                         OUTPUT=7/8/7/8/7/8=45                                  
DEMONAME       13        EXPANDS 3 DEMO NAMES                                   
WEEK           14        MMMDD                                                  
MONTH          15        MMM                                                    
C'ABC...'      16        ABC...                                                 
                                                                                
                                                                                
                                                                                
         MEDIT DAYPART,2,KEY,2     EXAMPLES                                     
         MEDIT MONTHLY,31,COL,4,8,12,3                                          
         MEDIT C'TOTAL',10                                                      
<PA>                                                                            
         TITLE 'MEDBLOCK - EXTRACT BLOCK DSECT'                                 
                                                                                
(++INCLUDE SPMEDBLOCK FOR THIS)                                                 
                                                                                
                                                                                
*              DSECT TO COVER MEDIA SUMMARY EXTRACT BLOCK                       
MEDBLOCK DSECT                                                                  
MEDNUMWK DS    F                   NUMBER OF WEEKS                              
MEDNUMMO DS    F                   NUMBER OF MONTHS                             
MEDNUMQT DS    F                   NUMBER OF QUARTERS                           
MEDNUMPE DS    F                   NUMBER OF PERIODS                            
MEDAFRST DS    A                   A(FIRST DATE TO BE CHECKED)                  
MEDALAST DS    A                   A(LAST DATE TO BE CHECKED)                   
MEDLCHNK DS    F                   SIZE OF CHUNK (SEE MEDDATA)                  
MEDDATES DS    0CL12               12 BYTE DATE ENTRIES                         
*                                  BYTES 1-4  START/END COMPRESSED DATE         
*                                  BYTES 5-8  A(CHUNK FOR THIS PERIOD)          
*                                  BYTES 9-12 A(CHUNK TO ADD INTO)              
                                                                                
MEDWEEKS DS    0C                  BROADCAST WEEKS                              
MEDQ1WKS DS    15CL12                                                           
MEDQ2WKS DS    15CL12                                                           
MEDQ3WKS DS    15CL12                                                           
MEDQ4WKS DS    15CL12                                                           
MEDQ5WKS DS    15CL12                                                           
                                                                                
                                                                                
MEDMON01 DS    CL12                BROADCAST MONTHS                             
MEDMON02 DS    CL12                                                             
MEDMON03 DS    CL12                                                             
MEDMON04 DS    CL12                                                             
MEDMON05 DS    CL12                                                             
MEDMON06 DS    CL12                                                             
MEDMON07 DS    CL12                                                             
MEDMON08 DS    CL12                                                             
MEDMON09 DS    CL12                                                             
MEDMON10 DS    CL12                                                             
MEDMON11 DS    CL12                                                             
MEDMON12 DS    CL12                                                             
MEDMON13 DS    CL12                                                             
         DS    CL12                                                             
                                                                                
                                                                                
MEDQRT01 DS    CL12                QUARTERS                                     
MEDQRT02 DS    CL12                                                             
MEDQRT03 DS    CL12                                                             
MEDQRT04 DS    CL12                                                             
MEDQRT05 DS    CL12                                                             
         DS    CL12                                                             
                                                                                
                                                                                
MEDBFORE DS    CL12                                                             
MEDPERD  DS    CL12                PERIOD                                       
MEDAFTER DS    CL12                                                             
MEDTOTAL DS    CL12                                                             
                                                                                
                                                                                
         DS    CL48                SPARE                                        
MEDNUMDE DS    F                   NUMBER OF DATE ENTRIES ABOVE                 
MEDSPTLN DS    CL1                 SPOT LENGTH                                  
MEDPRIMY DS    CL1                 PRIMARY DEMO NUMBER                          
MEDPURPS DS    CL1                 PURPOSE CODE                                 
MEDPRGTP DS    CL1                 PROGRAM TYPE                                 
MEDAFFIL DS    CL1                 AFFILIATION                                  
MEDBRAND DS    XL1                 BRAND CODE SET BY APPLICATION                
MEDSLCNT DS    XL1                 COUNTS USED BY MEDEDIT                       
MEDDPCNT DS    XL1                                                              
MEDEXTDM DS    CL1                 NUMBER OF DEMOS TO EXTRACT DEFAULT=4         
MEDEXTAC DS    CL1                 Y=EXTRACT ACCOUNTING INFO. DEFAULT=N         
MEDEXTCS DS    CL1                 Y=EXTRACT CHILD-SPOT INFO. DEFAULT=N         
MEDNYBEF DS    CL1                 Y=NEED BEFORE PERIOD DATE DEFAULT=N          
MEDNYAFT DS    CL1                 Y=NEED AFTER  PERIOD DATA DEFAULT=N          
MEDNYTOT DS    CL1                 Y=NEED TO ADD BEFORE,AFTER TO TOAL           
MEDDFORM DS    XL1                 DATE FORMULA   0=BROADCAST MONTHS            
*                                                 6=5/4/4 PATTERN               
*                                                 7=4/4/5 PATTERN               
*                                                 8=4/5/4 PATTERN               
MEDDPGNO DS    CL1                 DAYPART GROUP NUMBER                         
MEDDPGRP DS    CL3                 DAYPART GROUP CODE                           
MEDDPNO  DS    CL1                 DAYPART NUMBER                               
MEDDPART DS    CL3                 DAYPART CODE                                 
MEDEXTAV DS    CL1                 Y=EXTRACT PERIOD AVERAGES                    
MEDSPILL DS    CL1                 Y=SPILL DATA                                 
MEDNOLNK DS    CL1                 Y=DO NOT USE LINKS FOR TOTALING              
MEDEXTAX DS    CL1                 Y=EXTRACT TAX FOR MEDIA REPORTS              
         DS    CL1                                                              
MEDEQFAC DS    H                   EQUIVALENCY FACTOR                           
         DS    CL14                                                             
                                                                                
                                                                                
*                                  PERIOD AVERAGE FIELDS                        
MEDVPEST DS    14F                           ESTIMATED POINTS                   
MEDVPACH DS    14F                           ACHIEVED POINTS                    
MEDVAEST DS    14F                           ESTIMATE ADJUSTMENTS               
MEDVAACH DS    14F                           ACHIEVED ADJUSTMENTS               
MEDADEMO DS    A                   A(DEMO ELEMENT TABLE)                        
         DS    13F                 SPARE                                        
                                                                                
                                                                                
*                                  CHUNK OF FIELDS (1 CHUNK PER PERIOD)         
                                                                                
MEDDATA  DS    0H                                                               
MEDGLD   DS    F                   GOAL      DOLLARS                            
MEDGLDEQ DS    F                             EQUIVALENCED DOLLARS               
MEDGL1   DS    F                             DEMO 1                             
MEDGL1EQ DS    F                             DEMO 1 EQUIVALENCED                
MEDGL2   DS    F                             DEMO 2                             
MEDGL2EQ DS    F                             DEMO 2 EQUIVALENCED                
         DS    2F                            SPARE                              
                                                                                
MEDLKD   DS    F                   LOCK-IN   DOLLARS                            
MEDLKDEQ DS    F                             EQUIV $                            
MEDLKSPT DS    F                             SPOTS                              
MEDLK1   DS    F                             DEMO 1                             
MEDLK1EQ DS    F                             EQUIV DEMO 1                       
MEDLK2   DS    F                             DEMO 2                             
MEDLK2EQ DS    F                             EQUIV DEMO 2                       
         DS    2F                            SPARE                              
                                                                                
                                                                                
         ORG   MEDLKD                                                           
MEDCSPAY DS    F                   CHILD-    PAY DOLLARS                        
MEDCSNTP DS    F                    SPOT     NTP DOLLARS                        
MEDCSTIM DS    F                             TOTAL TIME DOLLARS                 
MEDCSTAL DS    F                             TALENT DOLLARS                     
MEDCSTPT DS    F                             TIME + TALENT DOLLARS              
MEDCSPSP DS    F                             PAY SPOTS                          
MEDCSNSP DS    F                             NTP SPOTS                          
MEDMSTAX DS    F                             MEDIA SUMMARY TAX                  
         DS    F                             SPARE                              
<PA>                                                                            
MEDBYD   DS    F                   BUY       DOLLARS                            
MEDBYDEQ DS    F                             EQUIV $                            
MEDBYSPT DS    F                             SPOTS                              
MEDBYP   DS    F                             PRIME                              
MEDBYPEQ DS    F                             PRIME  EQUIV                       
MEDBY1   DS    F                             DEMO 1                             
MEDBY1EQ DS    F                             DEMO 1 EQUIV                       
MEDBY2   DS    F                             DEMO 2                             
MEDBY2EQ DS    F                             DEMO 2 EQUIV                       
MEDBY3   DS    F                             DEMO 3                             
MEDBY3EQ DS    F                             DEMO 3 EQUIV                       
MEDBY4   DS    F                             DEMO 4                             
MEDBY4EQ DS    F                             DEMO 4 EQUIV                       
MEDBY5   DS    F                             DEMO 5                             
MEDBY5EQ DS    F                             DEMO 5 EQUIV                       
MEDBY6   DS    F                             DEMO 6                             
MEDBY6EQ DS    F                             DEMO 6 EQUIV                       
MEDBY7   DS    F                             DEMO 7                             
MEDBY7EQ DS    F                             DEMO 7 EQUIV                       
MEDBY8   DS    F                             DEMO 8                             
MEDBY8EQ DS    F                             DEMO 8 EQUIV                       
MEDBY9   DS    F                             DEMO 9                             
MEDBY9EQ DS    F                             DEMO 9 EQUIV                       
MEDBY10  DS    F                             DEMO 10                            
MEDBY10Q DS    F                             DEMO 10 EQUIV                      
MEDBY11  DS    F                             DEMO 11                            
MEDBY11Q DS    F                             DEMO 11 EQUIV                      
MEDBY12  DS    F                             DEMO 12                            
MEDBY12Q DS    F                             DEMO 12 EQUIV                      
MEDBY13  DS    F                             DEMO 13                            
MEDBY13Q DS    F                             DEMO 13 EQUIV                      
MEDBY14  DS    F                             DEMO 14                            
MEDBY14Q DS    F                             DEMO 14 EQUIV                      
         DS    4F                            SPARE                              
                                                                                
                                                                                
         ORG   MEDBY5                                                           
MEDBYNET DS    F                             NET                                
MEDBYCOM DS    F                             COMMISSION                         
MEDBYGRS DS    F                             GROSS                              
MEDBYNBL DS    F                             NET BILLED                         
MEDBYNUB DS    F                             NET UNBILLED                       
MEDBYGBL DS    F                             GROSS BILLED                       
MEDBYGUB DS    F                             GROSS UNBILLED                     
MEDBYPAY DS    F                             GROSS PAID                         
MEDBYUNP DS    F                             GROSS UNPAID                       
MEDBYPTG DS    F                   GROSS PAID TODAY                             
MEDBYPTN DS    F                   NET PAID TODAY                               
MEDBYBTG DS    F                   GROSS BILLED TODAY                           
MEDBYBTN DS    F                   NET BILLED TODAY                             
MEDBYPSP DS    F                   PAID SPOT COUNT                              
MEDBYBSP DS    F                   BILLED SPOT COUNT                            
MEDBYNPY DS    F                   NET PAID                                     
MEDBYNUP DS    F                   NET UNPAID                                   
MEDBYTAX DS    F                   BUY TAX AMOUNT                               
MEDBYTXP DS    F                   PAID TAX AMOUNT                              
MEDBYTXU DS    F                   UNPAID TAX AMOUNT                            
<PA>                                                                            
         TITLE 'SSPEC - PRINT SPEC MACRO FOR SPONSOR'                           
                                                                                
(NAME)   SSPEC LINE,COLUMN,KEYWORD  OR                                          
(NAME)   SSPEC LINE,COLUMN,LITERAL                                              
                                                                                
                                                                                
LINE           H1 TO H12, M1, M2, F1, F2                                        
COLUMN         1-132                                                            
LITERAL        C'...'  OR CLN'...' OR NC'.'                                     
               QUOTES AND AMPERSANDS S/B PAIRED.                                
                                                                                
                                                                                
                                                                                
KEYWORD        NUMBER         EXPANSION                                         
_------        ------         ---------                                         
                                                                                
SPACES           00           SPACES                                            
RUN              01           RUN ON MMMDD/YY AT HH.MM                          
REPORT           02           SPNN ON MMMDD/YY-HH.MM                            
PAGE             03           PAGE N(NNN)                                       
PERIOD           04           FROM MMMDD/YY TO MMMDD/YY (*)                     
REQUESTOR        05           REQUESTOR XXXXXXXXXXXX                            
MEDIA            06           XXXXXXXXXX                                        
AGYNAME          07           X(33)                                             
AGYADD           08           X(33)                                             
CLIENT           09           CLIENT   CC X(24)                                 
CLINAME          10           X(24)                                             
PRDGRP           11           BREAK XNNN LEV1NAME LEV2NAME...                   
PRODUCT          12           PRODUCT  PP X(24)                                 
PRONAME          13           X(24)                                             
                 14                                                             
ESTIMATE         15           ESTIMATE NNN X(24)     OR                         
                              ESTIMATE GROUP NNN-NNN OR                         
                              ALL ESTIMATES                                     
ESTNAME          16           X(24)                                             
ESTNUM           17           NNN OR NNN-NNN OR ALL                             
MARKET           18           MARKET NNNN X(24)                                 
STATION          19           STATION XXXX-XX                                   
MKTGRP           20           BREAK XNNNN LEV1NAME LEV2NAME ...                 
DAYPART          21           ALL DAYPARTS (N)                                  
RATING           22           RATING SOURCE - XXX                               
BOOK             23           PURCHASED ON MMM/YY BOOK (BUY ADJ) OR             
                              ACHIEVED ON MMM/YY BOOK (BUY ADJ)                 
                              * 'ACHIEVED' BASED ON AFFIDAVIT *  (ON NEXT LINE) 
EQUIV            24           EQUIVALENCE BASE = NN SEC. (+)                    
REQDETS          39           (REQUEST DETAILS AAA=XXX BBB=YYY...)              
                                                                                
<PA>                                                                            
         TITLE 'SPONSOR MODE SETTINGS'                                          
*              EQUATED VALUES FOR MODE SETTINGS                                 
                                                                                
                                                                                
RUNFRST  EQU   10                  FIRST TIME CONTROL BREAKS                    
REQFRST  EQU   15                                                               
CLTFRST  EQU   20                                                               
PGR1FRST EQU   25                                                               
PGR2FRST EQU   30                                                               
PGR3FRST EQU   35                                                               
PRDFRST  EQU   40                                                               
ESTFRST  EQU   45                                                               
MGR1FRST EQU   50                                                               
MGR2FRST EQU   55                                                               
MGR3FRST EQU   60                                                               
MKTFRST  EQU   65                                                               
STAFRST  EQU   70                                                               
*                                                                               
PROCBUY  EQU   80                  PROCESS RECORD                               
PROCGOAL EQU   81                                                               
PROCBILL EQU   82                                                               
PROCEST  EQU   83                                                               
PROCREC  EQU   84                                                               
REREAD   EQU   90                                                               
*                                                                               
STALAST  EQU   100                 LAST TIME CONTROL BREAKS                     
MKTLAST  EQU   105                                                              
MGR3LAST EQU   110                                                              
MGR2LAST EQU   115                                                              
MGR1LAST EQU   120                                                              
ESTLAST  EQU   125                                                              
PRDLAST  EQU   130                                                              
PGR3LAST EQU   135                                                              
PGR2LAST EQU   140                                                              
PGR1LAST EQU   145                                                              
CLTLAST  EQU   150                                                              
REQLAST  EQU   155                                                              
RUNLAST  EQU   160                                                              
*                                                                               
DISKERR  EQU   253                 DISK ERROR HAS OCCURRED                      
GOTONXTR EQU   254                 GO ONTO NEXT REQUEST                         
<PA>                                                                            
         TITLE 'REPORT DEFINITION TABLE'                                        
                                                                                
EACH DATA ITEM HANDLED BY BUFFALO WILL HAVE THE REPORT NUMBER AS THE LAST       
BYTE OF THE KEY.  THIS NUMBER WILL DICTATE WHICH SET OF TABLES TO USE.          
A SET OF TABLES CAN BE SUSPENDED BY TURNING ON THE X'80' BIT OF THE FIRST BYTE. 
                                                                                
SPNN04   CSECT                                                                  
         USING *,11                (MEXT & MEDIT NEED ADDRESSABILITY)           
                                                                                
                                                                                
REPDEF   DC    A(ROWDEF1)                                                       
         DC    A(ROWDEF2)                                                       
         ...                                                                    
         DC    A(ROWDEFN)                                                       
         DC    X'FF'                                                            
                                                                                
                                                                                
                                                                                
         TITLE 'ROW DEFINITION TABLES'                                          
                                                                                
THESE DESCRIBE WHICH PRINT & COLUMN DEFINITION TABLES TO USE FOR THIS REPORT    
AND THE FIELDS THAT CONSTITUTE THE KEYS.                                        
                                                                                
ROWDEF1  DC    A(PRNTDEF1)                                                      
         DC    A(COLDEF1)                                                       
         DC    AL1(L)              LINES TO SKIP                                
         DC    7X'00'              SPARE                                        
                                                                                
         DS    0CL8                KEY FIELD 1                                  
         DC    AL1(L)              L'DATA TO BE EXTRACTED                       
         DC    AL3                 A(DATA TO BE EXTRACTED)                      
         DC    X'00'               STATUS (X'80'=SUSPENDED)                     
         DC    AL3                 A(WHERE DATA S/B PLACED)                     
                                                                                
         DC    CL8                 KEY FIELD 2                                  
         ...                                                                    
         DS    CL8                 KEY FIELD N                                  
         DC    X'FF'                                                            
<PA>                                                                            
         TITLE 'PRINT DEFINITION TABLES'                                        
                                                                                
THESE DESCRIBE THE FORMAT OF OUTPUT LINES FOR A PARTICULAR REPORT(S).           
TABLES INDICATE WHICH COLUMNS CONTAIN THE DATA, THE OUTPUT CHUNK TYPE           
AND THE DISPLACEMENT INTO PRINT LINE.                                           
                                                                                
PRNTDEF1 DS    0CL8                DESCRIPTION OF CHUNK1                        
         DC    AL1(DT)             DATA TYPE NUMBER (SEE SECTION BELOW)         
         DC    5X'00'              LIST OF COLUMNS ASSOCIATED WITH ABOVE.       
         DC    AL1(D)              DISPLACEMENT OF CHUNK INTO PRINT LINE.       
         DC    X'00'               STATUS (X'80'"SUSPENDED)                     
                                                                                
         DS    CL8                 DESCRIPTION OF CHUNK2                        
                                                                                
         DC    AL1(16)             DESCRIPTION OF LITERAL CHUNK                 
         DC    AL1(L'LITERAL)                                                   
         DC    AL2(A'LITERAL)                                                   
         DS    CL4                                                              
                                                                                
         ...                                                                    
         DS    CL8                 DESCRIPTION OF CHUNKN                        
         DC    X'FF'                                                            
                                                                                
                                                                                
                                                                                
         TITLE 'COLUMN DEFINITION TABLES'                                       
                                                                                
COLDEF1  DS    0CL8                DESCRIPTION OF COLUMN 1                      
         DC    AL1(L)              L'DATA TO BE EXTRACTED (USUALLY 4)           
         DC    AL3                 A(DATA TO BE EXTRACTED)                      
         DC    X'00'               STATUS (X'80'=SUSPENDED)                     
         DC    AL3                 A(WHERE DATA S/B PLACED)                     
                                                                                
         DS    CL8                 COLUMN FIELD 2                               
         ...                                                                    
         DS    CL8                 COLUMN FIELD N                               
         DC    X'FF'                                                            
