Document describing =SCRIPT Service request.                                    
--------------------------------------------                                    
By JOMUDDLO 06/02/97.              See PAN.SYSTEMS.LIBRARY(DCSRSCP)             
---------------------              ------------------------------               
                                                                                
Introduction                                                                    
------------                                                                    
   The service request =SCRIPT allows online testing of FACPAK scripts          
from a mainframe terminal independently of a PC or other partner                
application. A Script process generally consists of a compiled                  
script program, an Input data area and an Output data area.                     
Each of these can be defined either directly by entering data on                
the =SCRIPT screen or indirectly by reference.                                  
=SCRIPT software is contained in SRSCP00 and SRSCPFF, (T11D00/T11DFF.)          
The following sections describe by example how =SCRIPT may be used.             
                                                                                
                                                                                
1) Single Worker file script execution.                                         
                                                                                
This is the typical scenario when running scripts from PC applications          
which may communicate through CM/2 to the MAD program in FACPAK.                
In this case a Worker file is created containing:                               
   a) Control information required to run the script, including the             
      the script 'name'.                                                        
   b) Records of Input data BEFORE execution of script.                         
   c) Records of Output data AFTER execution of script.                         
I.e. script process both reads from and writes to the worker file.              
                                                                                
Given that an example Worker file has been created by running                   
the PC application process once, then =SCRIPT can be run from the               
mainframe repeatedly, reading and writing to that worker file.                  
A worker file name is defined by Userid and a number.                           
                                                                                
To run =SCRIPT against a given worker file:                                     
   a) Enter 'S=NNNNN' in parameter 2 of =SCRIPT screen, (named                  
      'Input file',) where 'NNNNN' is the worker file number.                   
      In this case Userid defaults to either:                                   
      Connected Userid or DDS1 in UK or THCH1 in NY.                            
   b) Or, to overide Userid enter 'U=UUUUUUUU' in parameter 4                   
      of =SCRIPT screen, (named 'Options',) where 'UUUUUUUU'                    
      is Userid name.                                                           
                                                                                
There is NO need to specify Script name as this should be contained             
in the Worker file header control fields.                                       
                                                                                
      EJECT                                                                     
E.g. to run Worker file 'PFCDDSA,12' Enter screen like:                         
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ID/0001 Enter data                                         =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
If this works then any output results of the process should be                  
written to the given worker file and you should see screen like:                
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  IT WORKED..                                                =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
      EJECT                                                                     
                                                                                
If this fails, because the worker file name is invalid, e.g.                    
because no such Userid/number combination exists of the given FACPAK            
worker files, then you should see a screen like:                                
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0003 Invalid Worker File Name                           =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
      EJECT                                                                     
                                                                                
If the worker file exists but there is some error in the script                 
execution process you may see screens with run time error messages.             
An error report may appear in the area of the screen entitled                   
'Script text'.                                                                  
In the case below a script run time error '9163' has occurred at                
offset into the compiled script of 0045.                                        
(Note the error code has 9000 added to it when passed back to calling           
application, e.g. MAD interface to indicate run time error. In this             
case the script error equate number as defined in FACSRIPTQ is 0163.)           
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0005 SCRIPT ERROR NUMBER 9163 + 0045                    =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  SCRIPT RUN TIME ERROR - CHECK FASCRIPTQ EQUATE: 0163  OFFSET: 0045            
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
In the case below a script run time error '9000' has                            
ocurred at offset into the compiled script of 0040.                             
This indicates that a script ABEND command has been issued at                   
offset 0040 into script code. This is confirmed by the error                    
report in the area of the screen entitled 'Script text'.                        
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0005 SCRIPT ERROR NUMBER 9000 + 0040                    =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  CHECK SCRIPT ABEND                                                            
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
In the case below a script run time error '0001' has occurred.                  
This indicates that the script name derived from the worker file                
is invalid, or there is some problem in compilation. This is confirmed          
by the error report in the area of the screen entitled 'Script text'.           
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0005 SCRIPT ERROR NUMBER 0001 + 0000                    =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  CHECK SCRIPT NAME OR COMPILATION ERROR                                        
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
In the case below a script run time compile error '0021' has                    
occurred at offset into the compiled script of 0028.                            
This indicates that a script compile error has been detected by                 
FASCRUNCH BEFORE script execution has occurred. This is confirmed               
by the error report in the area of the screen entitled 'Script text'.           
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0005 SCRIPT ERROR NUMBER 0021 + 0028                    =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  CHECK SCRIPT COMPILATION ERROR                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
In the case below a script run time error '1042' has                            
occurred at offset into the compiled script of 0032.                            
This indicates that a FACPAK system program Connect error                       
has occurred durring script execution. In this case this is because             
the FACPAK system is not operational, (may be stopped.) The error code          
is 1000+NNN where NNN is the internal facpak system file number.                
In this case system with number 32 or X'2A' is not started as indicated         
by the error report in the area of the screen entitled 'Script text'.           
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0005 SCRIPT ERROR NUMBER 1042 + 0032                    =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  SCRIPT FACPAK SYSTEM NOT OPERATIONAL SE#(2A)                                  
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
In the case below a script run time error '1300' has                            
occurred at offset into the compiled script of 0032.                            
This indicates that a FACPAK system program Connect error                       
has occurred durring script execution. This may be due to invalid               
connect screen field values for the FACPAK Userid, System, Program              
or Password.                                                                    
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ED/0005 SCRIPT ERROR NUMBER 1300 + 0032                    =SCRIPT            
                                                                                
                    S=12                                U=PFCDDSA               
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  SCRIPT FACPAK PROGRAM CONNECT ERROR                                           
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  WORKER FILE:PFCDDSA   ,MADWKT,00012                                           
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
      EJECT                                                                     
                                                                                
2) Direct script execution.                                                     
                                                                                
This is for testing prototype scripts before the PC or other partner            
application has been developed. Also used to test developements to              
FASCRUNCH/Script Book record compiler.                                          
In this case the Script name and Input and Output data areas need               
to be specified explicity.                                                      
                                                                                
The following fields can be entered:                                            
a) In the 'Script name' Field, parameter 1 of =SCRIPT screen:                   
   i) Input the name of a script. This is the 8 character, (or less,)           
   name of the compiled script as defined in the 'BOOK/S' record                
   which is maintained through the CON/NFILE program.                           
   This will cause the script to be executed directly without                   
   displaying the script code on the screen.                                    
   ii) '*' followed by the name of script means display the                     
   the compiled script code onto the screen.                                    
   In this case tha actual script code appears on the screen in the             
   area entitled 'Script text'.                                                 
   Hit enter a second time and the given script will be executed.               
   However this is only valid for 'short' scripts, i.e. scripts                 
   whose compiled code fits onto the 3 lines of screen display                  
   available, entitled 'Script text'. Typically this function                   
   is useful for testing changes to FASCRUNCH etc.                              
   Also in this case the actual displayed script code can be                    
   edited in the screen area entitled 'Script text' and when Enter              
   key is hit again this version of script code can be executed.                
   iii) 'TEXT' or 'DIRECT' means that the script is to be typed                 
   in onto the screen. In this case the raw Script compiled code                
   is entered onto the screen in the area entitled 'Script text'.               
                                                                                
b) In the 'Input file' field, parameter 2 of =SCRIPT screen.                    
   i) TEXT, SCREEN OR DIRECT means that the input                               
   is to come from the screen.                                                  
   In this case each line of input data can be entered by                       
   hand onto the screen in the area entitled 'Input data'.                      
   ii) TEST means that the dummy worker file records,                           
   delimited by a º with eof denoted by a ºº are to be typed                    
   in on the input screen.                                                      
                                                                                
c) In the 'Output file' field, parameter 3 of =SCRIPT screen.                   
   i) No value input means default to screen                                    
   ii) SCREEN, TEXT or DIRECT means output to the screen                        
   In all cases each line of output data is displayed                           
   on the screen in the area entitled 'Output data'.                            
                                                                                
                                                                                
      EJECT                                                                     
E.g. to run Script named JOMUTST1 directly with 1 line of input                 
enter screen like:                                                              
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ID/0001 Enter data                                         =SCRIPT            
                                                                                
  JOMUTST1                                              U=DDS8                  
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  DDS1    DDS                                                                   
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
If that works you may see screen like:                                          
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  IT WORKED..                                                =SCRIPT            
                                                                                
  JOMUTST1                                              U=DDS8                  
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  DDS1    DDS                                                                   
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
  AADMAN                                                                        
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
      EJECT                                                                     
OR to run same Script named JOMUTST1 with screen diaplay, first                 
enter screen like:                                                              
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ID/0001 Enter data                                         =SCRIPT            
                                                                                
  *JOMUTST1                                              U=DDS8                 
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
If that works you may see screen like:                                          
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ID/0002 Script Displayed - Enter Data                      =SCRIPT            
                                                                                
  **JOMUTST1                                              U=DDS8                
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  IA04JOMUUI08SS03CONPS03GENWI08CT+SFUNUES02IDNUES04LIST00FUNUES02IDNUES        
  04LIST00LP0216MO06-S**                                                        
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
Then enter input data if any and hit enter to excute script,                    
with screen like:                                                               
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  ID/0002 Script Displayed - Enter Data                      =SCRIPT            
                                                                                
  **JOMUTST1                                              U=DDS8                
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  IA04JOMUUI08SS03CONPS03GENWI08CT+SFUNUES02IDNUES04LIST00FUNUES02IDNUES        
  04LIST00LP0216MO06-S**                                                        
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  DDS1    DDS                                                                   
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
                                                                                
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
If that works you may see screen like:                                          
                                                                                
  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>         
  IT WORKED..                                                =SCRIPT            
                                                                                
  **JOMUTST1                                                                    
  Script name       Input file       Output file        Options                 
                                                                                
  -----------------------Script text-----------------------------------         
  IA04JOMUUI08SS03CONPS03GENWI08CT+SFUNUES02IDNUES04LIST00FUNUES02IDNUES        
  04LIST00LP0216MO06-S**                                                        
                                                                                
                                                                                
  -----------------------Input data------------------------------------         
  DDS1    DDS                                                                   
                                                                                
                                                                                
                                                                                
  -----------------------Output data-----------------------------------         
  AADMAN                                                                        
                                                                                
                                                                                
                                                                                
  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<         
                                                                                
                                                                                
      EJECT                                                                     
3) Cross reference                                                              
                                                                                
a) PAN library document DCSCT for desription of sxript run time                 
trace facilty and ervoice request =SCT                                          
                                                                                
b) PAN library document DCSCTST for description of script testing               
facilties using service request =TEST.                                          
                                                                                
c) Facpak online program CON/NFILE for maintanenace of Script                   
source book records (Type 'S' BOOK records.)                                    
                                                                                
d) PAN library documant DCSCRIPT for original introduction to                   
concepts of FACPAK scripting facilities.                                        
                                                                                
e) See RMORDDLO for offline copy of document which describes the                
LU2/MAD script interface. 'Script programming with =MAD'.                       
                                                                                
f) Script Commands defined by FASCRIPTQ                                         
       ++INCLUDE FASCRIPTQ                                                      
                                                                                
