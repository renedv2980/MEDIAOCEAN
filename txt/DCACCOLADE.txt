         TITLE 'ACCOLADE - OPERATIONS AND TECHNICAL GUIDE'                      
ACCOLADE - CONTROL CARDS                                                        
*-----------------------                                                        
<X>ACCOLADE - CONTROL CARDS                                                     
         SPACE 2                                                                
MODE=COPY           INDICATES THAT DATA IS TO BE COPIED FROM ONE STORAGE MEDIUM 
                    TO ANOTHER. BOTH INPUT AND OUTPUT CONTROL CARDS MUST BE     
                    SPECIFIED WITH THIS OPTION.                                 
         SPACE 1                                                                
MODE=REPORT         INDICATES THAT DATA IS TO BE READ FROM A STORAGE DEVICE.    
                    THIS OPTION IS USEFULL FOR RUNNING REPORT-TYPE OPERATIONS   
                    (I.E. TESTING EXTERNALS, DITTOING RECORDS ETC.). AN INPUT   
                    CONTROL CARD MUST BE SPECIFIED WITH THIS OPTION.            
         SPACE 1                                                                
INPUT=DISK          SPECIFIES THE INPUT STORAGE MEDIUM AS DISK. INPUT=DISK IS   
                    INVALID IF OUTPUT=DISK.                                     
         SPACE 1                                                                
INPUT=TAPE(,NNN)    SPECIFIES THE INPUT STORAGE MEDIUM AS TAPE AND OPTIONALLY   
                    DEFINES THE LOGICAL SYSNO OF THE DEVICE WHERE NNN IS A      
                    NUMBER BETWEEN 001 AND 255. IF NNN IS NOT SPECIFIED A DEF-  
                    AULT OF 010 IS ASSUMED. (NNN IS PATCHED INTO DTF+7).        
         SPACE 1                                                                
GENUP=YES           THIS OPTION WILL INSPECT THE FIRST RECORD READ FROM THE     
                    INPUT FILE. IF THIS RECORD IS A HEADER RECORD (X'00....01') 
                    THE FILE CONTROL ELEMENT WILL BE UPDATED WITH TODAY'S DATE  
                    AND THE GENERATION NUMBER WILL BE INCREMENTED BY 1. IF NOT  
                    AN ERROR MESSAGE AND DUMP WILL RESULT.                      
         SPACE 1                                                                
OVERRIDE=YES        WHEN COPYING A FILE FROM TAPE TO DISK, THE HEADER RECORD OF 
                    THE DISK FILE IS READ. IF THE GENERATION NUMBER OF THE INPUT
                    FILE IS NOT GREATER THAN THAT OF THE OUTPUT FILE AN ERROR   
                    MESSAGE WILL BE ISSUED AND THE RUN WILL CANCEL. THIS OPTION 
                    INHIBITS THE ABOVE CHECKING FEATURE.                        
         SPACE 1                                                                
REPORT=YES          USE THIS OPTION IF THE DAILY TRIAL BALANCE REPORT IS REQU-  
                    IRED.                                                       
         SPACE 1                                                                
DELETE=YES          THIS OPTION WILL PERFORM THE FOLLOWING FILE TIDY-UP FUNC-   
                    TIONS:-                                                     
         SPACE 1                                                                
                    A) DELETE BATCH RECORDS.                                    
         SPACE 1                                                                
                    B) DELETE UNKNOWN RECORDS (THESE WILL BE PRINTED IN DITTO   
                       FORMAT).                                                 
         SPACE 1                                                                
                    C) DELETE ANY RECORD THAT HAVE THE X'80' BIT ON IN THE      
                       RECORD STATUS FIELD.                                     
         SPACE 1                                                                
                    D) DELETE ANY HISTORY AND TRANSACTION RECORDS THAT WERE     
                       LOGICALLY ATTACHED TO AN ACCOUNT RECORD THAT WAS DELETED.
         SPACE 1                                                                
                    E) DELETE ANY TRANSACTIONS THAT HAVE THE X'08' BIT ON IN THE
                       TRNSSTAT FIELD OF THE TRANSD ELEMENT.                    
         SPACE 1                                                                
                    F) UPDATE THE TRANSACTION STATUS BITS FOR BILLING AND TURN- 
                       OFF THE NEW-POSTING TODAY BIT.                           
         SPACE 1                                                                
                    G) RESET BILL NUMBER IN THE MEDIA CATEGORY ELEMENT.         
         SPACE 1                                                                
                    H) RESET NUMBERS IN THE NUMBER ELEMENT.                     
         SPACE 1                                                                
                    I) DELETE USED HOLD CHEQUE ELEMENTS.                        
         SPACE 1                                                                
                    J) MARK FOR DELETION, OR DELETE IF MARKED ARTIST FEE ELE-   
                       MENTS.                                                   
         SPACE 1                                                                
LOAD='PHASE'        WHEN THIS CONTROL CARD IS ENCOUNTERED, THE CORE-IMAGE-      
                    LIBRARY PROGRAM (SPECIFIED BY PHASE) WILL BE LOADED IN AT   
                    THE END OF THE PARTITION IN WHICH ACCOLADE IS RUNNING.      
                    CONTROL WILL BE PASSED TO THIS PHASE AFTER EACH RECORD THAT 
                    IS READ FROM THE INPUT DEVICE.                              
         SPACE 1                                                                
COUNT=YES           THIS WILL PRODUCE A REPORT WHICH CATEGORIZES RECORDS BY     
                    STATUS, TYPE AND COMPANY.                                   
         SPACE 1                                                                
FILE='FINAME'       THIS WILL PATCH THE ACCOUNT FILE DTF (DTF+22) WITH THE NAME 
                    SPECIFIED BY FINAME. THIS ENABLES LOADING AND TESTING OF    
                    DUMMY FILES.                                                
         SPACE 1                                                                
RECCHECK=YES        WILL CHECK THE PHYSICAL CONSISTANCY OF ALL RECORDS IN THE   
                    FOLLOWING WAYS:-                                            
         SPACE 1                                                                
                    A) CHECK THAT THE RECORD IS NOT LONGER THAN 1000 BYTES AND  
                       NOT SHORTER THAN 49 BYTES LONG.                          
         SPACE 1                                                                
                    B) CHECKS THAT THERE ARE NO ELEMENTS OF ZERO LENGTH.        
         SPACE 1                                                                
                    C) CHECKS THAT THERE ARE NO LINKAGE ERRORS BETWEEN ELEMENTS.
                       (I.E. AN ELEMENT LINKS OUTSIDE THE SCOPE OF THE RECORD). 
         SPACE 1                                                                
                    IF ANY OF THE ABOVE CONDITIONS ARE TRUE, THE RECORD IS      
                    PRINTED OUT IN DITTO FORMAT AND THE NEXT RECORD IS READ FROM
                    THE INPUT DEVICE, THEREBY DELETING THE BAD RECORD.          
         SPACE 1                                                                
BALCHECK=YES        WILL PRODUCE A BALANCE CHECK REPORT AT THE END OF THE RUN   
                    SHOWING ACCOUNTS WHOSE BALANCE ELEMENT DISAGREES WITH THE   
                    TOTAL TRANSACTIONS FOR THAT ACCOUNT. IT WILL ALSO SHOW ANY  
                    TRANSACTIONS WHICH ARE OUT OF SEQUENCE (I.E. TRANSACTIONS   
                    NOT LOGICALLY CONECTED TO AN ACCOUNT RECORD).               
         SPACE 1                                                                
BALCHECK=CUL        WILL PRODUCE A BALANCE CHECK REPORT FOR A GIVEN COMPANY/    
                    UNIT/LEDGER SHOWING BALANCE DR & CR VS TRANSACTION DR & CR  
                    FOR EVERY ACCOUNT ON THAT LEDGER. INPUT CAN BE FROM EITHER  
                    TAPE OR DISK. START & END CONTROL CARDS MAY BE USED IF      
                    INPUT=DISK.                                                 
         SPACE 1                                                                
DITTO=YES           WILL PRODUCE A DISPLAY (IN DITTO FORMAT) OF ALL RECORDS READ
                    FROM THE INPUT DEVICE, PRECEEDED BY IT'S NAME AND LOGICAL   
                    NUMBER. THIS OPTION MAY BE USED WHEN REPORT=YES, HOWEVER    
                    OUTPUT WOULD BE MIXED. FOR SELECTIVE DISPLAYING USE START   
                    AND END CONTROL CARDS.                                      
         SPACE 1                                                                
START=KEYEXP        WHEN INPUT=DISK, WILL START READING THE INPUT FILE FROM THE 
                    KEY SPECIFIED BY KEYEXP.(THIS DOES NOT HAVE TO BE A VALID   
                    ACCOUNT FILE RECORD). KEYEXP IS IN DECODE FORMAT (SEE       
                    DDMANUAL 'DECODE') AND IS THE SAME KEY DECODER USED IN PFM. 
                    IF START=KEYEXP IS NOT SPECIFIED A LOW-KEY VALUE OF X'00.01'
                    IS ASSUMED.                                                 
         SPACE 1                                                                
END=KEYEXP          AS ABOVE SPECIFYING AN END KEY. WHEN A RECORD IS READ FROM  
                    THE INPUT DEVICE WHOSE KEY IS GREATER THAN THAT OF THE END  
                    KEY, A BRANCH IS MADE TO THE END-OF-FILE ROUTINES. IF END=  
                    KEYEXP IS NOT SPECIFIED A HIGH-KEY VALUE OF X'FF.FF' IS     
                    ASSUMED.                                                    
         SPACE 1                                                                
OUTPUT=DISK         WHEN MODE=COPY INDICATES THAT A FILE IS TO BE LOADED TO     
                    DISK. THE GENERATION NUMBER OF THE INPUT FILE MUST BE       
                    GREATER THAN THAT OF THE OUTPUT FILE (SEE OVERRIDE=YES).    
                    BOTH HEADER AND TRAILER RECORDS MUST BE PRESENT ON THE INPUT
                    FILE. INPUT RECORDS ARE SEQUENCE-CHECKED BEFORE WRITING.    
                    OUTPUT=DISK IS INVALID IF INPUT=DISK.                       
         SPACE 1                                                                
OUTPUT=TAPE(,NNN)   SPECIFIES THE OUTPUT STORAGE MEDIUM AS TAPE AND OPTIONALLY  
                    DEFINES THE LOGICAL SYSNO OF THE DEVICE WHERE NNN IS A      
                    NUMBER BETWEEN 001 AND 255. IF NNN IS NOT SPECIFIED A DEF-  
                    AULT OF 011 IS ASSUMED. (NNN IS PATCHED INTO DTF+7). NO     
                    SEQUENCE CHECKING IS PERFORMED, AND HEADER/TRAILER RECORDS  
                    DO NOT HAVE TO BE PRESENT.                                  
         SPACE 1                                                                
CONTROL=NNNN        OPTIONAL CONTROL ID NUMBER FOR PRINTING OF START/END CONTROL
                    LOGOS WHERE NNNN IS THE DDS ID NUMBER ON THE CONTROL FILE.  
                    IF THIS CARD IS OMITTED THE CONTROL ID NUMBER WILL DEFAULT  
                    TO 0005.                                                    
         SPACE 1                                                                
LOGO=YES            WILL PRODUCE REPORT DIVIDERS WHEN REPORT=YES IS SPECIFIED.  
         SPACE 1                                                                
SEQERR=IGNORE       WHEN LOADING A FILE TO DISK WILL PRINT AND DELETE DUPLICATE 
                    OR OUT-OF-SEQUENCE RECORDS.                                 
         EJECT                                                                  
ACCOLADE - PROCESSING SEQUENCE                                                  
*-----------------------------                                                  
<X>ACCOLADE - PROCESSING SEQUENCE                                               
         SPACE 2                                                                
    ACCOLADE IS SPLIT INTO FIVE SEPARATE GROUPS OF FUNCTIONS. THESE ARE AS FOLL-
OWS:-                                                                           
         SPACE 1                                                                
INITIALIZATION - VALIDATE CONTROL CARDS AND BUILD HOOK LISTS.                   
FIRST TIME     - OPENING FILES, CLEARING ACCUMS ETC.                            
PROCESS        - FOR EVERY RECORD READ.                                         
LAST TIME      - CLOSING FILES. PRINTING ACCUMS ETC.                            
GENERAL        - GENERAL ROUTINES.                                              
         SPACE 1                                                                
    IN THE FOLLOWING LISTS AN 'O' BESIDE A SEQUENCE NUMBER INDICATES A BRANCH-  
AND-LINK TO A SUB-ROUTINE THAT IS GENERATED AS THE RESULT OF A CONTROL CARD. AN 
'A' BESIDE A SEQUENCE NUMBER INDICATES A SUB-ROUTINE WHICH IS ALWAYS EXECUTED.  
         SPACE 2                                                                
INITIALIZATION ROUTINES                                                         
*----------------------                                                         
         SPACE 1                                                                
1A  READ CONTROL CARDS AND VALIDATE. SET HOOK SWITCHES.                         
         SPACE 1                                                                
2A  SEE IF CONTROL OPTIONS ARE COMPATIBLE. CANCEL IF NOT.                       
         SPACE 1                                                                
3A  BUILD CODE HOOK LIST FROM CONTROL CARD OPTIONS (HOOK SWITCHES).             
         SPACE 1                                                                
4A  SET STXIT PC ROUTINE.                                                       
         SPACE 1                                                                
5A  GO TO FIRST TIME ROUTINES.                                                  
         SPACE 2                                                                
FIRST TIME ROUTINES                                                             
*------------------                                                             
         SPACE 1                                                                
1A  OPEN INPUT FILE AND READ FIRST RECORD. (TINFRST/DINFRST)                    
         SPACE 1                                                                
2A  EXTRACT RECORD TYPE. (RECTYPE)                                              
         SPACE 1                                                                
3A  CHECK HEADER RECORD AND UPDATE GENERATION RECORD IF REQUIRED. (GENCHCK)     
         SPACE 1                                                                
4O  GO TO DAILY-TRIAL-BALANCE FIRST TIME ROUTINE. (REPFRST)                     
         SPACE 1                                                                
5O  GO TO BALANCE CHECKING FIRST TIME ROUTINE. (BALFRST)                        
         SPACE 1                                                                
6O  GO TO DITTO FIRST TIME ROUTINE. (DITFRST)                                   
         SPACE 1                                                                
7O  OPEN OUTPUT FILE AND IF DISK CHECK OUTPUT GENERATION NUMBER. (DOUFRST/      
    TOUFRST)                                                                    
         SPACE 1                                                                
8A  GO TO PROCESSING ROUTINES IGNORING READ. (PROCESS+4)                        
         EJECT                                                                  
PROCESSING ROUTINES                                                             
*------------------                                                             
         SPACE 1                                                                
1A  READ A RECORD FROM INPUT FILE. (DINPROC/TINPROC)                            
         SPACE 1                                                                
2A  EXTRACT RECORD TYPE. (RECTYPE)                                              
         SPACE 1                                                                
3O  SEE IF RECORD IS PHYSICALLY CONSISTENT. (RECPROC)                           
         SPACE 1                                                                
4O  GO TO DAILY-TRIAL-BALANCE PROCESSING ROUTINES. (REPPROC)                    
         SPACE 1                                                                
5O  GO TO DELETE ROUTINES. (DELPROC)                                            
         SPACE 1                                                                
6O  GO TO BALANCE CHECKING PROCESSING ROUTINES. (BALPROC)                       
         SPACE 1                                                                
7O  PASS RECORD TO EXTERNAL PHASE. (PHASE)                                      
         SPACE 1                                                                
8O  GO TO LOGICAL COUNTING ROUTINES. (CNTRPOC)                                  
         SPACE 1                                                                
9O  WRITE RECORD TO OUTPUT FILE. (IF DISK CHECK SEQUENCE). (TOUPROC/DOUPROC)    
         SPACE 1                                                                
10A GO TO PROCESSING ROUTINES. (PROCESS)                                        
         SPACE 2                                                                
LAST TIME ROUTINES                                                              
*-----------------                                                              
         SPACE 1                                                                
1A  CLOSE INPUT FILE. SEE IF EOV OR EOF. IF EOV RE-OPEN FILE AND GO TO PROCESS- 
    ING ROUTINES. (TINLAST)                                                     
         SPACE 1                                                                
2O  GO TO DAILY-TRIAL-BALANCE LAST TIME ROUTINES. (REPLAST)                     
         SPACE 1                                                                
3O  GO TO BALANCE CHECKING LAST TIME ROUTINES AND PRINT CHECK REPORT. (BALLAST) 
         SPACE 1                                                                
4O  GO TO EXTERNAL PHASE WITH OVSWITCH=X'FF' FOR LAST TIME ACTIONS. (PHASE)     
         SPACE 1                                                                
5O  GO TO LOGICAL COUNTING LAST TIME ROUTINES AND PRINT COUNT REPORT. (CNTLAST) 
         SPACE 1                                                                
6O  CLOSE OUTPUT FILE (IF TAPE). CHECK THAT TRAILER RECORD X'FF.FF' WAS LOADED  
    AND PRINT SIZE INFO (IF DISK). (TOULAST/DOULAST)                            
         SPACE 1                                                                
7A  PRINT PHYSICAL RECORD TOTALS. DO END LOGO FOR CONTROL (IF REPORT=YES). ISSUE
    WARNING MESSAGE IF BAD RECORDS FOUND ON INPUT. (RECTOTS)                    
         SPACE 1                                                                
8A  END-OF-JOB                                                                  
         EJECT                                                                  
ACCOLADE - JCL AND I/O REQUIREMENTS                                             
*----------------------------------                                             
<X>ACCOLADE - JCL AND I/O REQUIREMENTS                                          
         SPACE 2                                                                
DTF NAME  DEVICE  USAGE                         JCL REQUIRED                    
*-------  & TYPE  -----                         ------------                    
         SPACE 2                                                                
TINT      TAPE    USED WHEN INPUT=TAPE(,NNN)    ASSGN CARD FOR SYSXXX WHERE     
          INPUT   CONTROL CARD IS SPECIFIED.    XXX=NNN ON CONTROL CARD. NNN    
                                                CAN BE OMITTED IF XXX=010.      
         SPACE 2                                                                
TOUT      TAPE    USED WHEN OUTPUT=TAPE(,NNN)   ASSGN CARD FOR SYSXXX WHERE     
          OUTPUT  CONTROL CARD IS SPECIFIED.    XXX=NNN ON CONTROL CARD. NNN    
                                                CAN BE OMITTED IF XXX=011.      
         SPACE 2                                                                
SORTIN1   DISK    USED WHEN BALCHECK=YES        DLBL AND EXTENT INFORMATION FOR 
          WORK    CONTROL CARD IS SPECIFIED.    A SEQUENTIAL DISK FILE WITH A   
                  THE BALANCE CHECK REPORT IS   ZERO RETENTION DATE. ANY SYSNO  
                  WRITTEN TO DISK AND READ-     MAY BE ASSIGNED ON THE EXTENT   
                  BACK AT LAST-TIME-HOOK AND    CARD.                           
                  PRINTED.                                                      
         SPACE 2                                                                
ACCOUNT   DISK    USED WHEN INPUT=DISK OR       DLBL AND EXTENT INFORMATION FOR 
   OR     VLIS    OUTPUT=DISK CONTROL CARDS     ACCOUNT OR 'FINAME' (SEE -      
'FINAME'          ARE SPECIFIED.                'ACCOLADE - CONTROL CARDS' -    
                                                FILE='FINAME').                 
         SPACE 2                                                                
SORTWK1   DISK    USED WHEN RECONSTRUCTING      DLBL AND EXTENT INFORMATION FOR 
          SORT    THE ACCOUNT FILE.             SORTWK1 ON SYS001.              
         EJECT                                                                  
ACCOLADE - SAMPLE JOB SET-UPS                                                   
*----------------------------                                                   
<X>ACCOLADE - SAMPLE JOB SET-UPS                                                
         SPACE 2                                                                
    TO PRODUCE A DAILY-TRIAL-BALANCE REPORT FOR COMPANY 0.                      
         SPACE 1                                                                
 // JOB ACTRBL                                                                  
 // EXEC ACCOLADE                                                               
 MODE=REPORT                                                                    
 INPUT=DISK                                                                     
 REPORT=YES                                                                     
 START=(0)                                                                      
 END=(0)FF                                                                      
 /*                                                                             
 /&                                                                             
         SPACE 2                                                                
    TO DITTO ALL ANALYSIS RECORDS TO THE PRINTER.                               
         SPACE 1                                                                
 // JOB ACDITTO                                                                 
 // EXEC ACCOLADE                                                               
 MODE=REPORT                                                                    
 INPUT=DISK                                                                     
 DITTO=YES                                                                      
 START=0A00                                                                     
 END=0AFF                                                                       
 /*                                                                             
 /&                                                                             
         SPACE 2                                                                
    TO COPY ACCOUNT FILE FROM TAPE ON SYS020 TO TAPE ON SYS021 AND PRODUCE A    
DAILY-TRIAL-BALANCE REPORT.                                                     
         SPACE 1                                                                
 // JOB ACCOPY                                                                  
 // ASSGN SYS020,X'280'                                                         
 // ASSGN SYS021,X'281'                                                         
 // EXEC ACCOLADE                                                               
 MODE=COPY                                                                      
 INPUT=TAPE,020          020 REQUIRED AS IT IS NOT THE DEFAULT                  
 OUTPUT=TAPE,021         021 REQUIRED AS IT IS NOT THE DEFAULT                  
 REPORT =YES                                                                    
 /*                                                                             
 /&                                                                             
         EJECT                                                                  
    TO DUMP ACCOUNT FILE TO TAPE, RUN AN EXTERAL CALLED 'FUDGE', PRODUCE A LOG- 
ICAL COUNT REPORT AND PERFORM BALANCE CHECKING.                                 
         SPACE 1                                                                
 // JOB ACFUDG                                                                  
 // EXEC ACCOLADE                                                               
 MODE=COPY                                                                      
 INPUT=DISK                                                                     
 OUTPUT=TAPE             011 NOT REQUIRED AS IT IS THE DEFAULT                  
 LOAD=FUDGE                                                                     
 COUNT=YES                                                                      
 BALCHECK=YES                                                                   
 /*                                                                             
 /&                                                                             
         SPACE 2                                                                
    SUGGESTED JOB SET-UP FOR DUMPING ACCOUNT FILE TO TAPE.                      
         SPACE 1                                                                
 // JOB ACDUMP                                                                  
 // ASSGN SYS011,X'280'                                                         
 // EXEC ACCOLADE                                                               
 MODE=COPY                                                                      
 INPUT=DISK                                                                     
 OUTPUT=TAPE             011 NOT REQUIRED AS IT IS THE DEFAULT                  
 REPORT=YES                                                                     
 COUNT=YES                                                                      
 /*                                                                             
 /&                                                                             
         SPACE 2                                                                
    SUGGESTED JOB SET-UP FOR LOADING ACCOUNT FILE TO DISK.                      
         SPACE 1                                                                
 // JOB ACLOAD                                                                  
 // ASSGN SYS010,X'280'                                                         
 // EXEC ACCOLADE                                                               
 MODE=COPY                                                                      
 INPUT=TAPE              010 NOT REQUIRED AS IT IS THE DEFAULT                  
 OUTPUT=DISK                                                                    
 GENUP=YES                                                                      
 COUNT=YES               FOR CHECKING AGAINST DUMP COUNTS                       
 BALCHECK=YES                                                                   
 DELETE=YES                                                                     
 REPORT=YES              FOR CHECKING AGAINST DUMP TRIAL-BALANCE                
 /*                                                                             
 /&                                                                             
         EJECT                                                                  
    SAMPLE JOB SET-UP FOR RECONSTRUCTING THE ACCOUNT FILE.                      
         SPACE 1                                                                
 // JOB ACRECON                                                                 
 // ASSGN SYS010,X'280'  INPUT DUMP TAPE                                        
 // ASSGN SYS001,X'281'  INPUT RECOVERY TAPE(S)                                 
 // TLBL RCVTAPE,'RECOVERY TAPE'                                                
 // DLBL SORTWK1,'SORT WORK',0,SD                                               
 // EXTENT SYS001,,,,12,1500                                                    
 // EXEC ACCOLADE                                                               
 MODE=COPY                                                                      
 INPUT=TAPE              010 NOT REQUIRED AS IT IS THE DEFAULT                  
 OUTPUT=DISK                                                                    
 OVERRIDE=YES            OVERRIDE OUTPUT GENERATION NUMBER                      
 LOAD=ACCRECST           RECONSTRUCT PROGRAM                                    
 DELETE=YES                                                                     
 GENUP=YES                                                                      
 COUNT=YES                                                                      
 REPORT=YES                                                                     
 /*                                                                             
 /&                                                                             
         EJECT                                                                  
ACCOLADE - EXTERNAL PHASES                                                      
*-------------------------                                                      
<X>ACCOLADE - EXTERNAL PHASES                                                   
         SPACE 2                                                                
    ACCOLADE EXTERNAL PHASES SHOULD BE WRITTEN AS SELF-RELOCATING PHASES. NO    
WORKING-STORAGE SHOULD BE REQUIRED OTHER THAN THAT SUPPLIED BY ACCOLADE. ON     
ENTERING AN EXTERNAL THE FOLLOWING REGISTERS ARE SET:-                          
         SPACE 1                                                                
R1 AND R6      POINT TO ACCOLADE GLOBAL WORKING-STROAGE. THIS IS COVERED BY THE 
               DSECT ACCWORKD, THE FIRST STATEMENT AFTER AN NMOD1 IN AN EXTERNAL
               SHOULD BE A USING STATEMENT TO COVER THIS DSECT.                 
         SPACE 1                                                                
R8             CONTAINS THE ADDRESS OF THE PRINTER CSECT. THIS IS COVERED BY THE
               DSECT DPRINT.                                                    
         SPACE 2                                                                
    THE FOLLOWING DATA-NAMES CONTAINED IN THE ACCWORKD DSECT WILL BE OF MOST USE
TO ACCOLADE EXTERNAL PROGRAMS.                                                  
         SPACE 1                                                                
RECNAME -CONTAINS THE NAME OF THE CURRENT RECORD (X'20' ELEMENT). FOR RECORDS   
         THAT DO NOT HAVE A NAME ELEMENT THIS FIELD WILL BE BLANK.              
         SPACE 1                                                                
OVSWITCH-PROCESS/LAST TIME INDICATOR.                                           
         SPACE 1                                                                
         X'00'=PROCESS A RECORD.                                                
         X'FF'=LAST TIME.                                                       
         SPACE 1                                                                
         IF A FIRST TIME HOOK IS ALSO REQUIRED, THE EXTERNAL CAN TEST FOR X'00',
         AND IF TRUE PERFORM FIRST TIME LOGIC AND SET OVSWITCH TO X'01'.        
         SPACE 1                                                                
WRITE   -WRITE/DELETE INDICATOR.                                                
         SPACE 1                                                                
         X'00'=WRITE CURRENT RECORD.                                            
         X'FF'=DELETE CURRENT RECORD.                                           
         SPACE 1                                                                
         AS DELETED RECORDS ARE ALWAYS PASSED TO EXTERNALS, THIS SWITCH MAY     
         ALREADY BE SET TO X'FF' ON ENTRY TO AN EXTERNAL. IF DELETED RECORDS ARE
         NOT TO BE PROCESSED A COMPARE AND BRANCH-IF-EQUAL SHOULD BE MADE AT THE
         BEGINNING OF THE EXTERNAL.                                             
         SPACE 1                                                                
INPDEV  -INPUT DEVICE INDICATOR  - X'80'=DISK, X'40'=TAPE.                      
         SPACE 1                                                                
OUTDEV  -OUTPUT DEVICE INDICATOR - X'80'=DISK, X'40'=TAPE, X'00'=NO OUTPUT.     
         SPACE 1                                                                
ABALEL  -CONTAINS THE ADDRESS OF THE RECORD BALANCE ELEMENTS (X'32'). IF THE    
         CURRENT RECORD IS NOT A LOW ACCOUNT THIS FIELD WILL BE BINARY ZEROES.  
         SPACE 1                                                                
AADDEL  -CONTAINS THE ADDRESS OF THE CURRENT RECORD ADDRESS ELEMENT (X'22') OR  
         BINARY ZEROES IF NO ADDRESS ELEMENT IS FOUND.                          
         EJECT                                                                  
         SPACE 1                                                                
PROCREC - SET BY RECTYPE ROUTINE TO ONE OF THE FOLLOWING VALUES:-               
         SPACE 1                                                                
         AL1(00) - UNKNOWN RECORD TYPE.                                         
         AL1(01) - HEADER RECORD.                                               
         AL1(02) - TRAILER RECORD.                                              
         AL1(03) - MEDIA RECORD.                                                
         AL1(04) - ANALYSIS RECORD.                                             
         AL1(05) - BATCH RECORD.                                                
         AL1(06) - COMMENT RECORD.                                              
         AL1(07) - ERROR RECORD.                                                
         AL1(16) - COMPANY RECORD.                                              
         AL1(17) - UNIT RECORD                                                  
         AL1(18) - LEDGER RECORD.                                               
         AL1(19) - HIGH ACCOUNT RECORD (ACCOUNT WITHOUT BALANCE ELEMENT).       
         AL1(20) - LOW ACCOUNT RECORD (ACCOUNT WITH BALANCE RECORD).            
         AL1(21) - HISTORY RECORD.                                              
         AL1(22) - TRANSACTION RECORD.                                          
         SPACE 1                                                                
             A LIST OF RECORD TYPE EQUATES IS GIVEN AT THE END OF ACCWORKD.     
         SPACE 1                                                                
WORKEND -SUPPLIES EXTERNAL PHASES WITH 3000 BYTES OF PERMANENT WORKING-STORAGE. 
         THIS AREA IS NOT USED OR REFERENCED BY ACCOLADE.                       
         SPACE 1                                                                
AIOAREA -CONTAINS THE ADDRESS OF THE CURRENT RECORD THAT IS BEING PROCESSED.    
         THIS ADDRESS-TYPE POINTS TO THE LENGTH OF THE RECORD. THEREFORE THE    
         FOLLOWING CODE SHOULD BE USED:-                                        
         SPACE 1                                                                
         L     R2,AIOAREA                                                       
         LA    R2,4(R2)                                                         
         USING ACKEYD,R2                                                        
         EJECT                                                                  
ACCOLADE - SAMPLE EXTERNAL PROGRAM                                              
*---------------------------------                                              
<X>ACCOLADE - SAMPLE EXTERNAL PROGRAM                                           
         SPACE 2                                                                
    THE FOLLOWING SAMPLE PROGRAM WILL PRINT-OUT THE KEYS OF ALL RECORDS (EXCEPT 
DELETES) IN HEX.                                                                
         SPACE 2                                                                
*PHASE ACCTEST,+0,NOAUTO                                                        
*        PROGRAM TO LIST ACCOUNT FILE KEYS IN HEX FORMAT                        
*                                                                               
ACCTEST  CSECT                                                                  
         NMOD1 0,**ACCTEST                                                      
         USING ACCWORKD,R6         R6=A(GLOBAL W/S)                             
         USING DPRINT,R8           R8=A(PRINT CSECT)                            
         CLI   OVSWITCH,X'FF'      IGNORE LAST TIME HOOK                        
         BE    EXIT                                                             
         CLI   WRITE,X'FF'         IGNORE DELETED RECORDS                       
         BE    EXIT                                                             
*                                                                               
         L     R2,AIOAREA          R2=A(RECORD-4)                               
         GOTO1 VHEXOUT,DMCB,4(R2),P,42,=C'TOG'                                  
         GOTO1 VPRINTER                                                         
*                                                                               
EXIT     XMOD1 1                                                                
*                                                                               
*        INCLUDE ACACCWORKD                                                     
*        INCLUDE DDDPRINT                                                       
         EJECT                                                                  
ACCOLADE - WORKING-STORAGE DSECT                                                
*-------------------------------                                                
<X>ACCOLADE - WORKING-STORAGE DSECT                                             
         SPACE 2                                                                
       ++INCLUDE ACACCWORKD                                                     
         EJECT                                                                  
ACCOLADE - PRINTER MESSAGES                                                     
*--------------------------                                                     
<X>ACCOLADE - PRINTER MESSAGES                                                  
         SPACE 3                                                                
MESSAGE                                  MEANING                                
*------                                  -------                                
         SPACE 2                                                                
CANCELLED DUE TO OPERATOR OPTION         THE CONSOLE OPERATOR REPLIED 'CANCEL'  
                                         TO INVALID CONTROL CARD MESSAGE. (SEE  
                                         'ACCOLADE - CONSOLE MESSAGES').        
         SPACE 2                                                                
MISSING OR INVALID INPUT PARAMETER       THE INPUT=DEV CONTROL CARD WAS EITHER  
                                         INVALID AND IGNORED BY THE CONSOLE     
                                         OPERATOR, OR WAS MISSING FROM THE INPUT
                                         STREAM.                                
         SPACE 2                                                                
MISSING OR INVALID OUTPUT PARAMETER      AS ABOVE FOR OUTPUT=DEV.               
         SPACE 2                                                                
OUTPUT SPECIFIED FOR MODE=REPORT         EITHER MODE CARD HAS BEEN INCORRECTLY  
                                         SPECIFIED, OR OUTPUT=DEV INCLUDED IN   
                                         ERROR.                                 
         SPACE 2                                                                
MISSING OR INVALID MODE PARAMETER        THE MODE=OPTION CARD WAS EITHER INVALID
                                         AND IGNORED BY THE CONSOLE OPERATOR, OR
                                         WAS MISSING FROM THE INPUT STREAM.     
         SPACE 2                                                                
INCOMPATIBLE INPUT/OUTPUT PARAMETER      BOTH INPUT AND OUTPUT DEVICES WERE     
                                         SPECIFIED AS DISK.                     
         SPACE 2                                                                
START=KEY ONLY VALID IF INPUT=DISK       SELF EXPLANATORY.                      
         SPACE 2                                                                
LOAD NOT AUTHORIZED (GENERATION)         AN ATTEMPT WAS MADE TO LOAD A TAPE FILE
                                         TO DISK WHOSE GENERATION NUMBER WAS NOT
                                         GREATER THAN THAT OF THE OUTPUT FILE.  
                                         (SEE 'ACCOLADE - CONTROL CARDS' -      
                                          OVERRIDE=YES).                        
         EJECT                                                                  
ACCOLADE - CONSOLE MESSAGES                                                     
*--------------------------                                                     
<X>ACCOLADE - CONSOLE MESSAGES                                                  
         SPACE 3                                                                
MESSAGE                                  MEANING                                
*------                                  -------                                
         SPACE 2                                                                
XXXXXXXXXXXXXXX                          IS ISSUED WHEN AN UNKNOWN OR INVALID   
INVALID CONTROL CARD                     CONTROL CARD IS ENCOUNTERD IN THE INPUT
PLEASE CORRECT,IGNORE OR CANCEL          STREAM (WHERE XXX IS THE CARD IN ERROR)
                                         THE CONSOLE OPERATOR CAN THEN:-        
         SPACE 1                                                                
                                         1. RE-INPUT THE CORRECT CONTROL CARD   
                                            THROUGH THE CONSOLE                 
         SPACE 1                                                                
                                         2. TYPE 'IGNORE' TO BYPASS THE CONTROL 
                                            CARD.                               
         SPACE 1                                                                
                                         3. TYPE 'CANCEL' TO CANCEL THE RUN.    
         SPACE 2                                                                
EOV/EOF ENQUIRY?                         IS ISSUED TO THE CONSOLE PRINTER-KB    
                                         WHEN AN END-OF-VOLUME CONDITION OCCURS 
                                         ON A TAPE UNIT. TYPE ONE OF THE FOLL-  
                                         OWING:-                                
         SPACE 1                                                                
                                         1. 'EOV' - IF ANOTHER TAPE IS TO BE    
                                            INPUT.                              
         SPACE 1                                                                
                                         2  'EOF' - IF THE TAPE CURRENTLY ON THE
                                            TAPE DRIVE IS THE LAST INPUT VOLUME.
         SPACE 2                                                                
ANY MORE RECOVERY TAPES TO BE MERGED ?   IS ISSUED AT EOF ON A RECOVERY TAPE    
                                         WHEN RECONSTRUCTING THE FILE. TYPE ONE 
                                         OF THE FOLLOWING -                     
         SPACE 1                                                                
                                         1. 'YES' - IF ANOTHER TAPE IS TO BE    
                                            INPUT.                              
         SPACE 1                                                                
                                         2. 'NO'  - IF NO MORE TAPES ARE TO BE  
                                            INPUT.                              
         SPACE 2                                                                
NUMBER OF TRACKS AVAILABLE=NNNN          IS ISSUED AFTER A FILE HAS BEEN LOADED.
                                         WHERE NNNN IS THE NUMBER OF PRIME DATA 
                                         TRACKS AVAILABLE FOR USE.              
         EJECT                                                                  
NUMBER OF INDEX BYTES REQUIRED=NNNN      IS ISSUED AFTER A FILE HAS BEEN LOADED.
                                         WHERE NNNN IS THE NUMBER OF BYTES REQU-
                                         IRED TO HOLD THE ACCOUNT FILE MASTER   
                                         INDEX IN CORE.                         
         SPACE 2                                                                
**ACCOLADE** GENERATION RECORD MISSING   IS ISSUED WHEN THE FILE HEADER RECORD  
                                         IS MISSING FROM A FILE. THE RECORD THAT
                                         WAS READ WILL BE DISPLAYED ON THE      
                                         PRINTER (UNLESS THIS MESSAGE IS FOLL-  
                                         OWED BY 'SEE I/O2 IN DUMP').           
         SPACE 2                                                                
**ACCOLADE** SEE I/O2 IN DUMP            IS ISSUED AFTER THE ABOVE MESSAGE. THIS
                                         INDICATES THAT THE HEADER RECORD OF THE
                                         OUTPUT FILE (WHEN OUTPUT=DISK) WAS     
                                         MISSING OR A DISK ERROR OCCURED. I/O2  
                                         IN THE RESULTANT DUMP WILL SHOW THE    
                                         RECORD THAT WAS READ.                  
         SPACE 2                                                                
**ACCOLADE** TRAILER RECORD MISSING      IS ISSUED IF A FILE TRAILER RECORD WAS 
                                         NOT FOUND (WHEN OUTPUT=DISK) ON THE    
                                         INPUT FILE. THE LAST RECORD READ FROM  
                                         THE INPUT FILE IS DISPLAYED ON THE     
                                         PRINTER.                               
         SPACE 2                                                                
**ACCOLADE** CANCELLED DUE TO I/O ERROR  IS ISSUED AFTER AN **ACCOLADE** ERROR  
                                         MESSAGE IF AN UNRECOVERABLE ERROR IS   
                                         DETECTED, OR IF AN UNRECOVERABLE DISK  
                                         ERROR IS POSTED (SEE IOPARMS IN DUMP). 
         SPACE 2                                                                
**ACCOLADE** WARNING BAD RECORDS FOUND   IS ISSUED AT THE END OF THE RUN IF ANY 
                                         RECOVERABLE ERRORS WERE DETECTED. BAD  
                                         RECORDS ARE PRINTED IN DITTO FORMAT    
                                         WITH AN ERROR MESSAGE WHICH INDICATES  
                                         THE FAULT.                             
         SPACE 2                                                                
**ACCOLADE** RECORD OUT OF SEQUENCE      IS ISSUED AT LOAD TIME WHEN ADDING A   
                                         RECORD WHOSE KEY IS NOT GREATER THAN   
                                         THAT OF THE PREVIOUS RECORD.           
         EJECT                                                                  
         EJECT                                                                  
