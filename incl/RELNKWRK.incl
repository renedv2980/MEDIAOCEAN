*          DATA SET RELNKWRK   AT LEVEL 003 AS OF 05/02/14                      
***********************************************************************         
* Global equates                                                      *         
***********************************************************************         
                                                                                
B#WORKD  EQU   1                   Block number for WORKD                       
B#SAVED  EQU   2                   Block number for SAVED                       
                                                                                
REPSYSQ  EQU   X'08'               Rep system                                   
REPLETQ  EQU   C'R'                Rep letter                                   
SYSPHASE EQU   X'082B'             System phase                                 
                                                                                
***********************************************************************         
* Overlay equates                                                     *         
***********************************************************************         
                                                                                
O#ROU1   EQU   X'01'               Global routines 1 overlay number             
O#ROU2   EQU   X'02'               Global routines 2 overlay number             
                                                                                
O#DLINI  EQU   X'12'               Initial Download                             
O#DLCON  EQU   X'12'               Rep Contract Download                        
O#DLMKG  EQU   X'13'               Rep Makegoods Download                       
O#DLAUD  EQU   X'14'               Rep Audit Download                           
                                                                                
O#UPORD  EQU   X'22'               Rep Update Order request                     
O#UPBUY  EQU   X'22'               Rep Update Buy request                       
O#UPOFR  EQU   X'23'               Rep Update Offer request                     
                                                                                
***********************************************************************         
* Miscellaneous equates                                               *         
***********************************************************************         
                                                                                
FF       EQU   X'FF'                                                            
FE       EQU   X'FE'                                                            
ONEK     EQU   1024                                                             
         EJECT                                                                  
                                                                                
WORKD    DSECT                                                                  
                                                                                
DUB      DS    D                                                                
DUB1     DS    D                                                                
DUB2     DS    D                                                                
FULL1    DS    F                                                                
FULL2    DS    F                                                                
HALF1    DS    H                                                                
HALF2    DS    H                                                                
BYTE1    DS    XL1                                                              
BYTE2    DS    XL1                                                              
BYTE3    DS    XL1                                                              
ELCODE   DS    XL1                                                              
                                                                                
DMCB     DS    6F                                                               
PARM     DS    6F                                                               
                                                                                
BASERD   DS    A                                                                
BASEADDR DS    A                                                                
BASERELO DS    A                                                                
ROU1RELO DS    A                                                                
ROU2RELO DS    A                                                                
OLAYRELO DS    0A                                                               
SRVRRELO DS    A                                                                
         DS    2A                                                               
                                                                                
AFAPARM  DS    A                                                                
ATIOB    DS    A                                                                
ATWA     DS    A                                                                
ATIA     DS    A                                                                
ALP      DS    A                                                                
         DS    2A                                                               
                                                                                
FACLISTS DS    0A                  ** Facilities lists **                       
ACOMFACS DS    A                   A(Common facilitieS list)                    
AREPFACS DS    A                   A(Rep facilities list)                       
         DS    2A                                                               
                                                                                
AIOS     DS    0A                  ** Addresses of I/O areas **                 
AIO1     DS    A                                                                
AIO2     DS    A                                                                
AIO3     DS    A                                                                
AIO4     DS    A                                                                
AIO5     DS    A                                                                
AIO6     DS    A                                                                
AIO7     DS    A                                                                
AIO8     DS    A                                                                
AIOLAST  EQU   *                                                                
                                                                                
AIONM    EQU   (*-AIO1)/L'AIO1                                                  
                                                                                
TODAYB   DS    XL3                 Today's date Binary                          
TODAYC   DS    XL2                 Today's date Compressed                      
TODAYP   DS    PL3                 Today's date PWOS                            
                                                                                
SVALUES  DS    0D                                                               
                                                                                
RELOLST  DS    0A                  ** Relocated address constants **            
VTWABLD  DS    V                   V(TWABLD)                                    
VWRKIO   DS    V                   V(WRKIO)                                     
AFACTAB  DS    A                   A(Facilities table)                          
ACORPHS  DS    A                   A(Core resident phase list)                  
AFILTAB  DS    A                   A(I/O File table)                            
ACMDTAB  DS    A                   A(I/O Command table)                         
VUNBOOK  DS    V                   V(UNBOOK) - Rep format rating books          
RELOLSTN EQU   (*-RELOLST)/L'RELOLST                                            
         DS    4A                                                               
                                                                                
SPACES   DS    CL132               C' '                                         
T00A     DS    XL3                 X'D9000A'                                    
SVALUESL EQU   *-SVALUES                                                        
         DS    XL512               Spare for SVALUES growth                     
                                                                                
AROUT1   DS    A                   A(Routines overlay 1)                        
#WRKINI  EQU   0                                                                
AWRKINI  EQU   AROUT1,,C'A'                                                     
#IOEXEC  EQU   1                                                                
AIOEXEC  EQU   AROUT1,,C'A'                                                     
#NXTREC  EQU   2                                                                
ANXTREC  EQU   AROUT1,,C'A'                                                     
#GETPID  EQU   3                                                                
AGETPID  EQU   AROUT1,,C'A'                                                     
                                                                                
AROUT2   DS    A                   A(Routines overlay 2)                        
                                                                                
COMADDR  DS    0V                  ** Addresses from COMFACS **                 
VADDAY   DS    V                                                                
VCALLOV  DS    V                                                                
VCASHVAL DS    V                                                                
VCUREDIT DS    V                                                                
CUREDIT  EQU   VCUREDIT                                                         
VDATCON  DS    V                                                                
VDATVAL  DS    V                                                                
VDATAMGR DS    V                                                                
VRUNIT   DS    V                                                                
VGETDAY  DS    V                                                                
VGETFACT DS    V                                                                
VGETPROF DS    V                                                                
VGETTXT  DS    V                                                                
VGLOBBER DS    V                                                                
VHELLO   DS    V                                                                
VHEXIN   DS    V                                                                
VHEXOUT  DS    V                                                                
VPERVAL  DS    V                                                                
VPERVERT DS    V                                                                
VREQTWA  DS    V                                                                
VSCANNER DS    V                                                                
VSEARCH  DS    V                                                                
VSECRET  DS    V                                                                
VSOFDAT  DS    V                                                                
VSWITCH  DS    V                                                                
VXSORT   DS    V                                                                
VBINSRCH DS    V                                                                
VLOCKET  DS    V                                                                
VXTRAINF DS    V                                                                
         DS    7V                                                               
                                                                                
SYSADDR  DS    0V                  ** Addresses from REPFACS **                 
SYSADDRL EQU   *-SYSADDR                                                        
         DS    10V                                                              
                                                                                
APHASES  DS    0V                  ** Loaded phases **                          
VCENTER  DS    V                                                                
VCHOPPER DS    V                                                                
VSQUASH  DS    V                                                                
VQSORT   DS    V                                                                
VFALINK  DS    V                                                                
VDDLINK  DS    V                                                                
VTSAR    DS    V                                                                
VOFFICER DS    V                                                                
VCFMIO   DS    V                                                                
VDEMOCON DS    V                                                                
VGTBROAD DS    V                                                                
         DS    9V                                                               
                                                                                
AGETDATA DS    A                                                                
ASETELEM DS    A                                                                
AADDDATA DS    A                                                                
         DS    12V                                                              
                                                                                
TEMP     DS    XL80                                                             
TEMP2    DS    XL80                                                             
WORK     DS    XL64                                                             
WORK2    DS    XL64                                                             
ELEM     DS    XL256                                                            
ELEM2    DS    XL256                                                            
                                                                                
GIND1    DS    XL1                 ** Global indicators - 1 **                  
GIUNWIND EQU   X'80'               Unwind transaction via $ABEND                
GIONLINE EQU   X'40'               Application running online                   
                                                                                
GIND2    DS    XL1                 ** Global indicators - 2 **                  
                                                                                
IOVALS   DS    0A                  *** I/O Controller variables ***             
IOADDR   DS    A                   I/O area address                             
IOFILE   DS    CL7                 File name                                    
IOCMND   DS    CL7                 DATAMGR command                              
IOFLAG   DS    XL1                 Flag byte used by IO routine                 
                                                                                
IOCMNDS  EQU   X'000F'             Reserved for controller use                  
IOLOCK   EQU   X'0010'             Read for update                              
IORDEL   EQU   X'0020'             Read deleted records                         
IOHI     EQU   X'0001'             DMRDHI                                       
IOHID    EQU   IOHI+IORDEL         DMRDHI (for deletes)                         
IOHIUP   EQU   IOHI+IOLOCK         DMRDHI (for update)                          
IOHIUPD  EQU   IOHI+IOLOCK+IORDEL  DMRDHI (for update & deletes)                
IORD     EQU   X'0002'             DMREAD                                       
IORDD    EQU   IORD+IORDEL         DMREAD (for deletes)                         
IORDUP   EQU   IORD+IOLOCK         DMREAD (for update)                          
IORDUPD  EQU   IORD+IOLOCK+IORDEL  DMREAD (for update & deletes)                
IOSQ     EQU   X'0003'             DMRSEQ                                       
IOSQD    EQU   IOSQ+IORDEL         DMRSEQ (for deletes)                         
IOSQUP   EQU   IOSQ+IOLOCK         DMRSEQ (for update)                          
IOSQUPD  EQU   IOSQ+IOLOCK+IORDEL  DMRSEQ (for update & deletes)                
IOGET    EQU   X'0004'             GETREC                                       
IOGETRUP EQU   IOGET+IOLOCK        GETREC (for update)                          
IOADD    EQU   X'0005'             DMADD                                        
IOADDREC EQU   X'0005'             ADDREC                                       
IOWRITE  EQU   X'0006'             DMWRT                                        
IOPUTREC EQU   X'0006'             PUTREC                                       
IOUNLOCK EQU   X'0007'             DMUNLK                                       
                                                                                
IO1      EQU   X'1000'             I/O area 1                                   
IO2      EQU   X'2000'             I/O area 2                                   
IO3      EQU   X'3000'             I/O area 3                                   
IO4      EQU   X'4000'             I/O area 4                                   
IO5      EQU   X'5000'             I/O area 5                                   
IO6      EQU   X'6000'             I/O area 6                                   
IO7      EQU   X'7000'             I/O area 7                                   
IO8      EQU   X'8000'             I/O area 8                                   
IOALL    EQU   X'F000'             Max 15 I/O areas (currently 8)               
                                                                                
IOFILES  EQU   X'0F00'             Reserved for controller use                  
IODIR    EQU   X'0100'             I/O to local system directory                
IOFIL    EQU   X'0200'             I/O to local system file                     
IOREPDIR EQU   X'0100'             I/O to Rep directory                         
IOREPFIL EQU   X'0200'             I/O to Rep file                              
IOGENDIR EQU   X'0800'             I/O to General directory                     
IOGENFIL EQU   X'0900'             I/O to General file                          
IOCTL    EQU   X'0B00'             I/O to Control file                          
IOCTFILE EQU   X'0B00'             I/O to Control file                          
                                                                                
IOERR    DS    XL1                 I/O Error return byte                        
IOEEOF   EQU   X'80'               End-of-file                                  
IOEDSK   EQU   X'40'               Non-recoverable disk error                   
IOEDUP   EQU   X'20'               Duplicate key on add                         
IOERNF   EQU   X'10'               Record not found                             
IOEDEL   EQU   X'02'               Record is deleted                            
IOERRS   EQU   X'FF'               Reserved for controller use                  
IOKEY    DS    CL32                Actual key value                             
IOKEYSAV DS    CL32                Saved actual key value (before I/O)          
IODA     DS    XL4                 Disk address of D/A record                   
IOWORK   DS    XL44                D/A linked files work area                   
IODASAV  DS    XL4                 Saved disk address of D/A record             
IOTRACE  DS    XL1                 Trace option                                 
IOVALL   EQU   *-IOVALS                                                         
                                                                                
IOLENQ   EQU   4*ONEK                                                           
IODDWQ   EQU   IOLENQ-(L'IODA+L'IOWORK)                                         
IOAREA1  DS    XL(IOLENQ)                                                       
IOAREA2  DS    XL(IOLENQ)                                                       
IOAREA3  DS    XL(IOLENQ)                                                       
IOAREA4  DS    XL(IOLENQ)                                                       
IOAREA5  DS    XL(IOLENQ)                                                       
IOAREA6  DS    XL(IOLENQ)                                                       
IOAREAL  EQU   *-IOAREA1           Application I/O area length                  
IOAREA7  DS    XL(IOLENQ)                                                       
IOAREA8  DS    XL(IOLENQ)                                                       
                                                                                
***********************************************************************         
* DDLINK/FALINK required storage areas                                *         
***********************************************************************         
                                                                                
LINKW    DS    0F                                                               
DDWRKIOC DS    (WRKIOBL)X          WRKIO control block                          
DDRUNP   DS    (RUNPARML)X         RUNPARMS emulation                           
DDRUNF   DS    (RUNFACSL)X         RUNFACS emulation                            
FALINKC  DS    XL(FALINKDL)        FALINK control block                         
DDLINKC  DS    (LP_LNQ)X           DDLINK control block                         
DDLINKW  DS    XL(10*ONEK)         DDLINK work area                             
                                                                                
WORKL    EQU   *-WORKD                                                          
         EJECT                                                                  
***********************************************************************         
* I/O file table                                                      *         
***********************************************************************         
                                                                                
FILTABD  DSECT                                                                  
FILNUM   DS    XL1                 File number (IOFILES equate)                 
FILNAME  DS    CL7                 File name                                    
FILINDS  DS    XL1                 File indicators - 1                          
FILIVL   EQU   X'80'               File records are variable length             
FILIDA   EQU   X'40'               File is a direct access file                 
FILIIS   EQU   X'20'               File is an index sequential file             
FILINDS2 DS    XL1                 File indicators - 2                          
FILIDI   EQU   X'80'               File is D/A with I/S index                   
FILIID   EQU   FILIDI              File is I/S index to a D/A file              
FILNUM2  DS    XL1                 D/A or I/S file number                       
FILKEYL  DS    XL1                 D/A or I/S key length                        
FILCTLL  DS    XL1                 Fixed length I/S control length              
FILMAXL  DS    XL2                 Maximum record length                        
         DS    XL5                 N/D                                          
FILTABL  EQU   *-FILTABD                                                        
                                                                                
***********************************************************************         
* I/O command table                                                   *         
***********************************************************************         
                                                                                
CMDTABD  DSECT                     Covers I/O command tables                    
CMDFILT  DS    XL1                 File type                                    
         DS    XL1                 N/D                                          
CMDTABL  DS    XL2                 Table length                                 
CMDNTRY  DS    0X                  Covers I/O command table entry               
CMDNAME  DS    CL7                 Command name                                 
CMDNUM   DS    XL1                 Command number (see IOCMNDS)                 
CMDINDS  DS    XL1                 Command indicators - 1                       
CMDIDARQ EQU   X'80'               Disk address required for I/O                
CMDIDAXC EQU   X'40'               Clear disk address before I/O                
CMDIDADD EQU   X'20'               Disk address returned by I/O                 
CMDINDS2 DS    XL1                 Command indicators - 2                       
CMDNTRYL EQU   *-CMDNTRY                                                        
                                                                                
***********************************************************************         
* Screen and saved storage within TWA                                 *         
***********************************************************************         
                                                                                
       ++INCLUDE FATWA                                                          
       ++INCLUDE RELNKFFD                                                       
         ORG   TWAD+2304                                                        
FAMSGBLK DS    CL(FAMSGDL)         Block for FALINK error messages              
FACON    DS    CL(L'FALCON)        Block for FALINK control field               
                                                                                
QVALS    DS    XL512               Request values                               
         ORG   QVALS                                                            
QMED     DS    CL(L'RBUYSPMD)      Media code                                   
QCLT     DS    CL(L'RBUYSPCL)      Client code                                  
QSECAGY  DS    CL2                 Security agency                              
QHXSUSER DS    XL(L'TWAUSRID)      Hex ID of Station User                       
QSGONCHR DS    CL8                 Char ID of Station User                      
QHXPID   DS    XL(L'XIPID)         Hex value of PID                             
QPIDCHAR DS    CL(L'SAPALPID)      PID char                                     
                                                                                
QVALSR   DS    XL(L'QVALS-(*-QVALS))                                            
                                                                                
         DS    XL((TWANOGO-SVXTRAS)-(*-TWAD))                                   
                                                                                
SVXTRA   DS    0X                  Extra saved storage                          
SVSERVER DS    XL(8*ONEK)          Server save area                             
SVDDLINK DS    XL(LS_LNQ)          DDLINK saved storage                         
SVSECRET DS    (SECLENQ)X          SECRET saved storage                         
SVFALINK DS    XL(2*ONEK)          FALINK saved storage                         
SVXTRAS  EQU   *-SVXTRA                                                         
                                                                                
       ++INCLUDE DDCOMFACS                                                      
       ++INCLUDE DDCOREQUS                                                      
       ++INCLUDE DDCURTABD                                                      
       ++INCLUDE DDFH                                                           
       ++INCLUDE DDGLOBEQUS                                                     
       ++INCLUDE DDGLVXCTLD                                                     
       ++INCLUDE DDLINKD                                                        
       ++INCLUDE DDMASTD                                                        
       ++INCLUDE DDRUNNERD                                                      
       ++INCLUDE DDTSARD                                                        
WRKIOD   DSECT                                                                  
       ++INCLUDE DDWRKIOD                                                       
       ++INCLUDE FAFACTS                                                        
       ++INCLUDE FAXTRAINF                                                      
       ++INCLUDE FAGETTXTD                                                      
       ++INCLUDE FALINKBLK                                                      
       ++INCLUDE FASECRETD                                                      
                                                                                
       ++INCLUDE DDPERVALD                                                      
                                                                                
MHELD    DSECT                                                                  
         ORG   MHUSER                                                           
MHOLAY   DS    XL1                 Overlay or 0                                 
MHAOUT   DS    AL3                 A(output Header-FAMAP)                       
                                                                                
MDELD    DSECT                                                                  
         ORG   MDUSER                                                           
MDIND1   DS    XL1                 Indicator - 1                                
MDIVAL1  EQU   X'80'               Validation in routines 1                     
MDIVAL2  EQU   X'40'               Validation in routines 2                     
MDISND1  EQU   X'20'               Send in routines 1                           
MDISND2  EQU   X'10'               Send in toutines 2                           
MDIHOOK  EQU   X'08'               Call overlay on receipt of this data         
MDIND2   DS    XL1                 Indicator - 2                                
MDIQVLO  EQU   X'80'               Output is in QVALS                           
MDIMEBO  EQU   X'40'               Output is in PRTBLK                          
MDIQVLI  EQU   X'20'               Input is in QVALS                            
MDIDMVC  EQU   X'10'               Direct move (no validation)                  
MDIND3   DS    XL1                 Indicator - 3                                
MDIND4   DS    XL1                 Indicator - 4                                
MDVALRX  DS    XL1                 Validate routine index                       
MDSNDRX  DS    XL1                 Send routine index                           
MDODSP   DS    XL2                 Output data displacement                     
MDIDSP   DS    XL2                 Input data displacement                      
MDTABL   DS    XL1                 L'output table entry or 0                    
MDTMXN   DS    XL2                 Maximum output table entries                 
MDTDATL  DS    XL1                 L'data item in output table                  
MDTNULC  DS    XL1                 Null character in table                      
         DS    XL1                 N/D                                          
                                                                                
       ++INCLUDE DDCTRYEQUS                                                     
       ++INCLUDE FATABSRUN                                                      
       ++INCLUDE SEACSFILE                                                      
                                                                                
GLRLINCD DSECT                     Globber Link command object                  
GLRLINLN DS    X                   Length of command (max 79)                   
GLRLINFD DS    0XL(L'LNKINP)       Request command line                         
GLRLINHD DS    CL4                 Request command header                       
GLRLINRS DS    CL(L'LNKINP-L'GLRLINHD)                                          
GLRLINLQ EQU   *-GLRLINCD                                                       
                                                                                
RREPRECD DSECT                                                                  
RREPKIDQ EQU   X'01'               Rep record type                              
       ++INCLUDE REGENREPA                                                      
FRSTELEM EQU   RREPELEM-RREPREC    Displacement to first Rep rec elem           
         EJECT                                                                  
                                                                                
RSTARECD DSECT                                                                  
RSTAKIDQ EQU   X'02'               Station file record type                     
       ++INCLUDE REGENSTA                                                       
         EJECT                                                                  
                                                                                
ROFFRECD DSECT                                                                  
ROFFKIDQ EQU   X'04'               Office record type                           
       ++INCLUDE REGENOFF                                                       
         EJECT                                                                  
                                                                                
RSALRECD DSECT                                                                  
RSALKIDQ EQU   X'06'               Salesperson record type                      
       ++INCLUDE REGENSAL                                                       
         EJECT                                                                  
                                                                                
RADVRECD DSECT                                                                  
RADVKIDQ EQU   X'08'               Advertiser record type                       
       ++INCLUDE REGENADV                                                       
         EJECT                                                                  
                                                                                
RPRDRECD DSECT                                                                  
RPRDKIDQ EQU   X'09'               Product record type                          
       ++INCLUDE REGENPRD                                                       
         EJECT                                                                  
                                                                                
RAGYRECD DSECT                                                                  
RAGYKIDQ EQU   RAGK2TYQ            Agency record type                           
       ++INCLUDE REGENAGY2         Note: Agy2 is expanded version               
         EJECT                                                                  
                                                                                
RBUYRECD DSECT                                                                  
RBUYKIDQ EQU   X'0B'               Contract buy record type                     
       ++INCLUDE REGENBUY                                                       
         EJECT                                                                  
                                                                                
RCONRECD DSECT                                                                  
RCONKIDQ EQU   X'0C'               Contract record type                         
       ++INCLUDE REGENCON                                                       
         EJECT                                                                  
                                                                                
RMKGRECD DSECT                                                                  
RMKGKIDQ EQU   X'11'               Contract shadow makegood buy record          
       ++INCLUDE REGENMKG                                                       
         EJECT                                                                  
                                                                                
RCTYRECD DSECT                                                                  
RCTYKIDQ EQU   RCTYKTYQ            Contract type record type                    
       ++INCLUDE REGENCTY                                                       
         EJECT                                                                  
                                                                                
RCMTRECD DSECT                                                                  
RCMTKIDQ EQU   X'2E'               Comment record type                          
       ++INCLUDE REGENCMT                                                       
         EJECT                                                                  
                                                                                
ROCMRECD DSECT                                                                  
ROCMKIDQ EQU   X'34'               Office comment record type                   
       ++INCLUDE REGENOCM                                                       
         EJECT                                                                  
                                                                                
RSA2RECD DSECT                                                                  
RSA2KIDQ EQU   X'46'               Secondary salesperson record type            
       ++INCLUDE REGENSAL2                                                      
         EJECT                                                                  
                                                                                
RCFCRECD DSECT                                                                  
RCFCKIDQ EQU   RCFCKTYQ            Confirmation comment record type             
       ++INCLUDE REGENCFC                                                       
         EJECT                                                                  
                                                                                
RCOVRECD DSECT                                                                  
RCOVKIDQ EQU   X'49'               Coversheet record type                       
       ++INCLUDE REGENCOV                                                       
         EJECT                                                                  
                                                                                
RAUDRECD DSECT                                                                  
RAUDKIDQ EQU   X'4D'               Audit record type                            
       ++INCLUDE REGENAUD                                                       
         EJECT                                                                  
                                                                                
DBLOCKD  DSECT                     Control block for Demographic                
       ++INCLUDE DEDBLOCK                                                       
                                                                                
       ++INCLUDE REPFACSQ          Equates for RepFacs                          
       ++INCLUDE REMAPEQUS                                                      
                                                                                
