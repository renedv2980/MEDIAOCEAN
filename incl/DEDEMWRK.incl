*          DATA SET DEDEMWRK   AT LEVEL 031 AS OF 06/11/08                      
***********************************************************************         
*============================= UPDATE LOG ============================*         
*   DATE   LVL USER   DESCRIPTION                                     *         
* -------- --- ----   ------------------------------------------------*         
* NOV04/00 013 BPOO - ADD IN USERID ADDRESS                           *         
* OCT29/00 011 BPOO - ADD IN NEW ADDRESS FOR NEW 81 PHASE TABLES      *         
* OCT12/00 010 BPOO - New equate for DEM32 version 1.1.0.75 and higher*         
* SEP22/00 009 BPOO - ORG FALINK FIELD ONE LINE LOWER IN THE SCREEN             
* Jun21/00 006 GLEE - New equate for DEM32 version 1.1.0.67 and higher*         
*                                                                     *         
* Jun19/00 005 GLEE - New label to support PC applic version stamp    *         
*                                                                     *         
* May24/00 004 GLEE - Some initial support for Network Cable TP file  *         
*                                                                     *         
* May02/00 003 GLEE - New fields to store status bytes from DIR/FIL   *         
*                                                                     *         
* Mar08/00 002 GLEE - Increased size of EBD record                    *         
*              GLEE - New buffer for TSAR I/O                         *         
*                                                                     *         
* Oct27/99 001 GLEE - Rearrange fields in work area                   *         
*                   - Moved Update log to bottom                      *         
*                   - Re-leveled back to LVL=001                      *         
*                                                                     *         
***********************************************************************         
         EJECT                                                                  
*=========================== GLOBAL EQUATES ==========================*         
                                                                                
*                                  EQUATES FOR PROGRAM MAXIMUMS                 
MAXSTAS  EQU   4                   N'STATIONS                                   
MAXBKS   EQU   5                   N'BOOKS                                      
MAXDAYS  EQU   20                  N'DAY/TIMES                                  
MAXDEMS  EQU   8                   N'DEMOS                                      
MAXTWA   EQU   1                   N'SAVED TWA'S                                
MAXDTCMP EQU   (L'DUMDAT)/(19+1)   L(MTWTFSS/1130A-1230P) = 19                  
MAXPUCMP EQU   (L'DUMDAT)/(04+1)   L(PURE NUMBER) <= 04                         
*                                  GENERAL EQUATES                              
CANMEDQ  EQU   C'C'                CANADIAN MEDIA EQUATE                        
USAMEDQ  EQU   C'T'                US MEDIA EQUATE                              
EOT      EQU   0                   END-OF-TABLE TERMINATOR                      
SUPPLIED EQU   254                 USER HAS SUPPLIED ERROR MESSAGE              
OK       EQU   255                 FIELD IS VALID                               
LENTWA   EQU   CHKPTTWL            L'TWA RECORD                                 
TPSTRPGL EQU   18432               L(TEMPSTR PAGE) (ON APR 21, 1995)            
MAXKYWDS EQU   16                  MAX # OF KEYWORDS FOR STEREO INPUT           
STMXCHKL EQU   6144                MAX STORAGE ROOM FOR STEREO INPUT            
STMXRECL EQU   255                 MAX LENGTH OF A STEREO INPUT RECD            
MXTDRLEN EQU   X'7FFF'             MAXIMUM L(TSAR DEMO RECD)                    
*                                  EQUATES FOR FIELD VALIDATION                 
DDSONLY  EQU   X'80'               DDS ONLY INPUT VALUE                         
PRESET   EQU   X'40'               FIELD HAS A PRESET VALUE                     
DEFAULT  EQU   X'20'               FIELD HAS A DEFAULT VALUE                    
SYSSPT   EQU   X'10'               SPOT SYSTEM EQUATE                           
SYSREP   EQU   X'08'               REP SYSTEM EQUATE                            
ACTAVAIL EQU   X'10'               AVAIL FORMAT ACTION                          
*&&DO                                                                           
ACTEBOOK EQU   X'08'               ESTIMATE BOOK ACTION                         
*&&                                                                             
ACTAFFID EQU   X'04'               AFFIDAVIT ACTION                             
STERONLY EQU   X02                 (FULL) STEREO SESSION ONLY                   
STV2OPTL EQU   X04                 INPUT IN STATIONS FIELD OPTIONAL             
STV2MRKT EQU   X'02'               EXPECT MARKET  IN STATION FIELD              
STV2NMRC EQU   X'01'               EXPECT NUMERIC IN STATION FIELD              
STAVBUYD EQU   X'20'               STATION FIELD IS BUY KEY                     
STAVSTAS EQU   X'10'               PARENT STATION VALID                         
STAVSPIL EQU   X'08'               SPILL MARKET VALID                           
STAVTOTS EQU   X'04'               STATION CAN BE MARKET NUMBER                 
STAVPARS EQU   X'02'               P+S1 & P+S2 VALID                            
*&&DO                                                                           
STAVESTS EQU   X'01'               ESTIMATE BOOK FORMAT (STA/PERIOD)            
*&&                                                                             
BKVMONTH EQU   X'10'               BOOK TYPE IS TP/PAV (YEAR/MONTH)             
BKVWEEKS EQU   X'08'               BOOK TYPE IS NETWORK (WEEK)                  
BKVLATST EQU   X'04'               BOOK MAY BE 'LATEST' (TP & PAV ONLY)         
BKVVALTP EQU   X'02'               VALIDATE TP STATION/BOOK                     
BKVWEEKN EQU   X'01'               BOOK MAY HAVE WEEK SUFFIX (-N)               
DEMVESTS EQU   X'10'               ESTIMATE BOOK (DEMOS OPTIONAL)               
DEMVOPTL EQU   X'08'               DEMOS INPUT OPTIONAL                         
OPTATAB  EQU   X'08'               OPTIADDR=A(VALIDATION TABLE)                 
OPTARTN  EQU   X'04'               OPTIADDR=A(VALIDATION ROUTINE)               
OPTHELPH EQU   X'02'               60 BYTE HELP HEADER ON VALIDTN TABLE         
OPTKONLY EQU   X'01'               OPTION IS JUST KEYWORD W/O VALUE             
                                                                                
ODEMSCRN EQU   X'FF'               ORIGINAL SCEEN # FOR $DEM                    
STEOSCRN EQU   X'FE'               OVERLAY SCREEN # FOR STEREO                  
*                                  EQUATES FOR HELPREQD FIELD                   
HELPSYS  EQU   1                   SYSTEM                                       
HELPACT  EQU   2                   ACTION                                       
HELPFIL  EQU   3                   FILE                                         
HELPSRC  EQU   4                   SOURCE                                       
HELPSTA  EQU   5                   STATION                                      
HELPBK   EQU   6                   BOOK                                         
HELPDAY  EQU   7                   DAY/TIME                                     
HELPDEM  EQU   8                   DEMOS                                        
HELPOPT  EQU   9                   OPTIONS                                      
                                                                                
*                                 **** EQUATES FOR SCANNER LENGTHS ****         
SCANLDAY EQU   12                  DAY/TIME FIELD                               
         EJECT                                                                  
*                                  EQUATES FOR ACTIONS/MODES                    
FRST     EQU   0                   NEW ACTION SEQUENCE                          
HELP     EQU   1                   GENERAL HELP FACILITY                        
*&&DO                                                                           
DEMOEST  EQU   8                   ESTIMATE BOOK FORMAT SCHEDULE                
*&&                                                                             
DEMOAVL  EQU   9                   AVAIL FORMAT SCHEDULE                        
DEMOQHR  EQU   10                  QUARTER HOUR SCHEDULE                        
DEMOPER  EQU   11                  TIME PERIOD SCHEDULE                         
SPILLTO  EQU   12                  SPILL-IN MARKET LIST                         
STATION  EQU   13                  STATION LIST FOR A MARKET                    
MARKETS  EQU   14                  MARKET LIST FOR A BOOK                       
STATBKS  EQU   15                  BOOKS FOR A STATION                          
DEMOLST  EQU   16                  LIST VALID DEMOS FOR A BOOK                  
AFFIDS   EQU   17                  AFFIDAVIT LOOK-UP FOR A BUY RECORD           
PROGNAME EQU   18                  NETWK/SYND PROGRAM LIST FOR A BOOK           
PROGMKT  EQU   19                  MKT/STTN LIST WHICH RAN A PROGRAM            
GRID     EQU   20                  CONTROL GRID STUFF                           
PROPINIT EQU   21                  INITIALIZATION FOR (PC) PROPOSER             
PROGMRNK EQU   22                  MARKET RANK FOR PROGRAMS                     
PROGLIST EQU   23                  LIST PROGRAM NUMBERS FOR BOOK                
NWSYNBKS EQU   24                  LIST BOOKS W/ NETWK/SYND PROGRAMS            
SYSCODE  EQU   25                  LIST SYCODE INFORMATION FOR FUSION           
NEXT     EQU   255                 MORE DISPLAY DATA TO FOLLOW                  
*                                  EQUATES FOR APPLICATION MODES                
FORMHEAD EQU   1                   REQUEST TO FORMAT HEADLINES                  
PROCESS  EQU   2                   REQUEST TO PROCESS RECORDS                   
FORMLINE EQU   3                   REQUEST TO FORMAT A LINE OF OUTPUT           
PROCREC  EQU   4                   PROCESS ANOTHER RECORD                       
STERTASK EQU   5                   TASKS FOR A STEREO SESSION                   
APMBREAK EQU   10                  MODE TO HANDLE MF TRANSACTN BREAKS           
APMRESUM EQU   11                  MODE TO HANDLE MF TRANSACTN RESUMES          
*                                  RETURN MODES FROM APPLICATION                
SAMEREC  EQU   253                 RETURN SAME RECORD AGAIN                     
NEXTREC  EQU   254                 REQUEST TO GET ANOTHER RECORD                
FORCEEND EQU   255                 APPLICATION FORCED EXIT                      
*                                  EQUATES FOR I/O ROUTINE                      
DIR      EQU   X'80'               DIRECTORY I/O                                
FIL      EQU   X'40'               FILE I/O                                     
HIGH     EQU   X'10'               READ HIGH                                    
SEQ      EQU   X'20'               READ SEQUENTIAL                              
READ     EQU   X'30'               READ SPECIFIC                                
GET      EQU   X'30'               GETREC                                       
DEM      EQU   X'01'               DEMDIR/DEMFIL                                
PAV      EQU   X'02'               PAVDIR/PAVFIL                                
SPT      EQU   X'03'               SPTDIR/SPTFIL                                
STA      EQU   X'04'               STAFIL                                       
         EJECT                                                                  
*                                  EQUATES FOR OPTIONS                          
ALLOPTS  EQU   X'FFFFFFFF'                                                      
OPTUPGDN EQU   1                   UPGRADE(T/P)                                 
OPTUPGDB EQU   X'00000001'                                                      
OPTUPDTN EQU   2                   DAYTIME                                      
OPTUPDTB EQU   X'00000002'                                                      
OPTUPBKN EQU   3                   BOOK                                         
OPTUPBKB EQU   X'00000004'                                                      
OPTPROGN EQU   4                   PROGRAM                                      
OPTPROGB EQU   X'00000008'                                                      
OPTTIMEN EQU   5                   TIME                                         
OPTTIMEB EQU   X'00000010'                                                      
OPTPRNTN EQU   6                   PRINT                                        
OPTPRNTB EQU   X'00000020'                                                      
OPTLISTN EQU   7                   LIST                                         
OPTLISTB EQU   X'00000040'                                                      
OPTSTRTN EQU   8                   NAME                                         
OPTSTRTB EQU   X'00000080'                                                      
OPTSVISN EQU   9                   SVI                                          
OPTSVISB EQU   X'00000100'                                                      
*&&DO                                                                           
OPTDPRTN EQU   10                  DAYPART                                      
OPTDPRTB EQU   X'00000200'                                                      
OPTPTYPN EQU   11                  PROGTYP                                      
OPTPTYPB EQU   X'00000400'                                                      
*&&                                                                             
OPTDTYPN EQU   12                  DATA                                         
OPTDTYPB EQU   X'00000800'                                                      
OPTDATEN EQU   13                  DATES FOR AFFID                              
OPTDATEB EQU   X'00001000'                                                      
OPTSECSN EQU   14                  SECONDS LENGTH FILTER FOR AFFID              
OPTSECSB EQU   X'00002000'                                                      
OPT2YRPN EQU   15                  2 YEAR PUT AVERAGE OPTION                    
OPT2YRPB EQU   X'00004000'                                                      
OPT2YRRN EQU   16                  2 YEAR RTG AVERAGE OPTION                    
OPT2YRRB EQU   X'00008000'                                                      
OPTCLIN  EQU   17                                                               
OPTCLIB  EQU   X'00000000'                                                      
OPTYSPRN EQU   18                                                               
OPTYSPRB EQU   X'00010000'         FILTER ON SPORTS   (SPORTS)                  
OPTNSPRN EQU   19                                                               
OPTNSPRB EQU   X'00020000'         FILTER W/O SPORTS  (-SPORTS)                 
OPTDMAN  EQU   20                                                               
OPTDMAB  EQU   X'00040000'         PRECISION SPECIFICATION                      
OPTPNLSN EQU   21                                                               
OPTPNLSB EQU   X'00080000'         PROGRAM NAME OR PROG # SEQUENCE              
OPTPMLSN EQU   22                                                               
OPTPMLSB EQU   X'00100000'         MARKET OR STATION SEQUENCE                   
OPTBESTN EQU   23                                                               
OPTBESTB EQU   X'00200000'         BEST RECORDS (PAV FILE)                      
OPTNORN  EQU   24                                                               
OPTNORB  EQU   X'00400000'         SHOW NOR PROGRAMS (PAV FILE)                 
OPTWKVN  EQU   25                                                               
OPTWKVB  EQU   X'00800000'         (OVERRIDE TO) DSPLY WEEKS VERTICALLY         
OPTMBKN  EQU   26                                                               
OPTMBKB  EQU   X'01000000'         MULTIPLE BOOKS                               
OPTMBBTN EQU   27                                                               
OPTMBBTB EQU   X'02000000'         MULTIPLE BOOKS BOOK TYPE                     
OPTIMSN  EQU   28                                                               
OPTIMSB  EQU   X'04000000'         IN MARKET SHARES                             
OPTCAVGN EQU   29                                                               
OPTCAVGB EQU   X'08000000'         CABLE AVERAGE LEVEL                          
OPTVPHN  EQU   30                                                               
OPTVPHB  EQU   X'10000000'         VIEWERS-PER-HOUSEHOLD LEVEL                  
OPTDECN  EQU   31                                                               
OPTDECB  EQU   X'20000000'         DECIMAL FOR DMA=I                            
OPTISSN  EQU   32                                                               
OPTISSB  EQU   X'40000000'         IN STATION SHARES                            
         EJECT                                                                  
*------------------- EQUATES FOR BITWISE OPERATIONS ------------------*         
                                                                                
XFF      EQU   X'FF'                                                            
X80      EQU   X'80'                                                            
X40      EQU   X'40'                                                            
X20      EQU   X'20'                                                            
X10      EQU   X'10'                                                            
X08      EQU   X'08'                                                            
X04      EQU   X'04'                                                            
X02      EQU   X'02'                                                            
X01      EQU   X'01'                                                            
                                                                                
*----------------------- EQUATES FOR STEREO I/O ----------------------*         
                                                                                
STSPIKEY EQU   C'ยบ'                END-OF-DATA FOR CURRENT KEYWORD              
STSPIFLD EQU   C','                DATA FIELD SEPARATOR                         
STSPIASN EQU   C'='                KEYWORD ASSIGNMENT - DATA COMING             
STSPIEOI EQU   C'~'                END OF INPUT                                 
STSPOLST EQU   X'5E'               SEPRATR FOR LIST ACTN, OUTPUT MODE           
STSPSOPI EQU   C'{'                START OPTIONS INDICATOR                      
STSPEOPI EQU   C'}'                END   OPTIONS INDICATOR                      
                                                                                
*---------------------- INTERNAL KEYWORD NUMBERS ---------------------*         
                                                                                
IKNACT   EQU   1                   ACT=                                         
IKNFIL   EQU   2                   FIL=                                         
IKNSOU   EQU   3                   SOU=                                         
IKNSTA   EQU   4                   STA=                                         
IKNBOO   EQU   5                   BOO=                                         
IKNDAY   EQU   6                   DAY=                                         
IKNDEM   EQU   7                   DEM=                                         
IKNOPT   EQU   8                   OPT=                                         
                                                                                
*------------------------ OUTPUT RECORD TYPES ------------------------*         
                                                                                
* These are the different output record types passed back to STEREO.            
*  They apply display functions, not list functions.                            
                                                                                
ORTDTAIL EQU   C'D'                DETAIL RECORD                                
ORTSMMRY EQU   C'S'                SUMMARY RECORD                               
ORTDEMOD EQU   C'M'                DEMO NAME RECORD (CATEGORY,MODIFIER)         
ORTDYTIM EQU   C'T'                LIST OF ALL DAY/TIME OCCURRENCES             
         EJECT                                                                  
*--------------------------- STEREO ERRORS ---------------------------*         
                                                                                
SERRSTEQ EQU   150                 STEREO ERROR                                 
SERRIKWQ EQU   151                 INVALID STEREO KEYWORD                       
SERRDKWQ EQU   152                 STEREO KEYWORD DUPLICATED                    
SERRTMOV EQU   153                 TOO MANY OPTION DATA VALUES                  
                                                                                
*----------------------- DEM32 EXTRACT VERSIONS ----------------------*         
                                                                                
* The concept of "Extract Versions" is used to support backward                 
*  compatibility of future DEM32 releases.                                      
                                                                                
*&&DO                                                                           
XTRCVER3 EQU   X'63011D00'         JAN29/99                                     
XTRCVER2 EQU   X'63010600'         JAN06/99                                     
XTRCVER1 EQU   X'62091800'         SEP24/98                                     
*&&                                                                             
XTRCVERA EQU   X'01030049'         DEM32 VERSION  1.3.0.73                      
XTRCVER9 EQU   X'01030000'         DEM32 VERSION  1.3.0.00                      
XTRCVER8 EQU   X'01020032'         DEM32 VERSION  1.2.0.50                      
XTRCVER7 EQU   X'01020013'         DEM32 VERSION  1.2.0.19                      
XTRCVER6 EQU   X'01020002'         DEM32 VERSION  1.2.0.02                      
XTRCVER5 EQU   X'01020003'         DEM32 VERSION  1.2.0.03                      
XTRCVER4 EQU   X'0101004B'         DEM32 VERSION  1.1.0.67                      
XTRCVER3 EQU   X'0063011D'         JAN29/99                                     
XTRCVER2 EQU   X'00630106'         JAN06/99                                     
XTRCVER1 EQU   X'00620918'         SEP24/98                                     
         EJECT                                                                  
*----------------------- INTERNAL DEMO NUMBERS -----------------------*         
                                                                                
DNWHH1   EQU   11                  DEMO NUMBER - WEEKLY HH WEEK #1              
DNWHH2   EQU   12                  DEMO NUMBER - WEEKLY HH WEEK #2              
DNWHH3   EQU   13                  DEMO NUMBER - WEEKLY HH WEEK #3              
DNWHH4   EQU   14                  DEMO NUMBER - WEEKLY HH WEEK #4              
         EJECT                                                                  
*------------------------ MAP CODES FOR FALINK -----------------------*         
                                                                                
       ++INCLUDE DEDEMMAPQ                                                      
         EJECT                                                                  
* DSECT TO COVER SYSTEM TABLE                                                   
*                                                                               
SYSTABD  DSECT                                                                  
SYSNAME  DS    CL8                 SYSTEM NAME                                  
SYSINDS  DS    XL1                 SYSTEM INDICATORS                            
SYSSYS   DS    XL1                 SYSTEM CODE                                  
SYSOVSYS DS    XL1                 SYSTEM CALLOV NUMBER                         
SYSACTI  DS    XL1                 ACTION VALIDATION INDICATORS                 
SYSACTD  DS    CL8                 DEFAULT/PRESET ACTION                        
SYSFILI  DS    XL1                 FILE VALIDATION INDICATORS                   
SYSFILD  DS    CL3                 DEFAULT/PRESET FILE                          
SYSSRCI  DS    XL1                 SOURCE VALIDATION INDICATORS                 
SYSSRCD  DS    CL3                 DEFAULT/PRESET SOURCE                        
SYSOPTR  DS    XL4                 REQUIRED OPTIONS                             
SYSOPTX  DS    XL4                 OPTIONS NOT ALLOWED                          
SYSINFO  DS    CL40                SOME HELP FOR THIS SYSTEM                    
SYSTABL  EQU   *-SYSTABD                                                        
         SPACE 1                                                                
* DSECT TO COVER ACTION TABLE                                                   
*                                                                               
***ACTTABD  DSECT - WAS ACTTABD- CHANGED TO NEW NAME BECAUSE                    
***                 DEDEMTABD ALSO HAS A DSECT WITH THIS NAME                   
ACTTABDD DSECT                                                                  
ACTNAME  DS    CL8                 ACTION NAME                                  
ACTINDS  DS    XL1                 ACTION INDICATORS                            
ACTACTN  DS    XL1                 ACTION CODE                                  
ACTOVER  DS    XL1                 OVERLAY NUMBER                               
ACTFUNC  DS    XL1                 DBFUNCT VALUE (OR ZERO)                      
ACTFILI  DS    XL1                 FILE VALIDATION INDICATORS                   
ACTFILD  DS    CL3                 DEFAULT/PRESET FILE                          
ACTSRCI  DS    XL1                 SOURCE VALIDATION INDICATORS                 
ACTSRCD  DS    CL3                 DEFAULT/PRESET SOURCE                        
ACTSTAM  DS    XL1                 MAXIMUM N'STATIONS ALLOWED                   
ACTBKM   DS    XL1                 MAXIMUM N'BOOKS ALLOWED                      
ACTDAYM  DS    XL1                 MAXIMUM N'DAY/TIMES ALLOWED                  
ACTDEMM  DS    XL1                 MAXIMUM N'DEMOS ALLOWED                      
ACTOPTR  DS    XL4                 REQUIRED OPTIONS                             
ACTOPTX  DS    XL4                 OPTIONS NOT ALLOWED                          
ACTINFO  DS    CL40                SOME HELP FOR THIS ACTION                    
ACTTABLL EQU   *-ACTTABDD                                                       
         EJECT                                                                  
* DSECT TO COVER FILE TABLE                                                     
*                                                                               
FILTABD  DSECT                                                                  
FILNAME  DS    CL3                 FILE NAME                                    
FILINDS  DS    XL1                 FILE INDICATORS                              
FILACTN  DS    XL1                 ACTION CODE (ZERO=ALL ACTIONS)               
FILSRCI  DS    XL1                 SOURCE VALIDATION INDICATORS                 
FILSRCD  DS    CL3                 DEFAULT/PRESET SOURCE VALUE                  
FILSTAI  DS    XL1                 STATION VALIDATION INDICATORS                
FILSTA2I DS    XL1                 STATION VALIDATION INDICATORS #2             
FILBKI   DS    XL1                 BOOK VALIDATION INDICATORS                   
FILBK2I  DS    XL1                 BOOK VALIDATION INDICATORS #2                
FILDAYI  DS    XL1                 DAY VALIDATION INDICATORS                    
FILDEMI  DS    XL1                 DEMO VALIDATION INDICATORS                   
FILOPTR  DS    XL4                 REQUIRED OPTIONS                             
FILOPTX  DS    XL4                 OPTIONS NOT ALLOWED                          
FILINFO  DS    CL40                SOME HELP FOR THIS FILE                      
FILTABL  EQU   *-FILTABD                                                        
         SPACE 1                                                                
* DSECT TO COVER FILE/MEDIA/SOURCE TABLE                                        
*                                                                               
FMSTABD  DSECT                                                                  
FMSFIL   DS    CL3                 FILE NAME                                    
FMSSRC   DS    CL3                 SOURCE NAME                                  
FMSINDS  DS    XL1                 FILE/SOURCE INDICATORS                       
FMSACTN  DS    XL1                 ACTION CODE (ZERO=ALL ACTIONS)               
FMSIFIL  DS    CL3                 DBFILE VALUE                                 
FMSISRC  DS    CL1                 DBSELSRC VALUE                               
FMSIMED  DS    CL1                 DBSELMED VALUE                               
FMSSTAI  DS    XL1                 STATION VALIDATION INDICATORS                
FMSSTA2I DS    XL1                 STATION VALIDATION INDICATORS #2             
FMSBKI   DS    XL1                 BOOK VALIDATION INDICATORS                   
FMSBK2I  DS    XL1                 BOOK VALIDATION INDICATORS #2                
FMSDAYI  DS    XL1                 DAY VALIDATION INDICATORS                    
FMSDEMI  DS    XL1                 DEMO VALIDATION INDICATORS                   
FMSOPTR  DS    XL4                 REQUIRED OPTIONS                             
FMSOPTX  DS    XL4                 OPTIONS NOT ALLOWED                          
FMSINFO  DS    CL40                SOME HELP FOR THIS FILE/SOURCE               
FMSTABL  EQU   *-FMSTABD                                                        
         EJECT                                                                  
* DSECT TO COVER OPTIONS TABLE                                                  
*                                                                               
OPTTABD  DSECT                                                                  
OPTNAME  DS    CL8                 OPTION NAME (LONG)                           
OPTSHRT  DS    CL3                 OPTION NAME (SHORT) OR SPACES                
OPTINDS  DS    XL1                 OPTION INDICATORS                            
OPTMINKL DS    XL1                 MINIMUM INPUT L'OPTNAME ALLOWED              
OPTMINDL DS    XL1                 MINIMUM L'DATA REQUIRED                      
OPTMAXDL DS    XL1                 MAXIMUM L'DATA REQUIRED                      
OPTOPTN  DS    XL1                 OPTION NUMBER (1 THRU 20)                    
OPTOPTB  DS    XL4                 OPTION BIT MASK (X'0001....8000')            
*                                  CORRESPONDING TO OPTION NUMBER               
OPTIADDR DS    AL2                 DISPLACEMENT OF TABLE/ROUTINE                
OPTOADDR DS    AL2                 DISPLACEMENT OF OUTPUT OPTION                
OPTOUTDL DS    XL1                 L'OUTPUT OPTION                              
OPTOPTR  DS    XL4                 OTHER REQUIRED OPTIONS                       
OPTOPTX  DS    XL4                 OTHER OPTIONS NOT ALLOWED                    
OPTINFO  DS    CL40                SOME HELP FOR THIS OPTION                    
OPTTABL  EQU   *-OPTTABD                                                        
         SPACE 1                                                                
* DSECT TO COVER DBSTABK BLOCK FOR DEMO LOOK-UPS                                
*                                                                               
STABKD   DSECT                                                                  
STASTA   DS    CL5                 ACTUAL STATION CALL LETTERS                  
STASPILL DS    XL2                 SPILL MARKET NUMBER                          
STABKS   DS    (MAXBKS)XL4         ACTUAL BOOK VALUES                           
STABKSL  EQU   *-STABKS                                                         
STABKL   EQU   *-STABKD                                                         
         EJECT                                                                  
* DSECT TO COVER TABLE OF VALID KEYWORDS FOR STEREO INPUT                       
*                                                                               
STROIKYD DSECT                                                                  
STKNUMB  DS    XL1                 INTERNAL NUMBER OF KEYWORD                   
STKFLAG1 DS    XL1                 FLAGS                                        
STKF1SCN EQU   X80                  KYWRD IS A FIELD IN ORIG $DEM SCRN          
STKF1SBF EQU   X40                  FIELD CAN HAVE SUB-DIVIDED FIELDS           
STKDKYWD DS    AL2                 DISPL FROM DEMTWAD OF KEYWORD                
STKLKYWD DS    AL1                 L(KEYWORD)                                   
STKFDSPH DS    AL2                 DISPL OF FIELD HDR IN T21BFF SCREEN          
STKFMXLN DS    AL1                 MAX LENGTH OF FLD  "    "      "             
STKFMXL2 DS    AL1                 MAX LENGTH OF FLD  IN DEM32 SESSION          
STKDSRCT DS    AL2                 DSPL OF STRGE FOR DSPL INTO REQCTLTB         
STROIKYQ EQU   *-STROIKYD                                                       
                                                                                
                                                                                
* DSECT TO TABLE OF STEREO INPUT COUNTERS                                       
*                                                                               
STINCTRD DSECT                                                                  
STINCKNU DS    XL(L'STKNUMB)        INTERNAL # OF KEYWORD                       
STINCDCT DS    XL1                  # OF DATA INPUTS FOR THIS KEYWORD           
STINCTRQ EQU   *-STINCTRD                                                       
                                                                                
                                                                                
* DSECT TO REQUEST CONTROL TABLE                                                
*                                                                               
RCTDSECT DSECT                                                                  
RCTIKNUM DS    XL(L'STKNUMB)        INTERNAL # OF KEYWORD                       
RCTFROM  DS    XL(L'STINCDCT)       NTH DATA VALUE WE'RE STARTING FROM          
RCTUPTO  DS    XL(L'STINCDCT)       NTH DATA VALUE WE'RE UP TO                  
RCTDCNT  DS    XL(L'STINCDCT)       TOTAL # OF DATA VALUES FOR KYWRD            
RCTLENQ  EQU   *-RCTDSECT                                                       
                                                                                
                                                                                
* DSECT TO CHUNKS OF STEREO INPUT                                               
*                                                                               
STICKEYD DSECT                                                                  
STICKKNU DS    XL(L'STKNUMB)       INTERNAL NUMBER OF KEYWORD                   
STICKNTH DS    XL1                 NTH DATA VALUE OF KEYWORD                    
STICKEYL EQU   *-STICKEYD          KEY LENGTH                                   
                                                                                
STICLEN  DS    XL1                 CHUNK (RECORD) LENGTH                        
STICFIXL EQU   *-STICKEYD          FIXED PART OF RECORD                         
STICDATA DS    0C                  VARIABLE LENGTH DATA                         
         EJECT                                                                  
***********************************************************************         
*=============== DSECTS FOR $DEM's OWN SCANNER ROUTINE ===============*         
                                                                                
*                                                                               
** WORK AREA FOR ROUTINE **                                                     
*                                                                               
MSCNWRKD DSECT                                                                  
MSCWDUB  DS    D                                                                
*                                                                               
MSCWMXLI DS    CL1                                                              
*                                                                               
MSCWCMMA DS    CL1                                                              
MSCWEQAL DS    CL1                                                              
*                                                                               
MSCWLLFT DS    H                                                                
MSCWLRGT DS    H                                                                
MSCWLBTH DS    H                                                                
MSCWLROW DS    H                                                                
MSCWDISP DS    H                                                                
*                                                                               
MSCWERR  DS    XL1                 MY SCANNER'S ERROR CODE                      
MSCWEITB EQU    1                   INPUT TOO BIG                               
MSCWE1TB EQU    2                   1st HALF OF DIVIDED FLD TOO BIG             
MSCWE2TB EQU    3                   2nd HALF OF DIVIDED FLD TOO BIG             
MSCWE1MS EQU    4                   1st HALF OF FIELD MISSING                   
*                                                                               
MSCWBUFF DS    CL512               BUFFER AREA TO STORE INPUT STRING            
         DS    CL1                 ROOM FOR THE COMMA SCANNER INSERTS           
MSCWBUFX EQU   *                                                                
MSCWBUFL EQU   MSCWBUFX-MSCWBUFF                                                
*                                                                               
MSCNWRKX EQU   *                                                                
MSCNWRKL EQU   MSCNWRKX-MSCNWRKD                                                
                                                                                
                                                                                
*                                                                               
** OUTPUT BLOCK LAYOUT **                                                       
*                                                                               
MSCNBLKD DSECT                                                                  
MSCB1LEN DS    XL1                 L'field (L'first half of divide fld)         
MSCB2LEN DS    XL1                 L'second half of divided fld or 0            
MSCB1VBT DS    XL1                 Validity bits (x'80'=numberic,               
*                                                 x'40'=alpha,                  
*                                                 x'20'=hex)                    
MSCB2VBT DS    XL1                 Validity bits for 2nd half dvd fld           
MSCB1DSP DS    XL1                 Dspl into string of 1st fld (optnl)          
         ORG   MSCB1DSP                                                         
MSCB1VAL DS    XL4                 Binary value of valid numeric flds           
MSCB2DSP DS    XL1                 Dspl into string of 2nd fld (optnl)          
         ORG   MSCB2DSP                                                         
MSCB2VAL DS    XL4                 Binary value of valid numeric flds           
MSCBFXL  EQU   *-MSCNBLKD                                                       
                                                                                
MSCB1DAT DS    0CL10               Left justified data padded w/ spaces         
MSCB2DAT DS    0CL10               Data for 2nd half of divided flds            
*                                  (Note - Undivided fields may be up           
*                                   to 20 characters.)                          
***********************************************************************         
         EJECT                                                                  
* DEDBLOCK                                                                      
         PRINT OFF                                                              
DBLOCKD  DSECT                                                                  
       ++INCLUDE DEDBLOCK                                                       
         PRINT ON                                                               
         SPACE 1                                                                
* DEDEMEQUS                                                                     
         PRINT OFF                                                              
       ++INCLUDE DEDEMEQUS                                                      
         PRINT ON                                                               
         SPACE 1                                                                
* SPDEMUPD                                                                      
         PRINT OFF                                                              
       ++INCLUDE SPDEMUPD                                                       
         PRINT ON                                                               
         SPACE 1                                                                
* SPDEMLK                                                                       
         PRINT OFF                                                              
SPDEMLKD DSECT                                                                  
       ++INCLUDE SPDEMLK                                                        
         PRINT ON                                                               
         SPACE 1                                                                
* SPSTAPACKD                                                                    
         PRINT OFF                                                              
       ++INCLUDE SPSTAPACKD                                                     
         PRINT ON                                                               
         SPACE 1                                                                
* DEDEMFILE                                                                     
         PRINT OFF                                                              
       ++INCLUDE DEDEMFILE                                                      
         PRINT ON                                                               
         SPACE 1                                                                
* DDTSARD                                                                       
         PRINT OFF                                                              
       ++INCLUDE DDTSARD                                                        
         PRINT ON                                                               
         SPACE 1                                                                
* DDPERVALD                                                                     
         PRINT OFF                                                              
       ++INCLUDE DDPERVALD                                                      
         PRINT ON                                                               
         SPACE 1                                                                
* DDCOREQUS                                                                     
         PRINT OFF                                                              
       ++INCLUDE DDCOREQUS                                                      
         PRINT ON                                                               
         SPACE 1                                                                
* FACHKPT                                                                       
         PRINT OFF                                                              
       ++INCLUDE FACHKPT                                                        
         PRINT ON                                                               
         DS    0XL((CHKPTTWL-TPSTRPGL)+1)                                       
         DS    0XL((TPSTRPGL-CHKPTTWL)+1)                                       
                                                                                
* FALINKBLK                                                                     
         PRINT OFF                                                              
       ++INCLUDE FALINKBLK                                                      
         PRINT ON                                                               
                                                                                
* FATCB                                                                         
         PRINT OFF                                                              
       ++INCLUDE FATCB                                                          
         PRINT ON                                                               
                                                                                
* FASYSFAC                                                                      
*PREFIX=Y                                                                       
         PRINT OFF                                                              
       ++INCLUDE FASYSFAC                                                       
         PRINT ON                                                               
*PREFIX=                                                                        
                                                                                
* FASSB                                                                         
         PRINT OFF                                                              
       ++INCLUDE FASSB                                                          
         PRINT ON                                                               
         EJECT                                                                  
* SPDEMLKXTD                                                                    
         PRINT OFF                                                              
SPDEMLKD DSECT                                                                  
       ++INCLUDE SPDEMLKXTD                                                     
         PRINT ON                                                               
DEMTABD  DSECT                                                                  
       ++INCLUDE DEDEMTABD                                                      
         PRINT ON                                                               
         SPACE 1                                                                
***********************************************************************         
*=============== DSECT TO COVER GLOBAL WORKING STORAGE ===============*         
*                                                                               
DEMWRKD  DSECT                                                                  
*                                 *======= BASE SAVE ADDRESSES =======*         
ABASE    DS    A                   BASE PROGRAM BASE REG1                       
BBASE    DS    A                   BASE PROGRAM BASE REG2                       
CBASE    DS    A                   BASE PROGRAM BASE REG3                       
DBASE    DS    A                   BASE PROGRAM BASE REG3                       
BRELO    DS    A                   BASE PROGRAM RELOCATION FACTOR               
                                                                                
*                                 *===== PARAMETER LIST ADDRESSES ====*         
AWORK    DS    A                   BASE PROGRAM SAVED RD VALUE                  
ATIA     DS    A                   A(TIA)                                       
ATWA     DS    A                   A(TWA)                                       
AFAC     DS    A                   A(COMFACS)                                   
ATCB     DS    A                   A(TCB)                                       
ASYSFAC  DS    A                   A(SYSFACS)                                   
                                                                                
*                                 *======== COMMON FACILITIES ========*         
COMFACS  DS    0F                                                               
VDATAMGR DS    V                                                                
VCALLOV  DS    V                                                                
VDATCON  DS    V                                                                
VGETMSG  DS    V                                                                
VHELLO   DS    V                                                                
VSCANNER DS    V                                                                
VDEMOMTH DS    V                                                                
VDEMOUT  DS    V                                                                
VDEMAND  DS    V                                                                
VDEMOVAL DS    V                                                                
VGETFACT DS    V                                                                
VDATVAL  DS    V                                                                
VGETDAY  DS    V                                                                
VGETPROF DS    V                                                                
VADDAY   DS    V                                                                
VSWITCH  DS    V                                                                
VHEXIN   DS    V                                                                
VHEXOUT  DS    V                                                                
         DS    1V                  SPARE                                        
                                                                                
*                                 *===== CORE RESIDENT FACILITIES ====*         
COREFACS DS    0F                                                               
VBOOKVAL DS     V                                                               
VDAYPAK  DS     V                                                               
VSPDEMUP DS     V                                                               
VTIMVAL  DS     V                                                               
VUNTIME  DS     V                                                               
VQSORT   DS     V                                                               
VUPVAL   DS     V                                                               
VDEFINE  DS     V                                                               
VDEMOCON DS     V                                                               
VCLPACK  DS     V                                                               
VSPDEMLK DS     V                                                               
VMSPACK2 DS     V                                                               
VMSUNPK  DS     V                                                               
VTSAR    DS     V                                                               
VFALINK  DS     V                                                               
VRGETIUN DS     V                                                               
VREDEMUP DS     V                                                               
VDAYUNPK DS     V                                                               
VSTAPACK DS     V                                                               
VGETBROD DS     V                                                               
         DS     3V                  SPARE                                       
                                                                                
*                                 *====== ROOT PROGRAM ADDRESSES =====*         
ADDRFACS DS    0F                                                               
ASYSTAB  DS     A                  A(SYSTEM TABLE)        (SEE SYSTABD)         
AACTTAB  DS     A                  A(ACTION TABLE)       (SEE ACTTABDD)         
AFILTAB  DS     A                  A(FILE TABLE)          (SEE FILTABD)         
AFMSTAB  DS     A                  A(FILE/SOURCE TABLE)   (SEE FMSTABD)         
AOPTTAB  DS     A                  A(OPTIONS TABLE)       (SEE OPTTABD)         
                                                                                
ADM32ADD DS     A                  A(DEM32ADD)                                  
ADM32SET DS     A                  A(DEM32SET)                                  
AD32TBK  DS     A                  A(DEM32'S TRANSLATE BOOK ROUTINE)            
AERRITFC DS     A                  A(ERROR-HANDLING ROUTINE INTERFACE)          
AERROR0  DS     A                  A(ERROR0)                                    
AFAMAP   DS     A                  A(FAMAP)                                     
AGETCTRL DS     A                  A(GETCTRL)                                   
IOFLAG   DS     0X                 I/O FILE & COMMAND BYTE                      
AIO      DS     A                  A(DEMO FILES I/O ROUTINE)                    
AIOCHECK DS     A                  A(I/O COUNT CHECK ROUTINE)                   
AMYSCAN  DS     A                  A(MY SCANNER ROUTINE)                        
APOST    DS     A                  A(POSTLINE PUT ROUTINE)                      
APRINT   DS     A                  A(PRINT ROUTINE)                             
ATSTMRKT DS     A                  A(TSTMRKT)                                   
AUPCSETB DS     A                  A(UPPER CASE TABLE)                          
ASETUSID DS     A                  A(SETUSRID)                                  
ADBXUID  DS     A                  A(DBXUID)                                    
ASTACODE DS     A                  A(STACODE)                                   
ATRANSBT DS     A                  A(TRANSBT)                                   
         DS     2A                                                              
*                                                                               
VBINSRCH DS     V                                                               
VMEDGET  DS     V                                                               
VNSIWEEK DS     V                  V(NSIWEEK)                                   
VTWABLD  DS     V                  A(TWABLD)                                    
VNETWEEK DS     V                  V(NETWEEK)                                   
VNETUNBK DS     V                  V(NETUNBK)                                   
* NEW ADDRESSES TO ACCOMODATE DEDEM81 TABLES                                    
AACTHELP DS     A                  A(ACTHELP)                                   
AACTNEXT DS     A                  A(ACTNEXT)                                   
ATABLEN  DS     A                  A(TABLEN)                                    
ALTABLEN DS     A                  A(L'TABLEN)                                  
ATABLENQ DS     A                  A(TABLENQ)                                   
ATABLABL DS     A                  A(TABLABEL)                                  
ALTABLAB DS     A                  A(L'TABLABEL)                                
ATABLABQ DS     A                  A(TABLABELQ)                                 
*                                                                               
         DS     2V                 SPARE                                        
                                                                                
*                                 *************** STEREO **************         
STADDRS  DS    0A                  ADDRS NEED TO SET W/ STEREO                  
AGOSTEO  DS     A                   A(STEREO ROUTINES INTERFACE)                
ASTEREO  DS     A                   A(ROUTINES FOR STEREO)                      
AGETTDR  DS     A                   A(GET TSAR DEMO RECD ROUTINE)               
AVALRTNS DS     A                   A($DEM FIELD VALIDATION ROUTINES)           
ASTROIKY DS     A                   A(TBL OF VALID STEREO INPUT KYWDS)          
ASTDMEXP DS     A                   A(DEMO EXPRESSIONS)                         
ASTIOBUF DS     A                   A(I/O BUFFER USED W/ STEREO)                
ASTBUFFR DS     A                   A(MISC BUFFER)                              
ASTINCHK DS     A                   A(CHUNKS OF STEREO INPUT)                   
ASTICHKX DS     A                   A(END OF STEREO INPUT CHUNKS)               
ASTACTIN DS     A                   A(STORAGE FOR ACTUAL STEREO INPUT)          
AAPSAV2  DS     A                   A(APSAV2)                                   
ADCONMKT DS     A                   A(DCONTROL MARKET TABLE)                    
ASTEREO2 DS     A                                                               
         DS     3A                  (SPARE)                                     
*        DS     4A                  (SPARE)                                     
STADDRSQ EQU   (*-STADDRS)/(L'STADDRS)                                          
                                                                                
*                                 *===== ADDRESSES OF TWA FIELDS =====*         
ADEMACT  DS    A                   A(ACTION FIELD DUMMY/SCREEN FIELD)           
ADEMFIL  DS    A                   A(FILE FIELD DUMMY/SCREEN FIELD)             
ADEMSRC  DS    A                   A(SOURCE FIELD DUMMY/SCREEN FIELD)           
ADEMSTN  DS    A                   A(STATION FIELD DUMMY/SCREEN FIELD)          
ADEMBOK  DS    A                   A(BOOK FIELD DUMMY/SCREEN FIELD)             
ADEMDAT  DS    A                   A(DAY TIME FIELD DUMMY/SCREEN FIELD)         
ADEMDEM  DS    A                   A(DEMO FIELD DUMMY/SCREEN FIELD)             
ADEMOPT  DS    A                   A(OPTION FIELD DUMMY/SCREEN FIELD)           
                                                                                
         DS    0A                 *======= ADDRESSES OF BUFFERS ======*         
AAPWORK  DS     A                  A(OVERLAY W/S)                               
AEBREC   DS     A                  A(EBD RECORD) OR ZERO                        
AIOAREA1 DS     A                  A(I/O AREA1)                                 
AIOAREA2 DS     A                  A(I/O AREA2)                                 
ATSIOREC DS     A                  A(TSAR RECORD AND I/O AREA)                  
         DS     2A                 SPARE                                        
                                                                                
*                                 *=== AUXILIARY ADDRESS VARIABLES ===*         
*                                  *------ TABLE ENTRY ADDRESSES -----*         
ADDRNTRY DS    0F                                                               
ASYSNTRY DS    A                                                                
AACTNTRY DS    A                                                                
AFILNTRY DS    A                                                                
AFMSNTRY DS    A                                                                
AOPTNTRY DS    A                                                                
                                                                                
AKEYNTRY DS    A                    A(A STROIKY ENTRY)                          
AMTENTRY DS    A                    A(FALINK ELEMENT MAP TABLE ENTRY)           
AMTDNTRY DS    A                    A(FALINK DATA MAP TABLE ENTRY)              
                                                                                
         DS    2A                   (SPARE)                                     
                                                                                
         DS    0A                  *---------- MISCELLANEOUS ---------*         
AOVERLAY DS     A                   A(OVERLAY PHASE)                            
EADDR    DS     A                   A(ERROR "ROUTINE" TO USE)                   
VMSPACK  DS     V                                                               
         DS     0A                  A(FALINK ROUTINES)                          
AGETDATA DS      A                   A(GET DATA)                                
ASETELEM DS      A                   A(SET ELEMENT)                             
AADDDATA DS      A                   A(ADD DATA)                                
         DS     0A                  OPTION VALIDATION ADDRESSES                 
IADDR    DS      A                   A(OPTION ROUTINE OR VALIDTN TABLE)         
OADDR    DS      A                   A(OPTION OUTPUT VALUE)                     
                                                                                
ALINE    DS     A                   A(CURRENT OUTPUT TWA LINE)                  
ALINEHDR DS     A                   A(FIELD HEADER OF CURRENT LINE)             
AENDLN   DS     A                   A(END OF LINE)                              
AENDSCN  DS     A                   A(END OF SCREEN)                            
ANEXTCHR DS     A                   A(NEXT CHAR TO FETCH FOR INPUT)             
ADLDATA  DS     A                   A(DOWNLOAD DATA)                            
LDLDATA  DS     F                   L(DOWNLOAD DATA)                            
                                                                                
AIOAREA  DS     A                   A(I/O AREA FOR I/O ROUTINE)                 
ATMPTSIO DS     A                   A(TMP TSAR IO AREA)--POST RTN ONLY          
ASTCTLRD DS     A                   RD WHEN STCTL# ROUTINE IS CALLED            
         DS     2A                  (SPARE - NOT USED)                          
                                                                                
*                                 ******** LENGTH OF BIG AREAS ********         
LIOAREA1 DS    H                   L(IOAREA1)                                   
LIOAREA2 DS    H                   L(IOAREA2)                                   
LEBREC   DS    H                   L(EBREC AREA)                                
LAPWORK  DS    H                   L(APWORK AREA)                               
LSTIOBUF DS    H                   L(STIOBUFF AREA)                             
LSTBUFFR DS    H                   L(STBUFFER AREA)                             
LSTINCHK DS    H                   L(STINCHNK AREA)                             
LSTACTIN DS    H                   L(STACTIN AREA)                              
LAPSAV2  DS    H                   L(APSAV2 AREA)                               
LTSIOREC DS    H                   L(TSAR RECORD AND I/O AREA)                  
LDCONMKT DS    H                   L(DCONTROL MARKET TABLE)                     
         DS    8H                  (SPARE)                                      
                                                                                
         EJECT                                                                  
*                                 *===== GLOBAL TEMPORARY VALUES =====*         
DUB      DS    D                                                                
DUB2     DS    D                                                                
FULL     DS    F                                                                
FULL2    DS    F                                                                
HALF     DS    H                                                                
HALF2    DS    H                                                                
DMCB     DS    6F                                                               
DMCB2    DS    6F                                                               
WORK     DS    CL80                                                             
WORK2    DS    XL256                                                            
SPACES   DS    CL133                                                            
BYTE     DS    XL1                                                              
BYTE#2   DS    XL1                                                              
CHAR     DS    CL1                 TEMPORARY 1-BYTE CHARACTER STORAGE           
CHAR2    DS    CL1                 TEMPORARY 1-BYTE CHARACTER STORAGE#2         
                                                                                
*                                 *= TWA FIELD MANIPULATION VARIABLS =*         
*                                  *--- TWA FIELD VALIDATION VALUES --*         
FADR     DS    A                    A(CURRENT TWA FIELD)                        
FERN     DS    XL1                  FIELD ERROR NUMBER                          
FNDX     DS    XL1                  MULTIPLE FIELD INDEX VALUE                  
FNDX2    DS    XL1                  MULTIPLE FIELD INDEX VALUE #2               
NFLDS    DS    XL1                  N'SCANNER BLOCK FIELDS                      
NFLDS2   DS    XL1                  N'SCANNER BLOCK FIELDS #2                   
MFLDS    DS    XL1                  MAXIMUM N'SCANNER BLOCK FIELDS              
MFLDS2   DS    XL1                  MAXIMUM N'SCANNER BLOCK FIELDS #2           
SCAN1HL  DS    XL1                  OVERRIDE L(LHS) TO MYSCAN RTN               
SCAN1HL2 DS    XL1                  OVERRIDE L(LHS) TO MYSCAN RTN #2            
SCANLNTH DS    XL1                  L'RHS OF SCANNER BLOCK ENTRY                
SCNLNTH2 DS    XL1                  L'RHS OF SCANNER BLOCK ENTRY #2             
SCANDLIM DS    CL4                  SCANNER DELIMITERS (3RD PARAM)              
SCANDLM2 DS    CL4                  SCANNER DELIMITERS (3RD PARAM) #2           
XTRA     DS    CL20                 EXTRA MESSAGE (PRESET TO SPACES)            
FLDH     DS    XL8                  EXTRACTED FIELD HEADER                      
FLD      DS    CL(255-L'FLDH)       EXTRACTED & SPACE FILLED FIELD              
                                                                                
*                                  *--- DUMMY TWA FIELDS FOR FALINK --*         
DUMACTH  DS    CL8                                                              
DUMACT   DS    CL8                                                              
DUMFILH  DS    CL8                                                              
DUMFIL   DS    CL3                                                              
DUMSRCH  DS    CL8                                                              
DUMSRC   DS    CL3                                                              
DUMSTNH  DS    CL8                                                              
DUMSTN   DS    CL24                                                             
DUMBOKH  DS    CL8                                                              
DUMBOK   DS    CL30                                                             
DUMDATH  DS    CL8                                                              
DUMDAT   DS    CL(255-L'DUMDATH)                                                
DUMDEMH  DS    CL8                                                              
DUMDEM   DS    CL69                                                             
DUMOPTH  DS    CL8                                                              
DUMOPT   DS    CL69                                                             
         EJECT                                                                  
         DS    0X                 *===== SESSION/USER INFORMATION ====*         
DDS      DS     CL1                Y=DDS TERMINAL                               
AUTH     DS     XL2                AUTHORIZATION BITS                           
TERM     DS     XL2                TERMINAL NUMBER                              
USERID   DS     XL2                USER-ID NUMBER                               
AGYALPH  DS     CL2                AGENCY ALPHA-ID                              
AGYMED   DS     XL1                AGENCY/MEDIA BINARY VALUE (TV MEDIA)         
*&&DO                                                                           
D32VRSN  DS    XL3                 DEM32 VERSION (BINARY DATE)                  
         DS    XL1                  (FOR FURTHER VERSION QUALIFICATION)         
*&&                                                                             
                                                                                
PROGPROF DS     CL16                                                            
PROF1W   DS     CL16               1W SAVE AREA                                 
PROFRRMP DS     XL8                REP RMP PROFILE (64 PROFILES)                
                                                                                
TODAYB   DS     XL3                TODAY'S DATE (BINARY YMD)                    
         DS     XL16               SPARE                                        
                                                                                
                                                                                
         DS    0X                 *=VALIDATION INDICS & DEFAULT VALUES*         
IACTN    DS     XL1                THIS TIME INPUT ACTION                       
NACTN    DS     XL1                SCROLL FUNCTION (NEXT/FIRST)                 
ACTV     DS     0XL9                                                            
ACTI     DS      XL1                ACTION VALIDATION INDICATORS                
ACTD     DS      CL8                DEFAULT/PRESET ACTION                       
FILV     DS     0XL4                                                            
FILI     DS      XL1                FILE VALIDATION INDICATORS                  
FILD     DS      CL3                DEFAULT/PRESET FILE                         
SRCV     DS     0XL4                                                            
SRCI     DS      XL1                SOURCE VALIDATION INDICATORS                
SRCD     DS      CL3                DEFAULT/PRESET SOURCE                       
FLDV     DS     0XL6                                                            
STAV     DS      XL1                STATION VALIDATION INDICATORS               
STV2     DS      XL1                STATION VALIDATION INDICATORS #2            
BKV      DS      XL1                BOOK VALIDATION INDICATORS                  
BKV2     DS      XL1                BOOK VALIDATION INDICATORS #2               
DAYV     DS      XL1                DAY VALIDATION INDICATORS                   
DEMV     DS      XL1                DEMO VALIDATION INDICATORS                  
FLDN     DS     0XL4               N'SUB-FIELDS TO VALIDATE (0=NONE)            
STAN     DS      XL1                N'STATIONS                                  
BKN      DS      XL1                N'BOOKS                                     
DAYN     DS      XL1                N'DAY/TIMES                                 
DEMN     DS      XL1                N'DEMOS                                     
OPTV     DS     0XL8                                                            
OPTR     DS      XL4                REQUIRED OPTIONS                            
OPTX     DS      XL4                OPTIONS NOT ALLOWED                         
OPTI     DS      XL4                OPTIONS INPUT SO FAR                        
                                                                                
*                                  SPECIAL BOOK VALUES                          
ESTBOOK  DS    XL2                  ESTIMATE BOOK (FOR UPGRADES)                
LATBOOK  DS    XL2                  LATEST BOOK                                 
INVBOOK  DS    XL2                  INVALID BOOK                                
MBKBOOK  DS    XL2                  MULTIBOOKS BOOK                             
         DS    2XL2                 SPARE                                       
         EJECT                                                                  
                                                                                
*                                 *====== THIS TIME INPUT VALUES =====*         
THESE    DS    0X                                                               
COUNTRY  DS     C                                                               
ACTN     DS     XL1                 ACTION CODE                                 
FILE     DS     CL3                 FILE NAME                                   
SRC      DS     CL3                 SOURCE NAME                                 
NSTAS    DS     XL1                 N'STATIONS INPUT                            
STAS     DS     (MAXSTAS)XL7        STATION VALUE(S)                            
         ORG   STAS                                                             
BUYVALS  DS     0X                  AFFIDAVIT BUY VALUES                        
BUYAGM   DS      XL1                 AGENCY/MEDIA                               
BUYCLT   DS      CL3                 CLIENT CODE                                
BUYCLTK  DS      XL2                 CLIENT CODE KEY VALUE                      
BUYCLTO  DS      XL1                 CLIENT OFFICE CODE                         
BUYPRD   DS      CL3                 PRODUCT CODE                               
BUYPRDN  DS      XL1                 PRODUCT NUMBER                             
BUYPRDK  DS      XL1                 PRODUCT NUMBER (FOR BUY LINE READ)         
BUYSTA   DS      CL5                 STATION CALL LETTERS                       
BUYSTM   DS      XL5                 STATION/MARKET                             
BUYEST   DS      XL1                 ESTIMATE NUMBER                            
BUYLIN   DS      XL1                 LINE NUMBER                                
BUYSTR   DS      XL3                 BUY START DATE                             
BUYEND   DS      XL3                 BUY END DATE                               
BUYVALSL EQU   *-BUYVALS                                                        
*&&DO                                                                           
         ORG   STAS                                                             
NSIDSTA  DS    CL4                 SID STATION                                  
NSIDSTAB DS    XL3                 SID STATION (MSPACK)                         
NSIDSCHM DS    CL3                 SID SCHEME                                   
NSIDSCHB DS    CL2                 SID SCHEME (CLPACK)                          
NSIDPER  DS    CL4                 SID PERIOD                                   
NSIDYR   DS    CL1                 SID YEAR                                     
*&&                                                                             
         ORG                                                                    
NBKS     DS     XL1                 N'BOOKS INPUT                               
BKS      DS     (MAXBKS)XL4         BOOK VALUE(S)                               
                                                                                
NDAYS    DS     XL1                 N'DAY/TIMES INPUT                           
DAYS     DS     (MAXDAYS)XL5        DAY/TIME VALUE(S)                           
                                                                                
NDEMS    DS     XL1                 N'DEMOS INPUT                               
DEMS     DS     (MAXDEMS)XL3,X      DEMO VALUE(S) (+LIST TERMINATOR)            
                                                                                
ALFMKTS  DS     (MAXSTAS)XL3        ALPHA MKT VALUES                            
ALFMKTSQ EQU    *-ALFMKTS                                                       
*                                                                               
SYSCODES DS     (MAXSTAS)XL2        SYSCODE VALUES                              
SYSCDESQ EQU    *-SYSCODES                                                      
                                                                                
*PTNS    DS     0XL128             *----- THIS TIME OPTIONS INPUT ----*         
OPTNS    DS     0XL248             *----- THIS TIME OPTIONS INPUT ----*         
OPTUPFIL DS      CL1                UPGRADE FILE (T=TP,P=PAV)                   
OPTUPGD  DS      XL8                UPGRADE TYPE/VALUES                         
OPTUPDT  DS      XL5                UPGRADE DAY/TIME                            
OPTUPBK  DS      XL2                UPGRADE BOOK                                
OPTLIST  DS      CL1                MARKET LIST (A=ALPHA,N=NUMERIC)             
OPTSTRT  DS      CL9                LIST MARKETS STARTING WITH                  
OPTSVIS  DS      XL1                SVI MONTH (FOR DEMO LOOK-UPS)               
OPTDPRT  DS      CL1                DAYPART FILTER                              
OPTPTYP  DS      CL1                PROGTYP FILTER                              
OPTDTYP  DS      CL1                DATA TYPE OVERRIDE (S=SVIS)                 
                                                                                
OPTDATS  DS      0XL4               START & END DATES                           
OPTSDAT  DS       XL2                                                           
OPTEDAT  DS       XL2                                                           
                                                                                
OPTSECS  DS      XL1                SECONDS LENGTH FILTER                       
OPT2YRP  DS      CL1                C'Y'=2 YEAR PUT AVERAGE                     
OPT2YRR  DS      CL1                C'Y'=2 YEAR RTG AVERAGE                     
OPTUPBT  DS      CL1                UPGRADE BOOK TYPE                           
OPTCLI   DS      CL3                                                            
OPTSPRT  DS      CL1                FILTER W/ OR W/O SPORTS (Y/N/X'00')         
OPTDMA   DS      CL1                PRECISION SPECIFICATION ('I'/'R')           
OPTBEST  DS      CL1                BEST (LOOKUP) FOR PAV FILE                  
OPTNOR   DS      CL1                SHOW NOR PROGRAMS FOR PAV FILE              
OPTWKV   DS      CL1                DSPLY WEEKS VERTICALLY (Y/X'00')            
                                                                                
OPTMBK   DS      4XL2               MULTIPLE BOOKS (MAX 4)                      
         DS      4XL2               EXTEND THE BUFFER (BPOO)                    
         DS      4XL2                                                           
         DS      XL2                MONTHLY NOW ALLOWS 13 MAX (SEAN)            
         DS      CL1                EOL                                         
OPTMBKL  EQU     *-OPTMBK                                                       
                                                                                
OPTMBKBT DS      CL1                BOOK TYPE FOR MULTIPLE BOOKS                
                                                                                
OPTIMS   DS      10XL5              AFFILIATION LIST FOR IMS (MAX 11)           
OPTIMSL  EQU     *-OPTIMS                                                       
*                                   MK SINCE WE CANT HAVE UPG AND IMS           
OPTCAVG  DS      CL1                NTI CBL AVG LEV: P=PRG/T=TRK/E=EPIS         
OPTVPHBK DS      XL2                SWEEP BOOK TO INDEX VPHs FROM               
*                                                                               
OPTMBKH  DS      XL120              TEMP STORAGE FOR 13 BOOKS FOR MBK           
                                                                                
         DS     0CL(L'OPTNS-(*-OPTNS)+1)                                        
         ORG   OPTNS+L'OPTNS                                                    
THESEL   EQU   *-THESE                                                          
         EJECT                                                                  
*                                 *=====  FORMAT/DISPLAY OPTIONS =====*         
OPTPROG  DS    CL1                 PROGRAM NAMES (N=NO)                         
OPTTIME  DS    CL1                 TIME (MILITARY/STANDARD)                     
OPTPRNT  DS    CL3                 PRINT QUEUE REPORT ID                        
OPTDEC   DS    CL1                 DECIMAL PLACES FOR DMA=I                     
OPTLPMMK DS    XL2                                                              
OPTIMSF  DS    CL1                  A=AFFIL / S= STATIONS                       
         DS    XL4                 SPARE                                        
*        DS    XL5                 SPARE                                        
*        DS    XL7                 SPARE                                        
*        DS    XL8                 SPARE                                        
                                                                                
                                                                                
*                                 *======  MISC RUN CONTROL INFO =====*         
APMODE   DS    XL1                 APPLICATION MODE FROM ROOT                   
MAXLINE  DS    XL1                 MAXIMUM N'FORMAT LINES IN TWA                
GOSTEON  DS    XL1                 STEREO ROUTINE #                             
NDTCOMP  DS    XL1                 # OF DAY/TIME COMPONENTS IN ROTATION         
NESTLVL  DS    PL1                 NESTING LEVEL                                
NLINE    DS    XL1                 CURRENT TWA FORMAT LINE NUMBER               
OVERLAY  DS    XL1                 OVERLAY NUMBER                               
REPNO    DS    XL2                 PRINT QUEUE REPORT NUMBER                    
REPLN    DS    PL2                 NUMBER OF LINES SO FAR THIS PAGE             
SCREEN   DS    XL1                 SCREEN #                                     
         DS    XL4                 SPARE                                        
                                                                                
                                                                                
*                                 *======== DBLOCK KEY VALUES ========*         
DBKVALS  DS    0C                                                               
DBFNC    DS    XL1                 DBFUNCT VALUE                                
DBFIL    DS    CL3                 DBFILE VALUE                                 
DBSRC    DS    CL1                 DBSELSRC VALUE                               
DBMED    DS    CL1                 DBSELMED VALUE                               
DBSTABK  DS    (MAXSTAS)XL(STABKL) DBSELSTA/DBSELBK VALUES                      
DBKVALQ  EQU   *-DBKVALS                                                        
DBTPTTS  DS    C                   DBTPTT SAVE                                  
                                                                                
                                                                                
*                                 *======= DIR/FIL STATUS BYTES ======*         
DSTATUS  DS    XL1                 STATUS/CONTROL BYTE FROM DIRECTORY           
FSTATUS  DS    XL1                 STATUS/CONTROL BYTE FROM FILE                
                                                                                
                                                                                
*                                                                               
***      DS    CL46                SPARE                                        
         DS    CL36                SPARE                                        
DBXUID   DS    CL10                DBEXTEND USER LINK                           
                                                                                
                                                                                
*                                 *============== FLAGS ==============*         
MISCFLG1 DS    XL1                 MISC FLAGS #1                                
MF1WKACR EQU    X80                 DISPLAY WEEKS ACROSS SCREEN                 
MF1ERROR EQU    X40                 WENT THROUGH  ERROR  ROUTINE                
MF1STERR EQU    X20                 AN ERROR OCCURRED W/ STEREO                 
MF1BKVWK EQU    X10                 VALIDATE BOOK AS WEEKLY                     
MF1WHHD  EQU    X08                 A WEEKLY HH DEMO ENCOUNTERED                
                                                                                
MISCFLG2 DS    XL1                 MISC FLAGS #2                                
MF2DTROT EQU    X80                 DAY/TIME ROTATION                           
MF2VPUR  EQU    X40                 VALIDATING PURE #                           
                                                                                
HELPREQD DS    XL1                 HELP TYPE                                    
                                                                                
                                                                                
*                                 *==== PARAMETER BLOCKS AND SUCH ====*         
BINPARMS DS    0F                  *----- BINSRCH PARAMETER LIST -----*         
BINCMND  DS     0X                  COMMAND                                     
BINAREC  DS     A                   A(RECORD)                                   
BINATAB  DS     A                   A(TABLE)                                    
BINSOFAR DS     A                   N'ENTRIES SO FAR                            
BINLREC  DS     F                   L'RECORD                                    
BINDKEY  DS     0X                  DISPLACEMENT TO KEY                         
BINLKEY  DS     F                   L'KEY                                       
BINMAXN  DS     F                   MAXIMUM N'TABLE ENTRIES                     
BINLAST  DS     F                   SAVED BINNEXT VALUE                         
BINPARML EQU   *-BINPARMS                                                       
                                                                                
         DS    0F                  *---------- SPDEMUP BLOCK ---------*         
SPDEMUP1 DS    XL(SPDEMUP2)                                                     
                                                                                
         DS    0F                  *---------- DEMAND BLOCK ----------*         
DBLOCK1  DS    XL(L'DBLOCK)                                                     
         DS    CL14                 RESERVED                                    
         DS    CL50                DEMAND CLOBBERING ADDL SPACE                 
DBLOCK1X DS    0X                                                               
                                                                                
                                                                                
*                                 *============== FALINK =============*         
FABLK    DS    CL(FALINKDL)        BLOCK FOR FALINK                             
FPARMS   DS    6F                  RETURN PARMETER BLK FROM GETDATA             
FAMSGBLK DS    CL(FAMSGDL)         BLOCK FOR FALINK ERROR MESSAGE               
FACON    DS    CL(L'FALCON)        BLOCK FOR FALINK CONTROL FIELD               
FALEMPC  DS    XL2                 TEMP STORAGE FOR ELEMENT MAP CODE            
FALDMPC  DS    XL2                 TEMP STORAGE FOR DATA MAP CODE               
                                                                                
                                                                                
*                                 *=============== KEYS ==============*         
KEY      DS    CL30                                                             
KEYSAVE  DS    CL30                                                             
NDXDA    DS    XL4                                                              
                                                                                
TSARKEY  DS    XL60                KEY OF TSAR RECORD                           
                                                                                
                                                                                
*                                 *=========== OUTPUT AREAS ==========*         
POSTLINE DS    XL80                INPUT/OUTPUT POSTING LINE                    
         ORG   POSTLINE                                                         
LINE1    DS    CL133               OUTPUT LINE1 (AFTER APMODE=FORMLINE)         
LINE2    DS    CL133               OUTPUT LINE2 (NOT OUTPUT IF SPACES)          
LINE3    DS    CL133               OUTPUT LINE3 (NOT OUTPUT IF SPACES)          
                                                                                
DEMOUT6  DS    (MAXDEMS)CL6        PRINTABLE DEMOS 'RW1849'                     
DEMOUT75 DS    (MAXDEMS)CL(7+5)    PRINTABLE DEMOS 'WM18-49(RTG)'               
                                                                                
                                                                                
*                                 *============ I/O AREAS ============*         
         DS    0F                                                               
IOAREA1  DS    2000C                                                            
IOAREA2  DS    2000C                                                            
                                                                                
TSIOREC  DS    2000X               TSAR RECORD AND I/O AREA                     
TSIORECX EQU   *                                                                
                                                                                
EBREC    DS    6000C               EBD RECORD                                   
EBRECX   EQU   *                                                                
                                                                                
                                                                                
*                                 *======== OTHER LARGE AREAS ========*         
         DS    0D                                                               
**APWORK   DS    2000C               APPLICATION WORK AREA                      
APWORK   DS    2100C               APPLICATION WORK AREA                        
APWORKX  EQU   *                                                                
                                                                                
BINTAB   DS    XL(LENTWA)          BINSRCH TABLE                                
BINTABX  EQU   *                                                                
                                                                                
                                                                                
DEMWRKX  EQU   *                                                                
***********************************************************************         
         EJECT                                                                  
***********************************************************************         
*======================= TIA AREA (STEREO ONLY) ======================*         
TIADSECT DSECT                                                                  
*                                                                               
         DS    D                   *STICHK*                                     
STINCHNK DS    (STMXCHKL)XL1       STORAGE FOR STEREO INPUT                     
STICHNKX EQU   *-1                                                              
                                                                                
                                                                                
         DS    D                   STACTIN*                                     
STACTIN  DS    0X                  STORAGE FOR ACTUAL INPUT FROM STEREO         
STACTINH DS     0XL16               HEADER                                      
         DS      XL4                           L'INPUT                          
         DS      XL(L'STACTINH-(*-STACTINH))   (SPARE)                          
STACTINR DS     2XL(23*L'STEI1ST)   ACTUAL REQUEST, MAX 2 SCREENFUL             
STACTINX EQU   *                                                                
STACTINL EQU   STACTINX-STACTIN                                                 
                                                                                
                                                                                
         DS    D                   *STIOBF*                                     
STIOBUFF DS    XL2000              BUFFER TO DO I/O WITH STEREO                 
STIOBUFX EQU   *                                                                
                                                                                
                                                                                
         DS    D                   *STBUFF*                                     
STBUFFER DS    XL2000              MISCELLANEOUS BUFFER STORAGE                 
STBUFFRX EQU   *                                                                
                                                                                
                                                                                
         DS    D                   *APSAV2*                                     
APSAV2   DS    XL1000              APPLICATION SAVE AREA #2                     
APSAV2X  EQU   *                                                                
APSAV2L  EQU   APSAV2X-APSAV2                                                   
                                                                                
                                                                                
         DS    D                   *DCONMK*                                     
DCONMKT  DS    XL1000              DCONTROL MARKET TABLE                        
DCONMKTX EQU   *                                                                
DCONMKTL EQU   DCONMKTX-DCONMKT                                                 
                                                                                
                                                                                
TIASVLEN EQU   *-TIADSECT                                                       
                                                                                
                                                                                
TIADX    EQU   *                                                                
TIADL    EQU   TIADX-TIADSECT      ROOM USED UP IN TIA SO FAR                   
         DS    0XL(TPSTRPGL-TIADL+1)    MAKE SURE WE'RE W/IN BOUNDS             
***********************************************************************         
         EJECT                                                                  
* DSECT TO COVER TWA                                                            
*                                                                               
DEMTWAD  DSECT                                                                  
         DS    XL16                SYSTEM AREA                                  
DEMMODE  DS    X                   MODE (SEE EQUATES)                           
BINSAVE  DS    XL12                SAVED BINSRCH PARM LIST                      
BINNEXT  DS    XL4                 N'NEXT LINE TO BE FORMATTED                  
BINTWAS  DS    XL1                 N'SAVED TWA'S WRITTEN                        
APSAVE   DS    XL30                APPLICATION SAVE AREA                        
         ORG   DEMTWAD+64                                                       
SCRNSTRT EQU   *                                                                
* DEDEMFFD                                                                      
       ++INCLUDE DEDEMFFD                                                       
         EJECT                                                                  
*-------------------- STEREO'S SCREEN (DEDEMFED) --------------------*          
         ORG   DEMTWAD+64                                                       
                                                                                
       ++INCLUDE DEDEMFED                                                       
         EJECT                                                                  
*----------------- FALINK'S SCREEN (BUILT BY TWABLD) -----------------*         
         ORG   STEO1STH                                                         
FLNKSCRS DS    0X                  START OF FALINK "SCREEN"                     
         DS     (FLNKSCRQ)XL1       FALINK "SCREEN"                             
FLNKSCRL DS     CL1                 LAST                                        
         DS     CL2                 INDICATORS                                  
FLNKSCRW DS    0D                  WORK                                         
                                                                                
                                                                                
FLNKSCRQ EQU   ((1*(8+79+8))+(21*(8+79)))                                       
                                                                                
         EJECT                                                                  
*------------------------ SAVED AREA AFTER TWA -----------------------*         
                                                                                
* Note: The following ORG statement is to prevent clobbering of a               
*  screen.  If any changes in displacements are made to a screen,               
*  be sure to re-link ALL $DEM source code.  Otherwise, the displace-           
*  ments for the following fields will be out of sync.                          
                                                                                
         ORG                                                                    
SCRNEND  EQU   *                                                                
SCRNLEN  EQU   SCRNEND-SCRNSTRT    LONGEST SPACE USED BY A SCREEN               
                                                                                
* SAVED VALUES FROM LAST TIME INPUT (USED FOR NEXT VALIDATION)                  
*                                                                               
DEMSAVE  DS    0F                                                               
HELPSAVE DS    XL1                 SAVED INPUT ACTION CODE                      
LASTS    DS    0X                                                               
LCOUNTRY DS    C                   COUNTRY (USA/CANADA)                         
LACTN    DS    XL1                 ACTION CODE                                  
LFILE    DS    CL3                 FILE NAME                                    
LSRC     DS    CL3                 SOURCE NAME                                  
LNSTAS   DS    XL1                 N'STATIONS INPUT                             
LSTAS    DS    (MAXSTAS)XL7        STATION VALUE(S)                             
         ORG   LSTAS                                                            
LBUYVALS DS    0X                                                               
LBUYAGM  DS    XL1                                                              
LBUYCLT  DS    CL3                                                              
LBUYCLTK DS    XL2                                                              
LBUYCLTO DS    XL1                                                              
LBUYPRD  DS    CL3                                                              
LBUYPRDN DS    XL1                                                              
LBUYPRDK DS    XL1                                                              
LBUYSTA  DS    XL5                                                              
LBUYSTM  DS    XL5                                                              
LBUYEST  DS    XL1                                                              
LBUYLIN  DS    XL1                                                              
LBUYSTR  DS    XL3                                                              
LBUYEND  DS    XL3                                                              
         ORG                                                                    
LNBKS    DS    XL1                 N'BOOKS INPUT                                
LBKS     DS    (MAXBKS)XL4         BOOK VALUE(S)                                
LNDAYS   DS    XL1                 N'DAY/TIMES INPUT                            
LDAYS    DS    (MAXDAYS)XL5        DAY/TIME VALUE(S)                            
LNDEMS   DS    XL1                 N'DEMOS INPUT                                
LDEMS    DS    (MAXDEMS)XL3,X      DEMO VALUE(S)                                
LALFMKTS DS    XL(ALFMKTSQ)        ALPHA MARKET VALUES                          
LSYSCDES DS    XL(SYSCDESQ)        SYSCODES                                     
*OPTNS   DS    XL128               OPTION(S)                                    
LOPTNS   DS    XL248               OPTION(S)                                    
LASTSL   EQU   *-LASTS                                                          
         DS    0CL((LASTSL-THESEL)+1)                                           
         DS    0CL((THESEL-LASTSL)+1)                                           
LDTROTNL DS    H                                                                
LDTROTN  DS    XL1024              LIST OF ROTATIONS                            
         DS     0XL1                L(COMPONENTS) IN ROTATION                   
         DS     0XL5                A SINGLE COMPONENT IN ROTATION              
         EJECT                                                                  
HELPDISP DS    XL2                 DISP. TO HELP REQUESTED FIELD                
*&&DO                                                                           
DEMSAVEL EQU   *-DEMSAVE                                                        
DEMSAVEM EQU   6144-(DEMSAVE-DEMTWAD)                                           
*&&                                                                             
                                                                                
IODATALN DS    H                   LENGTH OF I/O DATA                           
                                                                                
DSPRCTS  DS    0H                  DISPLACEMENTS INTO REQCTLTB                  
DSPRCTAC DS    H                    DSPL TO ACTION   ENTRY FOR REQCTLTB         
DSPRCTFL DS    H                     "   "  FILE       "    "     "             
DSPRCTSC DS    H                     "   "  SOURCE     "    "     "             
DSPRCTST DS    H                     "   "  STATION    "    "     "             
DSPRCTBK DS    H                     "   "  BOOK       "    "     "             
DSPRCTDT DS    H                     "   "  DAY/TIME   "    "     "             
DSPRCTDM DS    H                     "   "  DEMO       "    "     "             
DSPRCTOP DS    H                     "   "  OPTIONS    "    "     "             
DSPRCTX  EQU   *                                                                
                                                                                
                                                                                
*                                 *====== SAVE AREAS FOR FIELDS ======*         
SVIOBDSP DS    H                   SAVED DISPL INTO STIOBUFF                    
SVMXRLEN DS    H                   SAVED MAX RECD LENGTH                        
SVOVRLAY DS    XL(L'OVERLAY)       SAVED OVERLAY #                              
SVSCREEN DS    XL(L'SCREEN)        SAVED SCREEN #                               
SVAPMODE DS    XL(L'APMODE)        SAVED APMODE                                 
                                                                                
SVDBKVAL DS    0C                  SAVED DBLOCK KEY VALUES                      
SVDBFNC  DS    XL(L'DBFNC)          DBFUNCT VALUE                               
SVDBFIL  DS    CL(L'DBFIL)          DBFILE VALUE                                
SVDBSRC  DS    CL(L'DBSRC)          DBSELSRC VALUE                              
SVDBMED  DS    CL(L'DBMED)          DBSELMED VALUE                              
SVDBSTBK DS    (MAXSTAS)XL(STABKL)  DBSELSTA/DBSELBK VALUES                     
SVDBKVLQ EQU   *-SVDBKVAL                                                       
         DS    0CL(SVDBKVLQ-DBKVALQ+1)                                          
         DS    0CL(DBKVALQ-SVDBKVLQ+1)                                          
                                                                                
SVFALHMC DS    XL(L'MHCODE)        SAVE (MOST RECENT) FALINK HDR  MPCDE         
SVFALDMC DS    XL(L'MDCODE)        SAVE (MOST RECENT) FALINK DATA MPCDE         
                                                                                
STPRVOVL DS    XL60                PREV VALUES OUTPUTTED TO STEREO              
                                                                                
                                                                                
*                                 *========== FLAGS & MODES ==========*         
STMODE   DS    CL1                 STEREO MODE                                  
STMINPQ  EQU    C'I'                INPUT MODE                                  
STMMIDQ  EQU    C'M'                MIDDLE MODE                                 
STMOUTQ  EQU    C'O'                OUTPUT MODE                                 
STMNXTQ  EQU    C'N'                PREPARE-FOR-NEXT-REQUEST MODE               
                                                                                
ADMODE   DS    CL1                 ADDDATA MODE                                 
ADMADD   EQU    C'A'                ADD DATA FOR DOWNLOAD                       
ADMDONE  EQU    C'D'                SIGNAL DONE W/ DOWNLOAD                     
ADMBRK   EQU    C'B'                SIGNAL BREAK W/ DOWNLOAD                    
                                                                                
DEMFLAG1 DS    XL1                 FLAGS                                        
DF1NO1ST EQU    X80                 NOT THE 1ST TIME INTO $DEM                  
DF1STERO EQU    X40                 STEREO SESSION                              
DF1CHKFE EQU    X20                 HAVE CHECKED X'FE' SCREEN FOR DEM32         
DF1DEM32 EQU    X08                 DEM32 VERSION OF STEREO DEM                 
                                                                                
STFLAG1  DS    XL1                 STEREO FLAGS                                 
SF1MDFRL EQU    X80                 DEMO MODIFIERS RELEASED TO STEREO           
                                                                                
INPTFLG1 DS    XL1                 THINGS ABOUT INPUT FROM STEREO               
IF1NEW   EQU    X80                 NEW REQUEST TO READ                         
IF1DONE  EQU    X40                 FINISHED READING ENTIRE INPUT               
IF1EOSCN EQU    X01                 END-OF-SCREEN REACHED                       
                                                                                
OUPTFLG1 DS    XL1                 THINGS ABOUT OUTPUT TO STEREO                
OF1ITSR  EQU    X80                 INITIALIZE TSAR (FOR NEW OUTPUT)            
OF1DONE  EQU    X20                 OUTPUTTING IS DONE                          
OF1RELSE EQU    X10                 RELEASE TSAR DEMO RECORDS                   
OF1NEW   EQU    X08                 OUTPUTTING FOR NEW STEREO REQUEST           
OF1RCTX  EQU    X04                 REQUEST CONTROL TABLE EXHAUSTED             
OF1SVSCR EQU    X02                 (STEREO) OUTPUT SCREEN SAVED                
OF1SMREQ EQU    OF1SVSCR            SAME REQUEST, PROCEED TO RELEASE            
OF1SCFUL EQU    X01                 SCREEN IS FULL--CAN'T FIT ANY MORE          
OF1RESUM EQU    OF1SCFUL            RESUME  FLAG                                
                                                                                
BRKFLAG1 DS    XL1                 (MAINFRAME) TRANSACTION BREAK  FLAG          
BF1FALNK EQU    X80                 BREAK WAS REQUESTED BY FALINK               
BF1APPLC EQU    X40                   "    "      "     "  APPLICATION          
BF1PRCSS EQU    X20                 A BREAK CURRENTLY IN PROCESS                
BF1NEEDB EQU    BF1FALNK+BF1APPLC                                               
                                                                                
RSMFLAG1 DS    XL1                 (MAINFRAME) TRANSACTION RESUME FLAG          
RF1FALNK EQU    X80                 RESUME BECAUSE FALINK CALLED BREAK          
RF1APPLC EQU    X40                   "       "    APPLIC   "      "            
RF1PRCSS EQU    X20                 A RESUME CURRENTLY IN PROCESS               
RF1NEEDR EQU    RF1FALNK+RF1APPLC                                               
                                                                                
WHEREBRK DS    XL1                 WHERE WE ASKED FOR A MF TRNSCTN BRK          
                                                                                
*&&DO                                                                           
D32XTRCT DS    XL3                 DEM32 EXTRACT VERSION (BINARY DATE)          
         DS    XL1                  (FOR FURTHER VERSION QUALIFICATION)         
         ORG   D32XTRCT                                                         
*&&                                                                             
D32PCVER DS    XL4                 DEM32's PC APPLIC VERSION STAMP              
                                                                                
         DS    XL8                 (SPARE)                                      
                                                                                
                                                                                
*                                 *============ CONSTANTS ============*         
DSLIST   DS    0C                  DATA DICTIONARY TERMS                        
SP@1BACT DS     CL3                 ACT                                         
SP@1BFIL DS     CL3                 FIL                                         
SP@1BSRC DS     CL3                 SOU                                         
SP@1BSTA DS     CL3                 STA                                         
SP@1BBOK DS     CL3                 BOO                                         
SP@1BDYT DS     CL3                 DAY                                         
SP@1BDEM DS     CL3                 DEM                                         
SP@1BOPT DS     CL3                 OPT                                         
DSLISTX  EQU   *                                                                
                                                                                
                                                                                
*                                 *======= TABLES/BLOCKS/LISTS =======*         
         DS    0F                                                               
TSB      DS    0C                  (ANOTHER LABEL FOR TSARBLCK)                 
TSARBLCK DS    XL(TSARDL)          TSAR'S PARAMETER BLOCK                       
*                                                                               
STINCTRS DS    0C                  TABLE OF STEREO INPUT COUNTERS               
         DS    (MAXKYWDS)XL(STINCTRQ)                                           
STINCTRX EQU   *                                                                
*                                                                               
REQCTLTB DS    0C                  REQUEST CONTROL TABLE                        
         DS    (MAXKYWDS)XL(RCTLENQ)                                            
         DS    XL1                                                              
RQCTLTBX EQU   *                                                                
*                                                                               
STDEMEXP DS    0C                  DEMO EXPRESSIONS LIST FOR STEREO             
         DS    XL1                  +0 : # OF DEMOS IN REQUEST                  
         DS    256XL3               +1 : LIST OF DEMO EXPRESSIONS               
         DS    XL1                     : LIST TERMINATOR                        
STDMEXPX EQU   *                                                                
*                                                                               
         DS    0F                                                               
SVFALINK DS    XL(4*1024)          FALINK'S SAVED STORAGE                       
                                                                                
                                                                                
         DS    0CL((CHKPTXHD)-(*-DEMTWAD)+1)   DON'T GO BEYOND CHKPOINT         
                                                                                
                                                                                
DEMTWAL  EQU   *-DEMTWAD           ROOM USED UP IN TWA SO FAR                   
         DS    0CL(TPSTRPGL-DEMTWAL+1)  MAKE SURE WE'RE W/IN BOUNDS             
         EJECT                                                                  
**************************************************************                  
* Oct19/99 LVL=071 New fields to support VPH for WTP file       (GLEE)*         
*                                                                     *         
* Oct19/99 LVL=070 New field VDAYUNPK                           (GLEE)*         
*                                                                     *         
* Jul08/99 LVL=067 New field ASTCTLRD                           (GLEE)*         
*                  New fields SCAN1HL & SCAN1HL2 to allow caller      *         
*                   to override L(1st half of field) in MYSCAN  (GLEE)*         
*                  New field MSCWLLFT & chg MSCB1DAT varble len (GLEE)*         
*                                                                     *         
* Jun01/99 LVL=066 New fields to remember FALINK map codes      (GLEE)*         
*                                                                     *         
* May26/99 LVL=065 New action to list books for ntwk/synd prgms (GLEE)*         
*                                                                     *         
* Apr16/99 LVL=064 New flag to aid in verifying DEM32 session   (GLEE)*         
*                                                                     *         
* Mar08/99 LVL=062 New equates for Weekly HouseHold stuff       (GLEE)*         
*                                                                     *         
* Jan29/99 LVL=061 Changed D32VRSN to D32XTRCT and moved to TWA (GLEE)*         
*                  New AD32TBK label                            (GLEE)*         
*                                                                     *         
* Dec22/98 LVL=060 New labels and fields for FALINK brk/rsm     (GLEE)*         
*                  New labels to "define" FALINK screen         (GLEE)*         
*                                                                     *         
* Nov06/98 LVL=059 New field, ATMPTSIO, for temp TSAR I/O area  (GLEE)*         
*                                                                     *         
* Oct05/98 LVL=056 DEM32 support                                (GLEE)*         
*                  Work area DSECT for $DEM's own SCANNER rtn   (GLEE)*         
*                                                                     *         
* May12/98 LVL=036 Add various fields for day/time rotations    (GLEE)*         
*                  New fields to handle sub-sub-fields          (GLEE)*         
*                                                                     *         
* Apr30/98 LVL=035 New STEREO only flag (analagous to DDSONLY)  (GLEE)*         
*                                                                     *         
* Apr03/98 LVL=034 Move STEREO buffers to TIADSECT              (GLEE)*         
*                  Create labels for buffers in TIADSECT        (GLEE)*         
*                  Change value of MAXTWA & LENTWA              (GLEE)*         
*                                                                     *         
* Nov05/97 LVL=033 Add various fields                           (GLEE)*         
*                                                                     *         
* Nov05/97 LVL=030 New DSECT for TIA area under STEREO session  (GLEE)*         
*                  Moved STINCHNK into TIA                      (GLEE)*         
*                  Support for CHECKPOINT area                  (GLEE)*         
*                                                                     *         
* Apr10/97 LVL=029 Remove support for ESTIMATE action           (GLEE)*         
*                                                                     *         
* Oct01/96 LVL=027 New PROGRRMP field for REP RMP profile       (GLEE)*         
*                                                                     *         
* Jul08/96 LVL=026 New option fields OPTMBK & OPTMBKBT, and                     
*                   new field to hold A(error "routine")        (GLEE)*         
*                  New MBKBOOK field to indicate multiple bks   (GLEE)*         
*                                                                     *         
* Jun17/96 LVL=025 Use core-resident version of REGETIUN        (GLEE)*         
*                                                                     *         
* Dec21/95 LVL=024 Include DSECT for PERVAL output block        (GLEE)*         
*                  Bit for validating book as weekly (MF1BKVWK) (GLEE)*         
*                                                                     *         
* Nov14/95 LVL=023 Dsect for STEREO's screen T21BFE             (GLEE)*         
*                  Dsect for table of input fields              (GLEE)*         
*                  New fields for STEREO support                (GLEE)*         
*                  New general usage equates                    (GLEE)*         
*                  Label to mark end of BINTAB                  (GLEE)*         
*                  ADCON for Upper Case table, NSIWEEK, & TSAR  (GLEE)*         
*                                                                     *         
* Jul31/95 LVL=022 New ADCON for REGETIUN                       (GLEE)*         
*                  Label to mark end of DBLOCK1                 (GLEE)*         
*                  BEST & NOR option for PAV file               (GLEE)*         
*                  Flag for displaying weeks across the screen  (GLEE)*         
*                  New option for displaying weeks vertically   (GLEE)*         
*                                                                     *         
* Feb14/95 LVL=021 New Alpha Mkt list for alpha mkt input       (GLEE)*         
*                  New STV2MRKT station validation indicators   (GLEE)*         
*                                                                     *         
* Nov30/94 LVL=020 Labels to mark end of EBREC & APWORK         (GLEE)*         
*                                                                     *         
* Oct19/94 LVL=019 New equates for PROGNAME action & its optns  (GLEE)*         
*                  New equates for PROGMKT  action & its optns  (GLEE)*         
*                  Increased MAXTWA from 2 to 3                 (GLEE)*         
*                  Added required fields for a 2nd STATION VALI-      *         
*                   DATION INDICATOR                            (GLEE)*         
*                  New STV2NMRC & DEMVOPTL Validation bits      (GLEE)*         
*                                                                     *         
* Oct12/94 LVL=018 New DMA option for precision specification   (GLEE)*         
*                                                                     *         
* MAR21/94 LVL=017 ADDED SPORTS & -SPORTS OPTIONS               (GLEE)*         
*          LVL=016 EXPANDED OPTION BITS AND FIELDS              (GLEE)*         
*                                                                     *         
* JUN11/87   ADDED PROGPROF AREA                             *                  
*                                                            *                  
**************************************************************                  
